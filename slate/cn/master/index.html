<!DOCTYPE html>
<html>
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <title>API Reference</title>

    <link href="../../stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen">
    <link href="../../stylesheets/print.css" rel="stylesheet" type="text/css" media="print">
    <link href="../../stylesheets/custom_appium.css" rel="stylesheet" type="text/css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="../../javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["ruby","python","java","javascript","php","csharp"]);
        });
      </script>
  </head>

  <body class="index">
    <div class="tocify-wrapper">
      <img src="../../images/logo.png">
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href="https://github.com/appium/ruby_lib">Ruby bindings</a></li>
            <li><a href="https://github.com/appium/python-client">Python bindings</a></li>
            <li><a href="https://github.com/appium/java-client">Java bindings</a></li>
            <li><a href="https://github.com/admc/wd">JavaScript bindings</a></li>
            <li><a href="https://github.com/appium/php-client">PHP bindings</a></li>
            <li><a href="https://github.com/appium/appium-dotnet-driver">C# bindings</a></li>
            <li><a href="http://appium.io/">Appium home page</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="about-appium">About Appium</h1>

<h2 id="客户端类库列表及appium服务端支持">
<span id="appium-clients.cn.md"></span>客户端类库列表及Appium服务端支持</h2>

<p>这些类库封装了标准Selenium客户端类库，为用户提供所有常见的<a href="https://code.google.com/p/selenium/wiki/JsonWireProtocol">JSON</a> 格式selenium命令以及额外的移动设备控制相关的命令，如多点<strong>触控手势</strong>和<strong>屏幕朝向</strong>。</p>

<p>Appium客户端类库实现了<a href="https://code.google.com/p/selenium/source/browse/spec-draft.md?repo=mobile">Mobile JSON Wire Protocol</a>（一个标准协议的官方扩展草稿）和<a href="https://dvcs.w3.org/hg/webdriver/raw-file/default/webdriver-spec.html">W3C Webdriver spec</a>（一个传输不可预知的自动化协议，该协议定义了MultiAction 接口）的元素。</p>

<p>Appium 服务端定义了官方协议的扩展，为Appium 用户提供了方便的接口来执行各种设备动作，例如在测试过程中安装/卸载app。这就是为什么我们需要Appium 特定的客户端，而不是通用的Selenium 客户端。当然，Appium 客户端类库只是增加了一些功能，而实际上这些功能就是简单的扩展了Selenium 客户端，所以他们仍然可以用来运行通用的selenium会话。</p>

<table>
<thead>
<tr>
<th>语言/框架</th>
<th>Github版本库以及安装指南</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ruby</td>
<td><a href="https://github.com/appium/ruby_lib">https://github.com/appium/ruby_lib</a></td>
</tr>
<tr>
<td>Python</td>
<td><a href="https://github.com/appium/python-client">https://github.com/appium/python-client</a></td>
</tr>
<tr>
<td>Java</td>
<td><a href="https://github.com/appium/java-client">https://github.com/appium/java-client</a></td>
</tr>
<tr>
<td>JavaScript (Node.js)</td>
<td><a href="https://github.com/admc/wd">https://github.com/admc/wd</a></td>
</tr>
<tr>
<td>Objective C</td>
<td><a href="https://github.com/appium/selenium-objective-c">https://github.com/appium/selenium-objective-c</a></td>
</tr>
<tr>
<td>PHP</td>
<td><a href="https://github.com/appium/php-client">https://github.com/appium/php-client</a></td>
</tr>
<tr>
<td>C# (.NET)</td>
<td><a href="https://github.com/appium/appium-dotnet-driver">https://github.com/appium/appium-dotnet-driver</a></td>
</tr>
<tr>
<td>RobotFramework</td>
<td><a href="https://github.com/jollychang/robotframework-appiumlibrary">https://github.com/jollychang/robotframework-appiumlibrary</a></td>
</tr>
</tbody>
</table>

<h1 id="appium-介绍">Appium 介绍</h1>

<p>Appium 是一个自动化测试开源工具，支持 iOS 平台和 Android 平台上的原生应用，web 应用和混合应用。</p>

<p>所谓的“移动原生应用”是指那些用 iOS 或者 Android SDK 写的应用。所谓的“移动 web 应用”是指使用移动浏览器访问的应用（Appium 支持 iOS 上的 Safari 和 Android 上的 Chrome）。所谓的“混合应用”是指原生代码封装网页视图——原生代码和 web 内容交互。比如，像 <a href="http://phonegap.com/">Phonegap</a>，可以帮助开发者使用网页技术开发应用，然后用原生代码封装，这些就是混合应用。</p>

<p>重要的是，Appium 是一个跨平台的工具：它允许测试人员在不同的平台（iOS，Android）使用同一套API来写自动化测试脚本，这样大大增加了 iOS 和 Android 测试套件间代码的复用性。</p>

<p>想知道 Appium 如何支持平台，版本和自动化形态的详细信息，请参见<a href="/docs/cn/appium-setup/platform-support.cn.md">platform support doc</a>。</p>

<h2 id="appium-的理念">
<span id="intro.cn.md"></span>Appium 的理念</h2>

<p>为了满足移动自动化需求，Appium 遵循着一种哲学，重点体现于以下4个需求：</p>

<ol>
<li>你无需为了自动化，而重新编译或者修改你的应用。</li>
<li>你不必局限于某种语言或者框架来写和运行测试脚本。</li>
<li>一个移动自动化的框架不应该在接口上重复造轮子。（移动自动化的接口应该统一）</li>
<li>无论是精神上，还是名义上，都必须开源。</li>
</ol>

<h2 id="appium-设计">Appium 设计</h2>

<p>那么 Appium 架构是如何实现这个哲学呢？为了满足第一条，Appium 真正的工作引擎其实是第三方自动化框架。这样，我们就不需在你的应用里植入 Appium 相关或者第三方的代码。这意味着你测试使用的应用与最终发布的应用并无二致。我们使用以下的第三方框架：</p>

<ul>
<li>iOS: 苹果的 <a href="https://developer.apple.com/library/ios/documentation/DeveloperTools/Reference/UIAutomationRef/_index.html">UIAutomation</a>
</li>
<li>Android 4.2+: Google’s <a href="http://developer.android.com/tools/help/uiautomator/index.html">UiAutomator</a>
</li>
<li>Android 2.3+: Google’s <a href="http://developer.android.com/reference/android/app/Instrumentation.html">Instrumentation</a>. (Instrumentation由单独的项目<a href="http://selendroid.io">Selendroid</a>提供支持 )</li>
</ul>

<p>为了满足第二点，我们把这些第三方框架封装成一套 API，<a href="http://docs.seleniumhq.org/projects/webdriver/">WebDriver</a> API.WebDriver（也就是 “Selenium WebDriver"） 指定了客户端到服务端的协议。
(参见 <a href="https://code.google.com/p/selenium/wiki/JsonWireProtocol">JSON Wire Protocol</a>)。使用这种客户端-服务端的架构，我们可以使用任何语言来编写客户端，向服务端发送恰当的 HTTP 请求。
目前已经实现了大多数流行语言版本的客户端，这意味着你可以使用任何测试套件或者测试框架。客户端库就是简单的HTTP 客户，可以以任何你喜欢的方式潜入你的代码。换句话说，Appium 和 WebDriver 客户端不是技术意义上的“测试框架”，而是“自动化库”。你可以在你的测试环境中随意使用这些自动化库！</p>

<p>事实上 WebDriver 已经成为 web 浏览器自动化的标准，也成了 W3C 的标准 —— <a href="https://dvcs.w3.org/hg/webdriver/raw-file/tip/webdriver-spec.html">W3C Working Draft</a>。我们又何必为移动做一个完全不同的呢？所以我们扩充了<a href="https://code.google.com/p/selenium/source/browse/spec-draft.md?repo=mobile">WebDriver 的协议</a>，在原有的基础上添加移动自动化相关的 API 方法，这也满足了第三条理念。</p>

<p>第四条就不用说了，<a href="https://github.com/appium/appium">Appium 是开源的</a>。</p>

<h2 id="appium-概念">Appium 概念</h2>

<p><strong>C/S 架构</strong><br>
Appium 的核心是一个 web 服务器，它提供了一套 REST 的接口。它收到客户端的连接，监听到命令，接着在移动设备上执行这些命令，然后将执行结果放在 HTTP响应中返还给客户端。事实上，这种客户端/服务端的架构给予了许多的可能性：比如我们可以使用任何实现了该客户端的语言来写我们的测试代码。比如我们可以把服务端放在不同
的机器上。比如我们可以只写测试代码，然后使用像 <a href="https://saucelabs.com/mobile">Sauce Labs</a> 这样的云服务来解释命令。</p>

<p><strong>Session</strong><br>
自动化始终围绕一个session进行，客户端初始化一个seesion（会话）来与服务端交互，不同的语言有不同的实现方式，但是他们最终都是发送为一个POST请求给服务端，请求中包含一个JSON对象，被称作“desired capabilities”。此时，服务端就会开启一个自动化的 session，然后返回一个 session ID，session ID将会被用户发送后续的命令。</p>

<p><strong>Desired Capabilities</strong><br>
Desired capabilities 是一些键值对的集合 (比如，一个 map 或者 hash），客户端将这些键值对发给服务端，告诉服务端我们想要怎么测试。比如，我们可以把<code class="prettyprint">platformName</code> capability 设置为 <code class="prettyprint">iOS</code>，告诉 Appium 服务端，我们想要一个iOS 的 session，而不是一个 Android 的。我们也可以设置 <code class="prettyprint">safariAllowPopups</code> capability 为 <code class="prettyprint">true</code>，确保在 Safari 自动化 session 中，我们可以使用 javascript 来打开新窗口。参见 <a href="/docs/cn/writing-running-appium/caps.cn.md">capabilities 文档</a>，查看完整的 capabilities 列表。</p>

<p><strong>Appium Server</strong><br>
Appium server 是用 Node.js 写的。我们可以用源码编译或者从 NPM 直接安装。</p>

<p><strong>Appium 服务端</strong><br></p>

<p>Appium 服务端有很多语言库 Java, Ruby, Python, PHP, JavaScript 和 C#，这些库都实现了
Appium 对 WebDriver 协议的扩展。当使用 Appium 的时候，你只需使用这些库代替常规的 WebDriver 库就可以了。
你可以从<a href="#appium-clients.cn.md">这里</a>看到所有的库的列表。</p>

<p><strong><a href="https://github.com/appium/appium-dot-app">Appium.app</a>, <a href="https://github.com/appium/appium-dot-exe">Appium.exe</a></strong><br></p>

<p>我们提供了 GUI 封装的 Appium 服务端下载，它封装了运行 Appium服务端的所有依赖，而不需要担心怎样安装Node.js。其中还包括一个Inspector工具，可以帮助你检查应用的界面层级，这样写测试用例时更方便。</p>

<h2 id="getting-started">Getting Started</h2>

<p>恭喜！你现在有足够的知识来使用 Appium 了。 来我们回到 <a href="/docs/cn/README.md">getting started doc</a> 继续了解更加
细节的需求和指南。</p>

<h1 id="setting-up-appium">Setting up Appium</h1>

<h1 id="intel®-硬件加速器管理">Intel® 硬件加速器管理</h1>

<p>如果你发现android模拟器太慢, 并且你的系统运行在Intel® 的cpu上. 那么你可以尝试下HAXM, HAXM能够让你充分利用硬件虚拟化技术来加速android模拟器。</p>

<ul>
<li>要安装HAXM, 你可以打开Android SDK Manager, 你可以在Extras中发现这个安装选项；</li>
<li>你可以在<a title="Hax" href="http://software.intel.com/en-us/articles/intel-hardware-accelerated-execution-manager/">Intel官方网站</a>找到所有相关的文档；</li>
<li>这将需要x86的模拟镜像；</li>
<li>利用Intel的包来安装HAXM; Android SDK Manager有时候会安装不成功，这主要取决于你安装的版本是否兼容。</li>
</ul>

<h2 id="android-setup">
<span id="android-setup.cn.md"></span>Android Setup</h2>

<p>使用前，你需要安装node.js(版本大于等于0.10)。 请参照 <a href="https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager">instructions for your flavor of linux</a>。</p>

<p>当node.js安装成功后，请安装 <a href="http://developer.android.com/sdk/index.html">Android SDK</a>。
运行'android' tool(位于SDK，tool文件目录下)。</p>

<p>运行'android' tool 来安装大于等于Level 17的API。</p>

<p>(如果你想从Appium的源码来运行，可在真机或者模拟器上用 <a href="http://ant.apache.org/">Apache Ant</a> 来编译bootstrap jar包)。</p>

<p>最后，将环境变量<code class="prettyprint">$ANDROID_HOME</code>设置为 Android SDK 的路径。例如,如果你将Android SDK 解压到 /usr/local/adt/，你需要把这个路径加到你的shell环境变量中去：</p>

<p>export ANDROID_HOME=”/usr/local/adt/sdk"</p>

<p>现在就可以启动Appium了！如果你在源码中运行Appium请运行
<code class="prettyprint">./reset.sh --android</code> 版本从Appium checkout会安装所有的依赖。</p>

<h3 id="老版本的额外安装">老版本的额外安装</h3>

<p>当android的版本是2.3到4.1的时候，appium用的是selendroid。 当它检测到时低版本时，它会自动应用Selendroid。但是需要配置一些额外的设置如果从source运行。</p>

<ul>
<li>已经安装 <a href="http://maven.apache.org/download.cgi">Maven 3.1.1</a> 或更新 (<code class="prettyprint">mvn</code>)</li>
<li>  运行 <code class="prettyprint">./reset.sh --selendroid</code> 从checkout的Appium源码</li>
</ul>

<h3 id="（运行appium-android-测试）">（运行Appium Android 测试）</h3>

<p>在Linux上运行，启动一个API大于等于level17的AVD。 在源文件目录下运行 (<code class="prettyprint">appium</code>) 在安装好 NPM, 或者 <code class="prettyprint">node</code>。如果你选择的是从源代码方式运行。
参照 <a href="/docs/cn/writing-running-appium/server-args.cn.md">server documentation</a> 来了解所有命令和参数。</p>

<h3 id="注意">注意</h3>

<ul>
<li>Android 加速模拟器需要存在，它有自己的局限性，如果想了解更多，请看这里
<a href="/docs/cn/appium-setup/android-hax-emulator.cn.md">page</a>。</li>
<li>如果你想运行任何Appium的测试，或者任何强大的命令，确保你的 <code class="prettyprint">hw.battery=yes</code> 在 AVD’s <code class="prettyprint">config.ini</code>文件中。</li>
<li>Selendroid 需要你APP中的如下权限：
<code class="prettyprint">&lt;uses-permission android:name="android.**permission.INTERNET"/&gt;</code>,
如果你在使用selendroid或者低版本的android(如版本2.3到4.1)，请确保你的App已设置internet权限。</li>
</ul>

<h1 id="部署ios-app-到手机上">部署iOS app 到手机上</h1>

<p>准备在真机上执行appium测试, 需要如下准备：</p>

<ol>
<li>用特殊的设备参数来构建app</li>
<li>使用 <a href="https://github.com/ghughes/fruitstrap">fruitstrap</a>， 这是一个第三方程序，可以用来部署你构建的app到手机上</li>
</ol>

<h2 id="xcodebuild-命令的参数：">
<span id="ios-deploy.cn.md"></span>Xcodebuild 命令的参数：</h2>

<p>新的参数运行指定设置. 参考 <a href="https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/xcodebuild.1.html">developer.apple.com</a>：</p>
<pre class="highlight plaintext"><code>xcodebuild [-project projectname] [-target targetname ...]
             [-configuration configurationname] [-sdk [sdkfullpath | sdkname]]
             [buildaction ...] [setting=value ...] [-userdefault=value ...]
</code></pre>

<p>这有一个资料来参考可用的<a href="https://developer.apple.com/library/mac/#documentation/DeveloperTools/Reference/XcodeBuildSettingRef/1-Build_Setting_Reference/build_setting_ref.html#//apple_ref/doc/uid/TP40003931-CH3-DontLinkElementID_10">设置</a></p>
<pre class="highlight plaintext"><code>CODE_SIGN_IDENTITY (Code Signing Identity)
    介绍: 标识符，指定一个签名。
    例如: iPhone Developer
</code></pre>

<p>PROVISIONING_PROFILE 已经从可用的的命令中消失了，但还是有必要设置的。</p>

<p>在xcodebuild命令中设置 “CODE_SIGN_IDENTITY” &amp; “PROVISIONING_PROFILE"：</p>
<pre class="highlight plaintext"><code>xcodebuild -sdk &lt;iphoneos&gt; -target &lt;target_name&gt; -configuration &lt;Debug&gt; CODE_SIGN_IDENTITY="iPhone Developer: Mister Smith" PROVISIONING_PROFILE="XXXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXX"
</code></pre>

<p>成功的话， app会构建到如下目录 <code class="prettyprint">&lt;app_dir&gt;/build/&lt;configuration&gt;-iphoneos/&lt;app_name&gt;.app</code></p>

<h2 id="用fruitstrap进行部署">用Fruitstrap进行部署</h2>

<p>clone一个fruitstrap的fork版本在<a href="https://github.com/ghughes/fruitstrap">ghughes version</a> ，这个已经不再维护. 已确认该fork可用<a href="https://github.com/unprompted/fruitstrap">unprompted fork</a>, 但是其它的据说也可用。</p>

<p>clone成功的话， 执行 <code class="prettyprint">make fruitstrap</code>
然后, 然后复制生成的 <code class="prettyprint">fruitstrap</code>到app的所在的目录或上级目录下。</p>

<p>运行fruitstrap 通过输入以下命令 (命令是否可用依赖于你fork的 fruitstrap)：</p>
<pre class="highlight plaintext"><code>./fruitstrap -d -b &lt;PATH_TO_APP&gt; -i &lt;Device_UDID&gt;
</code></pre>

<p>如果是为了持续集成，你可以发现很有用的方法来记录fruitstrap命令行和日志文件中的记录， 像这样：</p>
<pre class="highlight plaintext"><code>./fruitstrap -d -b &lt;PATH_TO_APP&gt; -i &lt;Device_UDID&gt; 2&gt;&amp;1 | tee fruit.out
</code></pre>

<p>在node服务启动前fruitstrap进行需要被结束， 一个方法是扫描fruitstrap的输出来得知app完成启动。 有一个有效的方法是通过一个Rakefile 和一个 <code class="prettyprint">go_device.sh</code> 脚本：</p>
<pre class="highlight plaintext"><code>bundle exec rake ci:fruit_deploy_app | while read line ; do 
   echo "$line" | grep "text to identify successful launch" 
   if [ $? = 0 ] 
   then 
   # Actions 
       echo "App finished launching: $line" 
       sleep 5 
       kill -9 `ps -aef | grep fruitstrap | grep -v grep | awk '{print $2}'` 
   fi
 done
</code></pre>

<p>一旦fruitstrap的进程被结束, node 服务就可以启动并且appium测试可以被执行!</p>

<p>下一步:
<a href="#real-devices.cn.md">在真机上运行appium</a></p>

<h2 id="android并发测试">
<span id="parallel_tests.cn.md"></span>Android并发测试</h2>

<p>Appium提供了在一台设备上启动多个Android会话的方案，而这个方案需要你输入不同的指令来启动多个Appium服务来实现。</p>

<p>启动多个Android会话的重要指令包括：</p>

<ul>
<li>
<code class="prettyprint">-p</code> Appium的主要端口</li>
<li>
<code class="prettyprint">-U</code> 设备id</li>
<li>
<code class="prettyprint">-bp</code> Appium bootstrap端口</li>
<li>
<code class="prettyprint">--chromedriver-port</code> chromedriver端口（当使用了webviews或者chrome）</li>
<li>
<code class="prettyprint">--selendroid-port</code> selendroid端口（当使用了selendroid）</li>
</ul>

<p>更多参数的解释详见 <a href="#caps.cn.md">here</a>。</p>

<p>如果我们有两台设备，设备ID分别为43364和32456，我们应该用下面的命令启动来两个不同的Appium服务：</p>

<p><code class="prettyprint">node . -p 4492 -bp 2251  -U 32456</code></p>

<p><code class="prettyprint">node . -p 4491  -bp 2252 -U 43364</code></p>

<p>只要你的Appium和Appium bootstrap端口介于0和65536即可，并且保证是两个不同的端口以便两个Appium服务不会监听相同的端口。确认你的-u参数绑定正确的设备ID。这可以让Appium知道连接哪台设备，所以参数一定要准确。</p>

<p>如果你用了chromedriver或selendroid，不同的服务要设置不同的端口。</p>

<h3 id="ios并发测试">iOS并发测试</h3>

<p>不幸的是，IOS不能进行本地并发测试。跟Android不一样，IOS在同一时间只能启动一个版本的模拟器来运行多个测试。
如果你想在IOS上进行并发测试，你需要用到Sauce。只需上传你的Appium测试脚本到Sauce，它就可以按照你的设置执行多个IOS或Android的并发测试。在Sauce上执行测试的更多信息，详见<a href="https://docs.saucelabs.com/tutorials/appium/">here</a>。</p>

<h1 id="appium支持的平台">Appium支持的平台</h1>

<p>Appium支持很多的运行平台和测试方式(包括原生、混合应用、内嵌浏览器、真机、模拟器等)。这篇文档主要用来让大家明确在使用
Appimu的时候支持的平台版本和上述测试方式的必备条件。</p>

<h2 id="ios平台支持">
<span id="platform-support.cn.md"></span>iOS平台支持</h2>

<p>请移步到<a href="#running-on-osx.cn.md">Running on OS X: iOS</a> 。这里介绍了在iOS系统下使用Appium的必备条件和安装说明。</p>

<ul>
<li>版本号：6.1，7.0，以及7.1。</li>
<li>支持设备：iPhone模拟器，iPad模拟器以及iPhones和iPads真机。</li>
<li>是否支持原生应用：支持。同时支持模拟器中调试应用版本和正确签名的真机ipa。其他相关支持由苹果的<a href="https://developer.apple.com/library/ios/documentation/DeveloperTools/Reference/UIAutomationRef/_index.html">UIAutomation</a>框架提供。</li>
<li>是否支持内置移动浏览器：支持。Safari浏览器已经通过测试。对于真机，则需要安装调试工具ios-webkit-remote-debugger。很遗憾，对于Safari的原生界面的自动化是不支持的。更多信息请移步至<a href="/docs/cn/writing-running-appium/mobile-web.cn.md">mobile web doc</a> 。</li>
<li>是否支持混合应用：支持。同样对于真机需要安装调试工具ios-webkit-remote-debugger，更多详情请移步至<a href="/docs/cn/advanced-concepts/hybrid.cn.md">hybrid doc</a> 查看详情。</li>
<li>是否支持在同一个session中执行多个应用的自动化：不支持。</li>
<li>是否支持同时再多个设备上执行自动化：不支持。</li>
<li>是否支持第三方提供应用：只支持在模拟器上有限的第三方应用（例如：喜好设置、地图等）。</li>
<li>是否支持自定义的、非标准UI控件的自动化：仅支持很少一部分。最好对控件添加可识别信息，以方便对元素进行一些基础的自动化操作。</li>
</ul>

<h2 id="android平台支持">Android平台支持</h2>

<p>请移步至 <a href="#running-on-osx.cn.md">Running on OS X: Android</a>，<a href="#running-on-windows.cn.md">Running on Windows</a>，或者<a href="#running-on-linux.cn.md">Running on Linux</a> 获得在不同操作系统下android平台对appium的支持和安装配置文档。</p>

<ul>
<li>支持版本：android 2.3平台及以上。

<ul>
<li>android 4.2平台及以上通过Appium自有的<a href="http://developer.android.com/tools/help/uiautomator/index.html">UiAutomator</a>类库支持。默认在自动化后台。</li>
<li>从android 2.3到4.3平台，Appium是通过绑定<a href="http://selendroid.io">Selendroid</a>，实现自动化测试的，你可以到android开发社区的<a href="http://developer.android.com/reference/android/app/Instrumentation.html">Instrumentation</a>。(仪表盘)中查看相关介绍。Selendroid拥有一套不同的命令行和不同的profile文件(这部分差距正在逐步缩小)。要获得在后台运行自动化的权限，需要配置<code class="prettyprint">automationName</code> 组件的值为 <code class="prettyprint">Selendroid</code>。</li>
</ul>
</li>
<li>支持的设备：Android模拟器和Android真机。</li>
<li>是否支持原生应用：支持。</li>
<li>是否支持内置移动浏览器：支持(除了使用Selendroid后台运行的情况)。通过代理方式绑定到<a href="https://code.google.com/p/selenium/wiki/ChromeDriver">Chromedriver</a>来运行自动化测试。在android4.2和4.3版本中，只有在官方版本的谷歌浏览器或者Chromium下才能运行自动化测试。伴随着android 4.4+版本的出现。自动化测试则可以运行在内置浏览器的应用程序。但是需要在测试设备环境下安装Chrome/Chromium/浏览器。请移步至<a href="/docs/cn/writing-running-appium/mobile-web.cn.md">mobile web doc</a> 获取更多详情。</li>
<li>是否支持混合应用: 支持。请移步至<a href="/docs/cn/advanced-concepts/hybrid.cn.md">hybrid doc</a>参考相关文档。

<ul>
<li>通过默认的Appium的后台支持android 4.4以上的版本。</li>
<li>通过Selendroid的后台支持android 2.3以上的版本。</li>
</ul>
</li>
<li>是否支持在同一个session中执行多个应用的自动化：支持（但是不支持使用Selendroid后台的场景）。</li>
<li>是否支持同时再多个设备上执行自动化：支持,。尽管Appium必须要启动另一个端口即通过添加参数的方式运行命令行，例如<code class="prettyprint">--port</code>，<code class="prettyprint">--bootstrap-port</code>（或者<code class="prettyprint">--selendroid-port</code>）或者<code class="prettyprint">--chromedriver-port</code>。更多详情请移步至<a href="/docs/cn/writing-running-appium/server-args.cn.md">server args doc</a>。</li>
<li>是否支持第三方应用自动化：支持（但是不支持Selendroid后台运行的场景）。</li>
<li>是否支持自定义的、非标准UI控件的自动化：不支持。</li>
</ul>

<h1 id="appium在真机上">Appium在真机上</h1>

<p>Appium已经初步支持真机测试。</p>

<p>如果要在真机上执行测试，你将要做如下准备：</p>

<p>1.一个苹果的开发者ID和有效的开发者对应的配置文件和签名文件</p>

<p>2.一台iPad或者iPhone</p>

<ol>
<li><p>你要测试的应用的源码</p></li>
<li><p>一台安装了XCode和XCode Command Line Developer Tools的Mac机器 </p></li>
</ol>

<h2 id="provisioning-profile">
<span id="real-devices.cn.md"></span>Provisioning Profile</h2>

<p>要在真机上测试就需要一个有效的iOS开发者的Distribution Certificate and Provisioning Profile。你可以在这个上面找到配置这些的相关信息<a href="http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/YourFirstAppStoreSubmission/TestYourApponManyDevicesandiOSVersions/TestYourApponManyDevicesandiOSVersions.html">Apple documentation</a></p>

<p>同样的，你还需要对你的应用签名，更多的信息可以查看<a href="http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/YourFirstAppStoreSubmission/ProvisionYourDevicesforDevelopment/ProvisionYourDevicesforDevelopment.html#//apple_ref/doc/uid/TP40011375-CH4-SW1">sign your app</a>.</p>

<p>你必须使用Xcode的执行按钮来安装你的应用</p>

<h2 id="使用appium运行你的测试">使用Appium运行你的测试</h2>

<p>一旦你的设备和应用设置好了之后，你就能够用如下的命令在你的机器上执行测试：</p>
<pre class="highlight plaintext"><code>node . -U &lt;UDID&gt; --app &lt;bundle_id&gt;
</code></pre>

<p>这将会启动Appium并且开始在真机上测试应用。</p>

<h2 id="疑问解答思路">疑问解答思路</h2>

<ol>
<li>确认UDID已经正确的在xcode organizar或itunes中设置了。很长的字符串（20多个字符串）
0.确认你测试代码中的测试对象设备的设置</li>
<li>再次确认你从instruments启动你的自动化测试</li>
<li>确认instruments已经关闭</li>
</ol>

<h1 id="在-linux-上运行-appium">在 Linux 上运行 Appium</h1>

<h3 id="限制">限制</h3>

<p>如果你在 Linux 上使用 Appium， 那么你没法使用已经构建好的 ‘.app'，那是为 OS X 准备的。 另外由于 Appium 在测试 iOS 应用时 依赖 OS X 特有的库， 所以你也没有办法测试在 Linux 上测试 iOS 应用。</p>

<h2 id="配置">
<span id="running-on-linux.cn.md"></span>配置</h2>

<p>首先，安装版本高于或等于 0.8 的 nodejs。可以根据 <a href="https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager">instructions for your flavor of linux</a> 进行安装。</p>

<p>安装好了 node.js 之后，安装 <a href="http://developer.android.com/sdk/index.html">Android SDK</a>。 你会需要运行 <code class="prettyprint">android</code> <code class="prettyprint">adb</code> 等工具，这些工具都在 SDK 里包含了， 你要做的是配置环境变量。当然你要确保你的 API level 大于等于 17。 你也需要使用 Ant 来构建 bootstrap jar 以便 Appium 使用它来测试 Android 应用。</p>

<p>最后， 设置 <code class="prettyprint">$ANDROID_HOME</code> 为你的 Android SDK 的路径。比如， 你将 Android SDK 解压在 <code class="prettyprint">/usr/local/adt/</code>， 那你就要将如下添加到你的 <code class="prettyprint">.bashrc</code> 或 <code class="prettyprint">.zshrc</code> 或 <code class="prettyprint">.bash_profile</code> 等 shell 配置文件中去:</p>

<p>export ANDROID_HOME=”/usr/local/adt/sdk</p>

<p>现在你可以运行 Appium 了， 在你 checkout 出来的 Appium 目录里， 运行 <code class="prettyprint">.reset.sh --android</code>， 它会帮助你安装好所有的依赖。</p>

<h2 id="运行-appium">运行 Appium</h2>

<p>运行测试前， 你需要启动一个 API Level 大于等于 17 的 Android 模拟器或者连接一个系统是 4.1 以上的 Android 真机。然后在 Appium 目录运行</p>

<p>node .</p>

<p>你可以在 <a href="#server-args.cn.md">server documentation</a> 找到所有的命令行参数。</p>

<h2 id="备注">备注</h2>

<ul>
<li>There exists a hardware accelerated emulator for android, it has it’s own
limitations. For more information you can check out this
Android 有一些硬件加速的模拟器，这些模拟器有自己的限制。你可以在 <a href="#android-hax-emulator.cn.md">page</a> 找到更多的信息。</li>
<li>确保你使用的 AVD 里面的 <code class="prettyprint">config.ini</code> 有这条指令 <code class="prettyprint">hw.battery=yes</code>。</li>
</ul>

<h1 id="在-mac-os-x-上使用-appium">在 Mac OS X 上使用 Appium</h1>

<p>在 OS X 上， Appium 支持 iOS 和 Android 测试</p>

<h2 id="系统配置-(ios)">
<span id="running-on-osx.cn.md"></span>系统配置 (iOS)</h2>

<ul>
<li>Appium 需要 Mac OS X 10.7， 推荐 10.8。 （经过测试， 10.9 也能工作。）</li>
<li>确保 Xcode 和 iOS SDK 都已经安装好了。 （当前 Appium 支持 Xcode 4.6.3/iOS 6.1 和 Xcode 5/iOS 7.0。 注意不推荐在基于 Xcode 5 下且低于 7.0 的 iOS 版本进行测试。 参照下篇可以获取更多信息）</li>
<li>你需要授权 iOS 模拟器的使用。如果你是通过 NPM 安装的 Appium，那么你可以运行 <code class="prettyprint">sudo authorize_ios</code> （<code class="prettyprint">authorize_ios</code>）是来自 Appium npm 包里的一个二进制执行文件。如果你是从源代码运行 Appium，那么你可以简单的使用 <code class="prettyprint">sudo grunt authorize</code>。如果你使用<a href="https://github.com/appium/appium-dot-app">Appium.app</a>, 那你只要用界面来操作。</li>
<li>如果你使用的是Xcode 6，在启动Appium之前，你需要打开模拟器，并且在你需要进行输入文字的操作之前，必须先将输入法提前调出。你可以通过点击输入区域或通过快捷键<code class="prettyprint">command-K</code>来将软键盘唤出。</li>
<li>Xcode 6中，有一个Devices的模块（command-shift-2可唤出）。你必须确保Appium 的capabilities参数中，所使用到的deviceName要存在于Devices里。换句话说，如果capabilities中的deviceName为"iPhone 5s"，platformVersion为"8.0"，那么你必须确保Devices中要存在那么一个设备是“iOS8系统的iPhone5s"，否则Appium将不知道使用哪一个设备进行测试。</li>
<li>在iOS8设置中的开发者选项里面，你可以打开或关闭UIAutomation。如果你的是iOS8设备，请在运行Appium之前，确保UIAutomation是打开状态的。</li>
</ul>

<h2 id="使用多种-ios-sdk-进行测试">使用多种 iOS SDK 进行测试</h2>

<p>Appium 使用苹果提供的 <code class="prettyprint">instruments</code> 来启动 iOS 模拟器，默认它会使用当前安装的 Xcode 和该 Xcode 下安装好的最高版本的 iOS SDK。这就意味着如果你想测试 iOS 6.1， 但是你安装了 iOS 7.0， 那么 Appium 会强制使用 7.0 的模拟器。 唯一的方法就是安装多个Xcode，然后在安装不同的 SDK。然后在启动 Appium 前，切换到你要测试的特定的版本。</p>

<p>另外，我们发现 Xcode 5 上的 iOS 6.1 测试，会很慢而且不稳定。所以我们推荐，如果要在 6.1 及 6.1 以下版本的 iOS 上进行测试，请使用 Xcode 4.6.3。如果要在 iOS 7.0 上测试，请使用 Xcode 5。假设我们的 Xcode 5 在 <code class="prettyprint">/Applications/Xcode.app</code>， Xcode 4.6 在 <code class="prettyprint">/Applications/Xcode-4.6.app</code>，我们就可以用下面的命令来切换到 Xcode 4.6 来为 iOS 6.1 测试做准备。</p>

<p>sudo xcode-select -switch /Applications/Xcode-4.6.app/Contents/Developer/</p>

<p>如果要回到 Xcode 5 的话，我们再运行一次:</p>

<p>sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer/</p>

<h2 id="系统配置-(android)">系统配置 (Android)</h2>

<ul>
<li>在Mac OSX 上运行Android项目所需要的配置，与Linux的配置方法是一致的，请参考 <a href="/docs/cn/appium-setup/android-setup.cn.md">Android setup docs</a>。</li>
</ul>

<h1 id="在windows上运行appium">在Windows上运行Appium</h1>

<h3 id="局限性">局限性</h3>

<p>如果你在windows上安装appium，你没法使用预编译专用于OS X的.app文件，你也将不能测试IOS apps，因为appium依赖OS X专用的库来支持IOS测试。这意味着你只能通过在mac上来运行IOS的app测试。这点限制挺大。</p>

<h2 id="开始安装">
<span id="running-on-windows.cn.md"></span>开始安装</h2>

<ol>
<li><p>安装<a href="http://nodejs.org/download/">nodejs</a> 0.8版本及以上, 通过官方的安装程序来安装。</p></li>
<li><p>安装android的sdk包，(http://developer.android.com/sdk/index.html), 运行依赖sdk中的'android'工具。并确保你安装了Level17或以上的版本api。设置<code class="prettyprint">ANDROID_HOME</code>系统变量为你的Android SDK路径，并把tools platform-tools两个目录加入到系统的Path路径里。因为这里面包含有一些执行命令</p></li>
<li><p>安装java的JDK，并设置<code class="prettyprint">JAVA_HOME</code> 变量为你的JDK目录。</p></li>
<li><p>安装<a href="http://ant.apache.org/bindownload.cgi">Apache Ant</a>
或者直接使用Android Windows SDK自带的ant，地址在eclipse\plugins目录，你需要把这个目录加到你的系统PATH变量中</p></li>
<li><p>安装<a href="http://maven.apache.org/download.cgi">Apache Maven</a>. 并且设置M2HOME和M2环境变量，把M2环境变量添加到你的系统PATH变量中。</p></li>
<li><p>安装<a href="http://git-scm.com/download/win">Git</a>. 确保你安装了windows下的Git，以便可以运行常用的command命令</p></li>
</ol>

<p>现在，你已经下载安装了所有的依赖，开始运行
    reset.bat</p>

<h3 id="运行appium">运行Appium</h3>

<p>要在windows上运行测试用例，你需要先启动Android模拟器或者连接上一个API Level17以上的android真机。然后在命令行运行<code class="prettyprint">appium</code>。
如果你是使用源码运行Appium的，请在你所安装的appium目录下执行node.js命令：
</p>
<p class="centercode"><code>node .</code></p>

<h3 id="备注">备注</h3>

<ul>
<li>在windows系统下运行appium.app时，需要使用管理员权限；当你通过源码的形式运行Appium时，也需要使用管理员权限启动CMD。</li>
<li>在windows系统下运行Android项目时，启动Appium时请带上<code class="prettyprint">--no-reset</code>或<code class="prettyprint">--full-reset</code>命令。</li>
<li>有一个硬件加速模拟器用于android，但是它有自己的一些限制，如果你想了解更多，请参考<a href="#android-hax-emulator.cn.md">页面</a>
</li>
<li>确保在你的AVD的<code class="prettyprint">config.ini</code>中有一个配置项为<code class="prettyprint">hw.battery=yes</code> </li>
</ul>

<h3 id="最简略的安装方式">最简略的安装方式</h3>

<p>出于对官方文档的尊重，我按照原文翻译，如下介绍我的安装心得。官方提到的一些工具，其实并不需要安装。
下面介绍我已经测试过的安装和使用过程</p>

<h3 id="安装appium">安装appium</h3>

<ol>
<li>安装nodejs</li>
</ol>

<p>2、使用npm安装appium，npm install -g appium</p>

<h3 id="运行appium">运行appium</h3>

<p>启动appium，直接运行appium 即可。</p>

<h3 id="更新appium">更新appium</h3>

<p>通过<code class="prettyprint">npm install -g appium</code> 来更新appium即可</p>

<p>如果有任何疑问，欢迎到testerhome.com来交流</p>

<h2 id="appium-故障排除">
<span id="troubleshooting.cn.md"></span>Appium 故障排除</h2>

<p>当你遇到问题时，请不要急着将问题提交到Github，也不用急着发到<a href="https://discuss.appium.io">appium-discuss discussion group</a>，也许你可以在本文中找到答案。</p>

<h3 id="常见问题解决办法">常见问题解决办法</h3>

<ul>
<li>确保你的每一个步骤都是遵循 <a href="/docs/cn/README.cn.md">入门指南</a> 来做的。</li>
<li>确保你的系统配置正确。（例如：Xcode是否升级到了最新版本，Android SDK是否有设置到环境变量<code class="prettyprint">ANDROID_HOME</code>中去。）</li>
<li>确保你的应用存放路径没有错误。</li>
</ul>

<h3 id="appium.app运行出现问题的解决办法">Appium.app运行出现问题的解决办法</h3>

<ul>
<li>升级Appium.app后重新打开即可解决。如果提示你不能升级，则需要重新下载Appium.app，下载地址：<a href="http://appium.io">appium.io</a>
</li>
</ul>

<h3 id="通过源码启用appium出现问题的解决办法">通过源码启用Appium出现问题的解决办法</h3>

<ul>
<li>使用<code class="prettyprint">git pull</code>拉取最新源码，确保运行的代码是当前最新版本。</li>
<li>针对你所自动化的平台，运行<code class="prettyprint">reset.sh</code>命令：</li>
</ul>

<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>./reset.sh</td>
<td># all</td>
</tr>
<tr>
<td>./reset.sh –ios</td>
<td># ios-only</td>
</tr>
<tr>
<td>./reset.sh –android</td>
<td># android-only</td>
</tr>
<tr>
<td>./reset.sh –selendroid</td>
<td># selendroid-only</td>
</tr>
</tbody>
</table>

<ul>
<li>当你需要下载以及构建测试应用时，运行<code class="prettyprint">reset.sh</code>时你需要用到<code class="prettyprint">--dev</code>指令。</li>
<li>你也可以使用<code class="prettyprint">appium-doctor</code>来自动检测你的环境依赖都是否正常。如果你是使用源码运行，则需要使用到<code class="prettyprint">bin/appium-doctor.js</code>或<code class="prettyprint">node bin/appium-doctor.js</code>。</li>
<li>当你将Android SDK升级到22后，可能出现如下错误：
<code class="prettyprint">{ANDROID_HOME}/tools/ant/uibuild.xml:155: SDK does not have any Build Tools installed.</code>
这是因为在Android SDK 22中，platform 和 build 工具被分拆到他们各自的SDK管理包中去了。你需要确保你的机器上正确安装了build-tools 和 platform-tools。</li>
</ul>

<h3 id="android常见问题解决办法">Android常见问题解决办法</h3>

<ul>
<li>确保 Android 模拟器启动并运行着。</li>
<li>出现设备连接问题时，运行<code class="prettyprint">adb kill-server &amp;&amp; adb devices</code>是非常有效的。它能够帮助重置和连接Android设备。</li>
<li>请确保环境变量 ANDROID_HOME 指向的是正确的Android SDK的路径。</li>
</ul>

<h3 id="ios常见问题解决方案">IOS常见问题解决方案</h3>

<ul>
<li>确保Instruments.app是关闭的。</li>
<li>如果你是使用模拟器运行的，请不要将真机设备连接电脑。</li>
<li>确保模拟器或真机中，设置里面的accessibility辅助功能是关闭状态的。</li>
<li>确保App是编译在当前运行的模拟器上。</li>
<li>确保App是编译在合适的模拟器（或真机）上，不然会出现<code class="prettyprint">posix spawn</code>的报错。（比如：运行在debug模式下的模拟器）</li>
<li>如果你曾经用 sudo 运行过 Appium， 你需要先删除/tmp/instruments_sock， 执行<code class="prettyprint">sudo rm /tmp/instruments_sock</code>。然后在不适用SUDO的情况下再次启动Appium即可。</li>
<li>第一次运行Appium时，需要对Instruments进行授权。不然的话会经常弹出对话框要求你输入密码。如果你从源代码运行 Appium，你只需在主分支上运行<code class="prettyprint">sudo grunt authorize</code>来回避该弹窗。如果用 npm 安装的话，运行 <code class="prettyprint">sudo authorize_ios</code> 即可。注意，当你每次安装了新版本的xcode，你都需要重复以上操作。</li>
<li>如果检查路径正确，但仍然报 <code class="prettyprint">iOS Simulator failed to install the application.</code>的错误的时候，请尝试重启你的电脑。</li>
</ul>

<h3 id="webview/hybrid/safari-应用支持">Webview/Hybrid/Safari 应用支持</h3>

<ul>
<li>确保真机上的'Web Inspector'为打开状态。</li>
<li>确保打开了Safari的开发模式。（Safari - Advance Preferences- Developer menu for
simulators）</li>
<li>确保由client library提供的Appium命令-<code class="prettyprint">context</code>能够正常得对contexts进行切换。</li>
<li>当你尝试打开代理的时候，出现如下错误：select_port() failed，请参考<a href="https://groups.google.com/forum/#!topic/appium-discuss/tw2GaSN8WX0">discussion</a>
</li>
</ul>

<h3 id="firefoxos常见问题解决办法">FirefoxOS常见问题解决办法</h3>

<ul>
<li>确保 Boot-to-Gecko 模拟器启动并运行着。</li>
<li>确保模拟器的屏幕是亮着并无锁屏的(可能需要重启 B2G).</li>
</ul>

<h3 id="到社区寻求帮助">到社区寻求帮助</h3>

<p>若通过上述方法你的问题依然没有得到解决，你可以：</p>

<p>如果你的 Appium 无法正常工作，然后错误信息不够清晰，欢迎加入 <a href="https://discuss.appium.io">discussion group</a>中发表你的问题，你的问题需要包括以下内容：</p>

<ul>
<li>你是如何运行Appium的？(Appium.app, npm, source)</li>
<li>你使用的是什么操作系统？</li>
<li>你使用的是什么设备？版本是什么？ (i.e. Android 4.4, or iOS 7.1)</li>
<li>你使用的是真机还是模拟器？</li>
<li>给出你得到的客户端和服务端的出错日志 (比如,"我的Python代码中报了如下错误：balabala，在Appium server中的输出内容如链接中所示"）</li>
<li>除了上述， 贴出 Appium 服务器端的输出也非常重要，特别是运行在 verbose 模式。这样我们可以分析诊断问题在哪里。</li>
</ul>

<p>如果你确信你发现的是一个BUG，请到<a href="https://github.com/appium/appium/issues">issue tracker</a>中提交一个issue，并将BUG的内容描述清楚。</p>

<h3 id="已知问题">已知问题</h3>

<ul>
<li>如果你从 Node 官网安装的 Node，那需要你使用 sudo 运行 <code class="prettyprint">npm</code>。 但这么做并不是非常理想。请尝试从
<a href="https://github.com/visionmedia/n">n</a> 获取node 或运行<code class="prettyprint">brew install node</code>来安装 。</li>
<li>Webview通过代理可以支持iOS真机设备，请参考<a href="https://groups.google.com/d/msg/appium-discuss/u1ropm4OEbY/uJ3y422a5_kJ">discussion</a>
</li>
<li>有时候， iOS 的 UI 元素在定位到之后几毫秒会突然变得无效。这会导致一个类似(null) cannot be tapped的错误。唯一的解决方法就是把finding-and-acting的代码放到 retry 块里。</li>
<li>如果你是通过MacPorts安装了Node和Npm，你必须确保MacPorts的bin文件夹已经被添加到环境变量<code class="prettyprint">PATH</code>中去，不然Appium会出现难以找到可执行<code class="prettyprint">node</code>的情况。</li>
</ul>

<h3 id="特定的错误">特定的错误</h3>

<table>
<thead>
<tr>
<th>Action</th>
<th>Error</th>
<th>Resolution</th>
</tr>
</thead>
<tbody>
<tr>
<td>Running reset.sh</td>
<td>xcodebuild: error: SDK "iphonesimulator6.1” cannot be located</td>
<td>安装 iPhone 6.1 SDK 或者 使用单独的 SDK 构建 待测应用 比如： <code class="prettyprint">grunt buildApp:UICatalog:iphonesimulator5.1</code>
</td>
</tr>
<tr>
<td>Running reset.sh</td>
<td>Warning: Task “setGitRev” not found. Use –force to continue.</td>
<td>使用<code class="prettyprint">git submodule update --init</code>更新模块并再次运行<code class="prettyprint">reset.sh</code>
</td>
</tr>
<tr>
<td>Running reset.sh</td>
<td><code class="prettyprint">[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project selendroid-server: Compilation failure [ERROR] Failure executing javac, but could not parse the error: [ERROR] [ERROR] [ERROR] The system is out of resources. [ERROR] Consult the following stack trace for details. [ERROR] java.lang.StackOverflowError</code></td>
<td><code class="prettyprint">export MAVEN_OPTS="-Xms1024m -Xmx2048m -Xss2048k"</code></td>
</tr>
<tr>
<td>Running ios test</td>
<td><code class="prettyprint">[INST STDERR] posix spawn failure; aborting launch</code></td>
<td>你的应用没有正确编译在模拟器或真机上。</td>
</tr>
<tr>
<td>Running mobile safari test</td>
<td><code class="prettyprint">error: Could not prepare mobile safari with version '7.1'</code></td>
<td>你可能需要在此运行授权脚本以保证使iOS SDK文件为可写状态。 E.g., <code class="prettyprint">sudo authorize_ios</code>
</td>
</tr>
</tbody>
</table>

<h1 id="running-appium-tests">Running Appium tests</h1>

<h2 id="appium-客户端库">
<span id="appium-bindings.cn.md"></span>Appium 客户端库</h2>

<p>Appium 有对应以下语言的客户端库:</p>

<table>
<thead>
<tr>
<th style="text-align: left">语言</th>
<th style="text-align: right">代码</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left"><a href="http://rubygems.org/gems/appium_lib">Ruby</a></td>
<td style="text-align: right"><a href="https://github.com/appium/ruby_lib">GitHub</a></td>
</tr>
<tr>
<td style="text-align: left"><a href="https://pypi.python.org/pypi/Appium-Python-Client">Python</a></td>
<td style="text-align: right"><a href="https://github.com/appium/python-client">GitHub</a></td>
</tr>
<tr>
<td style="text-align: left"><a href="https://search.maven.org/#search%7Cga%7C1%7Cg%3Aio.appium%20a%3Ajava-client">Java</a></td>
<td style="text-align: right"><a href="https://github.com/appium/java-client">GitHub</a></td>
</tr>
<tr>
<td style="text-align: left"><a href="https://www.npmjs.org/package/wd">JavaScript</a></td>
<td style="text-align: right"><a href="https://github.com/admc/wd">GitHub</a></td>
</tr>
<tr>
<td style="text-align: left"><a href="https://github.com/appium/php-client">PHP</a></td>
<td style="text-align: right"><a href="https://github.com/appium/php-client">GitHub</a></td>
</tr>
<tr>
<td style="text-align: left"><a href="http://www.nuget.org/packages/Appium.WebDriver/">C#</a></td>
<td style="text-align: right"><a href="https://github.com/appium/appium-dotnet-driver">GitHub</a></td>
</tr>
<tr>
<td style="text-align: left"><a href="https://github.com/appium/selenium-objective-c">Objective-C</a></td>
<td style="text-align: right"><a href="https://github.com/appium/selenium-objective-c">GitHub</a></td>
</tr>
</tbody>
</table>

<p>请注意：有些方法，比如 <code class="prettyprint">endTestCoverage()</code> 目前不能提供完整支持。
只有<a href="https://github.com/appium/appium/issues/2448">这个问题</a>修复， 完整的覆盖率支持才会被添加。
如果你一定要用这些方法，请先查看 Github 上关于 bindings 的文档。</p>

<h3 id="锁定">锁定</h3>

<p>锁定屏幕</p>
<pre class="highlight ruby"><code><span class="c1"># ruby</span>
<span class="n">lock</span> <span class="mi">5</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="n">driver</span><span class="o">.</span><span class="n">lock</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</code></pre>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">driver</span><span class="o">.</span><span class="na">lockScreen</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="nx">driver</span><span class="p">.</span><span class="nx">lock</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</code></pre>
<pre class="highlight php"><code>// php
$this-&gt;lock(3);
</code></pre>
<pre class="highlight csharp"><code><span class="c1">// c#
</span><span class="n">driver</span><span class="p">.</span><span class="nf">LockDevice</span><span class="p">(</span><span class="m">3</span><span class="p">);</span>
</code></pre>
<pre class="highlight plaintext"><code>// objective c
[driver lockDeviceScreen:3];
</code></pre>

<h3 id="将-app-置于后台">将 app 置于后台</h3>

<p>把当前应用放到后台去</p>
<pre class="highlight ruby"><code><span class="c1"># ruby</span>
<span class="n">background_app</span> <span class="mi">5</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="n">driver</span><span class="o">.</span><span class="n">background_app</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</code></pre>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">driver</span><span class="o">.</span><span class="na">runAppInBackground</span><span class="o">(</span><span class="mi">5</span><span class="o">);</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="nx">driver</span><span class="p">.</span><span class="nx">backgroundApp</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</code></pre>
<pre class="highlight php"><code>// php
$this-&gt;backgroundApp(5);
</code></pre>
<pre class="highlight csharp"><code><span class="c1">// c#
</span><span class="n">driver</span><span class="p">.</span><span class="nf">BackgroundApp</span><span class="p">(</span><span class="m">5</span><span class="p">);</span>
</code></pre>
<pre class="highlight plaintext"><code>// objective c
[driver runAppInBackground:3];
</code></pre>

<h3 id="收起键盘">收起键盘</h3>

<p>收起键盘</p>
<pre class="highlight ruby"><code><span class="c1"># ruby</span>
<span class="n">hide_keyboard</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="n">driver</span><span class="o">.</span><span class="n">hide_keyboard</span><span class="p">()</span>
</code></pre>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">driver</span><span class="o">.</span><span class="na">hideKeyboard</span><span class="o">();</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="nx">driver</span><span class="p">.</span><span class="nx">hideKeyboard</span><span class="p">()</span>
</code></pre>
<pre class="highlight php"><code>// php
$this-&gt;hideKeyboard();
$this-&gt;hideKeyboard(array('strategy' =&gt; 'pressKey', 'key' =&gt; 'Done'));
</code></pre>
<pre class="highlight csharp"><code><span class="c1">// c#
</span><span class="n">driver</span><span class="p">.</span><span class="nf">HideKeyboard</span><span class="p">(</span><span class="s">"Done"</span><span class="p">);</span>
</code></pre>
<pre class="highlight plaintext"><code>// objective c
[driver hideKeyboard];
</code></pre>

<h3 id="启动-activity">启动 Activity</h3>

<p>在当前应用中打开一个 activity 或者启动一个新应用并打开一个 activity 。 <em>只能在 Android 上使用</em></p>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">driver</span><span class="o">.</span><span class="na">startActivity</span><span class="o">(</span><span class="s">"appPackage"</span><span class="o">,</span><span class="s">"com.example.android.apis"</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="nx">driver</span><span class="p">.</span><span class="nx">startActivity</span><span class="p">({</span><span class="na">appPackage</span><span class="p">:</span> <span class="s1">'com.example.android.apis'</span><span class="p">,</span> <span class="na">appActivity</span><span class="p">:</span> <span class="s1">'.Foo'</span><span class="p">},</span> <span class="nx">cb</span><span class="p">);</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="n">driver</span><span class="o">.</span><span class="n">start_activity</span><span class="p">(</span><span class="s">'com.example.android.apis'</span><span class="p">,</span> <span class="s">'.Foo'</span><span class="p">)</span>
</code></pre>
<pre class="highlight ruby"><code><span class="c1"># ruby</span>
<span class="n">start_activity</span> <span class="ss">app_package: </span><span class="s1">'io.appium.android.apis'</span><span class="p">,</span> <span class="ss">app_activity: </span><span class="s1">'.accessibility.AccessibilityNodeProviderActivity'</span>
</code></pre>
<pre class="highlight csharp"><code><span class="c1">// c#
</span><span class="n">driver</span><span class="p">.</span><span class="nf">StartActivity</span><span class="p">(</span><span class="s">"com.example.android.apis"</span><span class="p">,</span> <span class="s">".Foo"</span><span class="p">);</span>
</code></pre>
<pre class="highlight php"><code>// php
$this-&gt;startActivity(array("appPackage" =&gt; "com.example.android.apis",
                            "appActivity" =&gt; ".Foo"));
</code></pre>
<pre class="highlight plaintext"><code>// objective c
[driver startActivity:@"com.example.android.apis" package:@".Foo"];
</code></pre>

<h3 id="打开通知栏-(notifications)">打开通知栏 (Notifications)</h3>

<p>打开下拉通知栏 <em>只能在 Android 上使用</em></p>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">driver</span><span class="o">.</span><span class="na">openNotifications</span><span class="o">();</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="nx">driver</span><span class="p">.</span><span class="nx">openNotifications</span><span class="p">(</span><span class="nx">cb</span><span class="p">);</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="n">driver</span><span class="o">.</span><span class="n">open_notifications</span><span class="p">()</span>
</code></pre>
<pre class="highlight ruby"><code><span class="c1"># ruby</span>
<span class="n">openNotifications</span>
</code></pre>
<pre class="highlight csharp"><code><span class="c1">// c#
</span><span class="n">driver</span><span class="p">.</span><span class="nf">OpenNotifications</span><span class="p">();</span>
</code></pre>
<pre class="highlight php"><code>// php
$this-&gt;openNotifications();
</code></pre>
<pre class="highlight plaintext"><code>// objective c
[driver openNotifications];
</code></pre>

<h3 id="是否已经安装">是否已经安装</h3>

<p>检查应用是否已经安装</p>
<pre class="highlight ruby"><code><span class="c1"># ruby</span>
<span class="n">is_installed?</span> <span class="s2">"com.example.android.apis"</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="n">driver</span><span class="o">.</span><span class="n">is_app_installed</span><span class="p">(</span><span class="s">'com.example.android.apis'</span><span class="p">)</span>
</code></pre>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">driver</span><span class="o">.</span><span class="na">isAppInstalled</span><span class="o">(</span><span class="s">"com.example.android.apis"</span><span class="o">)</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="nx">driver</span><span class="p">.</span><span class="nx">isAppInstalled</span><span class="p">(</span><span class="s2">"com.example.android.apis"</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">isAppInstalled</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">})</span>
</code></pre>
<pre class="highlight php"><code>// php
$this-&gt;isAppInstalled('com.example.android.apis');
</code></pre>
<pre class="highlight csharp"><code><span class="c1">// c#
</span><span class="n">driver</span><span class="p">.</span><span class="nf">IsAppInstalled</span><span class="p">(</span><span class="s">"com.example.android.apis-"</span><span class="p">);</span>
</code></pre>
<pre class="highlight plaintext"><code>// objective c
[driver isAppInstalled:@"com.example.android.apis-"];
</code></pre>

<h3 id="安装应用">安装应用</h3>

<p>安装应用到设备中去</p>
<pre class="highlight ruby"><code><span class="c1"># ruby</span>
<span class="n">install</span> <span class="s1">'path/to/my.apk'</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="n">driver</span><span class="o">.</span><span class="n">install_app</span><span class="p">(</span><span class="s">'path/to/my.apk'</span><span class="p">)</span>
</code></pre>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">driver</span><span class="o">.</span><span class="na">installApp</span><span class="o">(</span><span class="s">"path/to/my.apk"</span><span class="o">)</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="nx">driver</span><span class="p">.</span><span class="nx">installApp</span><span class="p">(</span><span class="s2">"path/to/my.apk"</span><span class="p">)</span>
</code></pre>
<pre class="highlight php"><code>// php
$this-&gt;installApp('path/to/my.apk');
</code></pre>
<pre class="highlight csharp"><code><span class="c1">// c#
</span><span class="n">driver</span><span class="p">.</span><span class="nf">InstallApp</span><span class="p">(</span><span class="s">"path/to/my.apk"</span><span class="p">);</span>
</code></pre>
<pre class="highlight plaintext"><code>// objective c
[driver installAppAtPath:@"path/to/my.apk"];
</code></pre>

<h3 id="删除应用">删除应用</h3>

<p>从设备中删除一个应用</p>
<pre class="highlight ruby"><code><span class="c1"># ruby</span>
<span class="n">remove</span> <span class="s1">'com.example.android.apis'</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="n">driver</span><span class="o">.</span><span class="n">remove_app</span><span class="p">(</span><span class="s">'com.example.android.apis'</span><span class="p">)</span>
</code></pre>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">driver</span><span class="o">.</span><span class="na">removeApp</span><span class="o">(</span><span class="s">"com.example.android.apis"</span><span class="o">)</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="nx">driver</span><span class="p">.</span><span class="nx">removeApp</span><span class="p">(</span><span class="s2">"com.example.android.apis"</span><span class="p">)</span>
</code></pre>
<pre class="highlight php"><code>// php
$this-&gt;removeApp('com.example.android.apis');
</code></pre>
<pre class="highlight csharp"><code><span class="c1">// c#
</span><span class="n">driver</span><span class="p">.</span><span class="nf">RemoveApp</span><span class="p">(</span><span class="s">"com.example.android.apis"</span><span class="p">);</span>
</code></pre>
<pre class="highlight plaintext"><code>// objective c
[driver removeApp:@"com.example.android.apis"];
</code></pre>

<h3 id="摇晃-(shake)">摇晃 (Shake)</h3>

<p>模拟设备摇晃</p>
<pre class="highlight ruby"><code><span class="c1"># ruby</span>
<span class="n">shake</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="n">driver</span><span class="o">.</span><span class="n">shake</span><span class="p">()</span>
</code></pre>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">driver</span><span class="o">.</span><span class="na">shake</span><span class="o">()</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="nx">driver</span><span class="p">.</span><span class="nx">shake</span><span class="p">()</span>
</code></pre>
<pre class="highlight php"><code>// php
$this-&gt;shake();
</code></pre>
<pre class="highlight csharp"><code><span class="c1">// c#
</span><span class="n">driver</span><span class="p">.</span><span class="nf">ShakeDevice</span><span class="p">();</span>
</code></pre>
<pre class="highlight plaintext"><code>// objective c
[driver shakeDevice];
</code></pre>

<h3 id="关闭应用">关闭应用</h3>

<p>关闭应用</p>
<pre class="highlight ruby"><code><span class="c1"># ruby</span>
<span class="n">close_app</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="n">driver</span><span class="o">.</span><span class="n">close_app</span><span class="p">();</span>
</code></pre>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">driver</span><span class="o">.</span><span class="na">closeApp</span><span class="o">()</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="nx">driver</span><span class="p">.</span><span class="nx">closeApp</span><span class="p">()</span>
</code></pre>
<pre class="highlight php"><code>// php
$this-&gt;closeApp();
</code></pre>
<pre class="highlight csharp"><code><span class="c1">// c#
</span><span class="n">driver</span><span class="p">.</span><span class="nf">CloseApp</span><span class="p">();</span>
</code></pre>
<pre class="highlight plaintext"><code>// objective c
[driver closeApp];
</code></pre>

<h3 id="启动-(launch)">启动 (Launch)</h3>

<p>根据服务关键字 (desired capabilities) 启动会话 (session) 。请注意这必须在设定 <code class="prettyprint">autoLaunch=false</code> 关键字时才能生效。这不是用于启动指定的 app/activities ————你可以使用 <code class="prettyprint">start_activity</code> 做到这个效果————这是用来继续进行使用了 <code class="prettyprint">autoLaunch=false</code> 关键字时的初始化 (Launch) 流程的。</p>
<pre class="highlight ruby"><code><span class="c1"># ruby</span>
<span class="n">launch</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="n">driver</span><span class="o">.</span><span class="n">launch_app</span><span class="p">()</span>
</code></pre>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">driver</span><span class="o">.</span><span class="na">launchApp</span><span class="o">()</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="nx">driver</span><span class="p">.</span><span class="nx">launchApp</span><span class="p">()</span>
</code></pre>
<pre class="highlight php"><code>// php
$this-&gt;launchApp();
</code></pre>
<pre class="highlight csharp"><code><span class="c1">// c#
</span><span class="n">driver</span><span class="p">.</span><span class="nf">LaunchApp</span><span class="p">();</span>
</code></pre>
<pre class="highlight plaintext"><code>// objective c
[driver launchApp];
</code></pre>

<h3 id="重置-(reset)">重置 (Reset)</h3>

<p>应用重置</p>

<p>(翻译者注：相当于卸载重装应用) </p>
<pre class="highlight ruby"><code><span class="c1"># ruby</span>
<span class="n">reset</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="n">driver</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</code></pre>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">driver</span><span class="o">.</span><span class="na">resetApp</span><span class="o">()</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="nx">driver</span><span class="p">.</span><span class="nx">resetApp</span><span class="p">()</span>
</code></pre>
<pre class="highlight php"><code>// php
$this-&gt;reset();
</code></pre>
<pre class="highlight csharp"><code><span class="c1">// c#
</span><span class="n">driver</span><span class="p">.</span><span class="nf">ResetApp</span><span class="p">();</span>
</code></pre>
<pre class="highlight plaintext"><code>// objective c
[driver resetApp];
</code></pre>

<h3 id="可用上下文-(context)">可用上下文 (context)</h3>

<p>列出所有的可用上下文</p>

<p>翻译备注：context可以理解为 可进入的窗口 。例如，对于原生应用，可用的context和默认context均为<code class="prettyprint">NATIVE_APP</code>。详情可查看<a href="http://appium.io/slate/en/v1.3.4/?ruby#automating-hybrid-apps">对混合应用进行自动化测试</a></p>
<pre class="highlight ruby"><code><span class="c1"># ruby</span>
<span class="n">context_array</span> <span class="o">=</span> <span class="n">available_contexts</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="n">driver</span><span class="o">.</span><span class="n">contexts</span>
</code></pre>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">driver</span><span class="o">.</span><span class="na">getContextHandles</span><span class="o">()</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="nx">driver</span><span class="p">.</span><span class="nx">contexts</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">contexts</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">})</span>
</code></pre>
<pre class="highlight php"><code>// php
$this-&gt;contexts();
</code></pre>
<pre class="highlight csharp"><code><span class="c1">// c#
</span><span class="n">driver</span><span class="p">.</span><span class="nf">GetContexts</span><span class="p">()</span>
</code></pre>
<pre class="highlight plaintext"><code>// objective c
NSArray *contexts = driver.allContexts;
</code></pre>

<h3 id="当前上下文-(context)">当前上下文 (context)</h3>

<p>列出当前上下文</p>
<pre class="highlight ruby"><code><span class="c1"># ruby</span>
<span class="n">context</span> <span class="o">=</span> <span class="n">current_context</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="n">driver</span><span class="o">.</span><span class="n">current_context</span>
</code></pre>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">driver</span><span class="o">.</span><span class="na">getContext</span><span class="o">()</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="nx">driver</span><span class="p">.</span><span class="nx">currentContext</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">})</span>
</code></pre>
<pre class="highlight php"><code>// php
$this-&gt;context();
</code></pre>
<pre class="highlight csharp"><code><span class="c1">// c#
</span><span class="n">driver</span><span class="p">.</span><span class="nf">GetContext</span><span class="p">()</span>
</code></pre>
<pre class="highlight plaintext"><code>// objective c
NSString *context = driver.context;
</code></pre>

<h3 id="切换到默认的上下文-(context)">切换到默认的上下文 (context)</h3>

<p>将上下文切换到默认上下文</p>
<pre class="highlight ruby"><code><span class="c1"># ruby</span>
<span class="n">switch_to_default_context</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="n">driver</span><span class="o">.</span><span class="n">switch_to</span><span class="o">.</span><span class="n">context</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
</code></pre>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">driver</span><span class="o">.</span><span class="na">context</span><span class="o">();</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="nx">driver</span><span class="p">.</span><span class="nx">context</span><span class="p">()</span>
</code></pre>
<pre class="highlight php"><code>// php
$this-&gt;context(NULL);
</code></pre>
<pre class="highlight csharp"><code><span class="c1">// c#
</span><span class="n">driver</span><span class="p">.</span><span class="nf">SetContext</span><span class="p">();</span>
</code></pre>
<pre class="highlight plaintext"><code>// objective c
[driver setContext:nil];
</code></pre>

<h3 id="应用的字符串-(app-strings)">应用的字符串 (App Strings)</h3>

<p>获取应用的字符串</p>
<pre class="highlight ruby"><code><span class="c1"># ruby</span>
<span class="n">strings</span> <span class="o">=</span> <span class="n">app_strings</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="n">driver</span><span class="o">.</span><span class="n">app_strings</span>
</code></pre>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">driver</span><span class="o">.</span><span class="na">getAppStrings</span><span class="o">();</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="nx">driver</span><span class="p">.</span><span class="nx">getAppStrings</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">appStrings</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">})</span>
</code></pre>
<pre class="highlight php"><code>// php
$this-&gt;appStrings();
$this-&gt;appStrings('ru');
</code></pre>
<pre class="highlight csharp"><code><span class="c1">// c#
</span><span class="n">driver</span><span class="p">.</span><span class="nf">GetAppStrings</span><span class="p">();</span>
</code></pre>
<pre class="highlight plaintext"><code>// objective c
[driver appStrings];
[driver appStringsForLanguage:"@ru"];
</code></pre>

<h3 id="按键事件-(key-event)">按键事件 (Key Event)</h3>

<p>给设备发送一个按键事件</p>
<pre class="highlight ruby"><code><span class="c1"># ruby</span>
<span class="n">key_event</span> <span class="mi">176</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="n">driver</span><span class="o">.</span><span class="n">keyevent</span><span class="p">(</span><span class="mi">176</span><span class="p">)</span>
</code></pre>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">driver</span><span class="o">.</span><span class="na">sendKeyEvent</span><span class="o">(</span><span class="n">AndroidKeyCode</span><span class="o">.</span><span class="na">HOME</span><span class="o">);</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="nx">driver</span><span class="p">.</span><span class="nx">deviceKeyEvent</span><span class="p">(</span><span class="nx">wd</span><span class="p">.</span><span class="nx">SPECIAL_KEYS</span><span class="p">.</span><span class="nx">Home</span><span class="p">)</span>
</code></pre>
<pre class="highlight php"><code>// php
$this-&gt;keyEvent('176');
</code></pre>
<pre class="highlight csharp"><code><span class="c1">// c#
</span><span class="n">driver</span><span class="p">.</span><span class="nf">KeyEvent</span><span class="p">(</span><span class="s">"176"</span><span class="p">);</span>
</code></pre>
<pre class="highlight plaintext"><code>// objective c
NSError *err;
[driver triggerKeyEvent:176 metastate:0 error:&amp;err];
</code></pre>

<h3 id="当前-activity">当前 Activity</h3>

<p>获取当前 activity。只能在 Android 上使用</p>
<pre class="highlight ruby"><code><span class="c1"># ruby</span>
<span class="n">current_activity</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="n">driver</span><span class="o">.</span><span class="n">current_activity</span>
</code></pre>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">driver</span><span class="o">.</span><span class="na">currentActivity</span><span class="o">();</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="nx">driver</span><span class="p">.</span><span class="nx">getCurrentActivity</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">activity</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">})</span>
</code></pre>
<pre class="highlight php"><code>// php
$this-&gt;currentActivity();
</code></pre>
<pre class="highlight csharp"><code><span class="c1">// c#
</span><span class="n">driver</span><span class="p">.</span><span class="nf">GetCurrentActivity</span><span class="p">();</span>
</code></pre>
<pre class="highlight plaintext"><code>// objective c
NSError *err;
[driver currentActivity];
</code></pre>

<h3 id="触摸动作(touchaction)-/-多点触摸动作(multitouchaction)">触摸动作(TouchAction) / 多点触摸动作(MultiTouchAction)</h3>

<p>生成触摸动作的接口。这部分文档很快将会补充更多的内容进来。</p>
<pre class="highlight ruby"><code><span class="c1"># ruby</span>
<span class="n">touch_action</span> <span class="o">=</span> <span class="no">Appium</span><span class="o">::</span><span class="no">TouchAction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">element</span>  <span class="o">=</span> <span class="n">find_element</span> <span class="ss">:name</span><span class="p">,</span> <span class="s1">'Buttons, Various uses of UIButton'</span>
<span class="n">touch_action</span><span class="p">.</span><span class="nf">press</span><span class="p">(</span><span class="ss">element: </span><span class="n">element</span><span class="p">,</span> <span class="ss">x: </span><span class="mi">10</span><span class="p">,</span> <span class="ss">y: </span><span class="mi">10</span><span class="p">).</span><span class="nf">perform</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="n">action</span> <span class="o">=</span> <span class="n">TouchAction</span><span class="p">(</span><span class="n">driver</span><span class="p">)</span>
<span class="n">action</span><span class="o">.</span><span class="n">press</span><span class="p">(</span><span class="n">element</span><span class="o">=</span><span class="n">el</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">release</span><span class="p">()</span><span class="o">.</span><span class="n">perform</span><span class="p">()</span>
</code></pre>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">TouchAction</span> <span class="n">action</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TouchAction</span><span class="o">(</span><span class="n">driver</span><span class="o">)</span>
<span class="o">.</span><span class="na">press</span><span class="o">(</span><span class="n">mapview</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">10</span><span class="o">)</span>
<span class="o">.</span><span class="na">release</span><span class="o">().</span>
<span class="n">perform</span><span class="o">();</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="kd">var</span> <span class="nx">action</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wd</span><span class="p">.</span><span class="nx">TouchAction</span><span class="p">(</span><span class="nx">driver</span><span class="p">);</span>
<span class="nx">action</span>
  <span class="p">.</span><span class="nx">tap</span><span class="p">({</span><span class="na">el</span><span class="p">:</span> <span class="nx">el</span><span class="p">,</span> <span class="na">x</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
  <span class="p">.</span><span class="nx">release</span><span class="p">();</span>
<span class="k">return</span> <span class="nx">action</span><span class="p">.</span><span class="nx">perform</span><span class="p">();</span> <span class="c1">// returns a promise</span>
</code></pre>
<pre class="highlight php"><code>// php
$action = $this-&gt;initiateTouchAction();
               -&gt;press(array('element' =&gt; $el))
               -&gt;release()
               -&gt;perform();

$action1 = $this-&gt;initiateTouchAction();
$action1-&gt;press(array('element' =&gt; $els[0]))
        -&gt;moveTo(array('x' =&gt; 10, 'y' =&gt; 0))
        -&gt;moveTo(array('x' =&gt; 10, 'y' =&gt; -75))
        -&gt;moveTo(array('x' =&gt; 10, 'y' =&gt; -600))
        -&gt;release();

$action2 = $this-&gt;initiateTouchAction();
$action2-&gt;press(array('element' =&gt; $els[1]))
        -&gt;moveTo(array('x' =&gt; 10, 'y' =&gt; 10))
        -&gt;moveTo(array('x' =&gt; 10, 'y' =&gt; -300))
        -&gt;moveTo(array('x' =&gt; 10, 'y' =&gt; -600))
        -&gt;release();

$multiAction = $this-&gt;initiateMultiAction();
$multiAction-&gt;add($action1);
$multiAction-&gt;add($action2);
$multiAction-&gt;perform();
</code></pre>
<pre class="highlight csharp"><code><span class="c1">// c#
</span><span class="n">ITouchAction</span> <span class="n">action</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">TouchAction</span><span class="p">(</span><span class="n">driver</span><span class="p">);</span>
<span class="n">action</span><span class="p">.</span><span class="nf">Press</span><span class="p">(</span><span class="n">el</span><span class="p">,</span> <span class="m">10</span><span class="p">,</span> <span class="m">10</span><span class="p">).</span><span class="nf">Release</span><span class="p">();</span>
<span class="n">action</span><span class="p">.</span><span class="nf">Perform</span> <span class="p">();</span>
</code></pre>

<h3 id="滑动(swipe)">滑动(Swipe)</h3>

<p>模拟用户滑动</p>
<pre class="highlight ruby"><code><span class="c1"># ruby</span>
<span class="n">swipe</span> <span class="ss">start_x: </span><span class="mi">75</span><span class="p">,</span> <span class="ss">start_y: </span><span class="mi">500</span><span class="p">,</span> <span class="ss">end_x: </span><span class="mi">75</span><span class="p">,</span> <span class="ss">end_y: </span><span class="mi">0</span><span class="p">,</span> <span class="ss">duration: </span><span class="mi">0</span><span class="o">.</span><span class="mi">8</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="n">driver</span><span class="o">.</span><span class="n">swipe</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">75</span><span class="p">,</span> <span class="n">starty</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">endx</span><span class="o">=</span><span class="mi">75</span><span class="p">,</span> <span class="n">endy</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">800</span><span class="p">)</span>
</code></pre>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">driver</span><span class="o">.</span><span class="na">swipe</span><span class="o">(</span><span class="mi">75</span><span class="o">,</span> <span class="mi">500</span><span class="o">,</span> <span class="mi">75</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mf">0.8</span><span class="o">)</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="kd">function</span> <span class="nx">swipe</span><span class="p">(</span><span class="nx">opts</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">action</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wd</span><span class="p">.</span><span class="nx">TouchAction</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="nx">action</span>
    <span class="p">.</span><span class="nx">press</span><span class="p">({</span><span class="na">x</span><span class="p">:</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">startX</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">startY</span><span class="p">})</span>
    <span class="p">.</span><span class="nx">wait</span><span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">duration</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">moveTo</span><span class="p">({</span><span class="na">x</span><span class="p">:</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">endX</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">endY</span><span class="p">})</span>
    <span class="p">.</span><span class="nx">release</span><span class="p">();</span>
  <span class="k">return</span> <span class="nx">action</span><span class="p">.</span><span class="nx">perform</span><span class="p">();</span>
<span class="p">}</span>
<span class="nx">wd</span><span class="p">.</span><span class="nx">addPromiseChainMethod</span><span class="p">(</span><span class="s1">'swipe'</span><span class="p">,</span> <span class="nx">swipe</span><span class="p">);</span>
<span class="c1">// ...</span>
<span class="k">return</span> <span class="nx">driver</span><span class="p">.</span><span class="nx">swipe</span><span class="p">({</span> <span class="na">startX</span><span class="p">:</span> <span class="mi">75</span><span class="p">,</span> <span class="na">startY</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
  <span class="na">endX</span><span class="p">:</span> <span class="mi">75</span><span class="p">,</span>  <span class="na">endY</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">duration</span><span class="p">:</span> <span class="mi">800</span> <span class="p">});</span>
</code></pre>
<pre class="highlight php"><code>// php
$this-&gt;swipe(75, 500, 75, 0, 800);
</code></pre>
<pre class="highlight csharp"><code><span class="c1">// c#
</span><span class="n">todo</span><span class="p">:</span> <span class="n">c</span><span class="err">#</span>
</code></pre>

<h3 id="捏-(pinch)">捏 (Pinch)</h3>

<p>捏屏幕 (双指往内移动来缩小屏幕) </p>
<pre class="highlight ruby"><code><span class="c1"># ruby</span>
<span class="n">pinch</span> <span class="mi">75</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="n">driver</span><span class="o">.</span><span class="n">pinch</span><span class="p">(</span><span class="n">element</span><span class="o">=</span><span class="n">el</span><span class="p">)</span>
</code></pre>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">driver</span><span class="o">.</span><span class="na">pinch</span><span class="o">(</span><span class="n">element</span><span class="o">);</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="kd">function</span> <span class="nx">pinch</span><span class="p">(</span><span class="nx">el</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">Q</span><span class="p">.</span><span class="nx">all</span><span class="p">([</span>
    <span class="nx">el</span><span class="p">.</span><span class="nx">getSize</span><span class="p">(),</span>
    <span class="nx">el</span><span class="p">.</span><span class="nx">getLocation</span><span class="p">(),</span>
  <span class="p">]).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">size</span> <span class="o">=</span> <span class="nx">res</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="kd">var</span> <span class="nx">loc</span> <span class="o">=</span> <span class="nx">res</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="kd">var</span> <span class="nx">center</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">x</span><span class="p">:</span> <span class="nx">loc</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">size</span><span class="p">.</span><span class="nx">width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>
      <span class="na">y</span><span class="p">:</span> <span class="nx">loc</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">size</span><span class="p">.</span><span class="nx">height</span> <span class="o">/</span> <span class="mi">2</span>
    <span class="p">};</span>
    <span class="kd">var</span> <span class="nx">a1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wd</span><span class="p">.</span><span class="nx">TouchAction</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="nx">a1</span><span class="p">.</span><span class="nx">press</span><span class="p">({</span><span class="na">el</span><span class="p">:</span> <span class="nx">el</span><span class="p">,</span> <span class="na">x</span><span class="p">:</span> <span class="nx">center</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span><span class="nx">center</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="mi">100</span><span class="p">}).</span><span class="nx">moveTo</span><span class="p">({</span><span class="na">el</span><span class="p">:</span> <span class="nx">el</span><span class="p">}).</span><span class="nx">release</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">a2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wd</span><span class="p">.</span><span class="nx">TouchAction</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="nx">a2</span><span class="p">.</span><span class="nx">press</span><span class="p">({</span><span class="na">el</span><span class="p">:</span> <span class="nx">el</span><span class="p">,</span> <span class="na">x</span><span class="p">:</span> <span class="nx">center</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="nx">center</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="mi">100</span><span class="p">}).</span><span class="nx">moveTo</span><span class="p">({</span><span class="na">el</span><span class="p">:</span> <span class="nx">el</span><span class="p">}).</span><span class="nx">release</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">m</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wd</span><span class="p">.</span><span class="nx">MultiAction</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="nx">m</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">a1</span><span class="p">,</span> <span class="nx">a2</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">m</span><span class="p">.</span><span class="nx">perform</span><span class="p">();</span>
  <span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
<span class="p">};</span>
<span class="nx">wd</span><span class="p">.</span><span class="nx">addPromiseChainMethod</span><span class="p">(</span><span class="s1">'pinch'</span><span class="p">,</span> <span class="nx">pinch</span><span class="p">);</span>
<span class="nx">wd</span><span class="p">.</span><span class="nx">addElementPromiseChainMethod</span><span class="p">(</span><span class="s1">'pinch'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">browser</span><span class="p">.</span><span class="nx">pinch</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="p">});</span>
<span class="c1">// ...</span>
<span class="k">return</span> <span class="nx">driver</span><span class="p">.</span><span class="nx">pinch</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>
<span class="c1">// ...</span>
<span class="k">return</span> <span class="nx">el</span><span class="p">.</span><span class="nx">pinch</span><span class="p">();</span>
</code></pre>
<pre class="highlight php"><code>$this-&gt;pinch($el);
</code></pre>
<pre class="highlight csharp"><code><span class="c1">// c#
</span><span class="n">driver</span><span class="p">.</span><span class="nf">Pinch</span><span class="p">(</span><span class="m">25</span><span class="p">,</span> <span class="m">25</span><span class="p">)</span>
</code></pre>

<h3 id="放大-(zoom)">放大 (Zoom)</h3>

<p>放大屏幕 (双指往外移动来放大屏幕) </p>
<pre class="highlight ruby"><code><span class="c1"># ruby</span>
<span class="n">zoom</span> <span class="mi">200</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="n">driver</span><span class="o">.</span><span class="n">zoom</span><span class="p">(</span><span class="n">element</span><span class="o">=</span><span class="n">el</span><span class="p">)</span>
</code></pre>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">driver</span><span class="o">.</span><span class="na">zoom</span><span class="o">(</span><span class="n">element</span><span class="o">);</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="kd">function</span> <span class="nx">zoom</span><span class="p">(</span><span class="nx">el</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">Q</span><span class="p">.</span><span class="nx">all</span><span class="p">([</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">getWindowSize</span><span class="p">(),</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">getLocation</span><span class="p">(</span><span class="nx">el</span><span class="p">),</span>
  <span class="p">]).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">size</span> <span class="o">=</span> <span class="nx">res</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="kd">var</span> <span class="nx">loc</span> <span class="o">=</span> <span class="nx">res</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="kd">var</span> <span class="nx">center</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">x</span><span class="p">:</span> <span class="nx">loc</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">size</span><span class="p">.</span><span class="nx">width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>
      <span class="na">y</span><span class="p">:</span> <span class="nx">loc</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">size</span><span class="p">.</span><span class="nx">height</span> <span class="o">/</span> <span class="mi">2</span>
    <span class="p">};</span>
    <span class="kd">var</span> <span class="nx">a1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wd</span><span class="p">.</span><span class="nx">TouchAction</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="nx">a1</span><span class="p">.</span><span class="nx">press</span><span class="p">({</span><span class="na">el</span><span class="p">:</span> <span class="nx">el</span><span class="p">}).</span><span class="nx">moveTo</span><span class="p">({</span><span class="na">el</span><span class="p">:</span> <span class="nx">el</span><span class="p">,</span> <span class="na">x</span><span class="p">:</span> <span class="nx">center</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="nx">center</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="mi">100</span><span class="p">}).</span><span class="nx">release</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">a2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wd</span><span class="p">.</span><span class="nx">TouchAction</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="nx">a2</span><span class="p">.</span><span class="nx">press</span><span class="p">({</span><span class="na">el</span><span class="p">:</span> <span class="nx">el</span><span class="p">}).</span><span class="nx">moveTo</span><span class="p">({</span><span class="na">el</span><span class="p">:</span> <span class="nx">el</span><span class="p">,</span> <span class="na">x</span><span class="p">:</span> <span class="nx">center</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="nx">center</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="mi">100</span><span class="p">}).</span><span class="nx">release</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">m</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wd</span><span class="p">.</span><span class="nx">MultiAction</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="nx">m</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">a1</span><span class="p">,</span> <span class="nx">a2</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">m</span><span class="p">.</span><span class="nx">perform</span><span class="p">();</span>
  <span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
<span class="p">};</span>
<span class="nx">wd</span><span class="p">.</span><span class="nx">addPromiseChainMethod</span><span class="p">(</span><span class="s1">'zoom'</span><span class="p">,</span> <span class="nx">zoom</span><span class="p">);</span>
<span class="nx">wd</span><span class="p">.</span><span class="nx">addElementPromiseChainMethod</span><span class="p">(</span><span class="s1">'zoom'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">browser</span><span class="p">.</span><span class="nx">zoom</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="p">});</span>
<span class="c1">// ...</span>
<span class="k">return</span> <span class="nx">driver</span><span class="p">.</span><span class="nx">zoom</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>
<span class="c1">// ...</span>
<span class="k">return</span> <span class="nx">el</span><span class="p">.</span><span class="nx">zoom</span><span class="p">();</span>
</code></pre>
<pre class="highlight php"><code>// php
$this-&gt;zoom($el);
</code></pre>
<pre class="highlight csharp"><code><span class="c1">// c#
</span><span class="n">driver</span><span class="p">.</span><span class="nf">Zoom</span><span class="p">(</span><span class="m">100</span><span class="p">,</span> <span class="m">200</span><span class="p">);</span>
</code></pre>

<h3 id="滑动到-(scroll-to)">滑动到 (Scroll To)</h3>

<p>滑动到某个元素。</p>
<pre class="highlight ruby"><code><span class="c1"># ruby</span>
<span class="n">element</span> <span class="o">=</span> <span class="n">find_element</span> <span class="ss">:name</span><span class="p">,</span> <span class="s1">'Element Name'</span>
<span class="n">execute_script</span> <span class="s2">"mobile: scrollTo"</span><span class="p">,</span> <span class="ss">:element</span> <span class="o">=&gt;</span> <span class="n">element</span><span class="p">.</span><span class="nf">ref</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="n">todo</span><span class="p">:</span> <span class="n">python</span>
</code></pre>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">WebElement</span> <span class="n">element</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="na">findElement</span><span class="o">(</span><span class="n">By</span><span class="o">.</span><span class="na">name</span><span class="o">(</span><span class="s">"Element Name"</span><span class="o">));</span>
<span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">arguments</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;();</span>
<span class="n">arguments</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"element"</span><span class="o">,</span> <span class="n">element</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
<span class="o">(</span><span class="n">JavascriptExecutor</span><span class="o">)</span><span class="n">driver</span><span class="o">.</span><span class="na">executeScript</span><span class="o">(</span><span class="s">"mobile: scrollTo"</span><span class="o">,</span> <span class="n">arguments</span><span class="o">);</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="k">return</span> <span class="nx">driver</span><span class="p">.</span><span class="nx">elementByName</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">el</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">driver</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="s1">'mobile: scrollTo'</span><span class="p">,</span> <span class="p">{</span><span class="na">element</span><span class="p">:</span> <span class="nx">el</span><span class="p">.</span><span class="nx">value</span><span class="p">});</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight php"><code>// php
$els = $this-&gt;elements($this-&gt;using('class name')-&gt;value('android.widget.TextView'));
$this-&gt;scroll($els[count($els) - 1], $els[0]);
</code></pre>
<pre class="highlight csharp"><code><span class="c1">// c#
</span><span class="n">todo</span><span class="p">:</span> <span class="n">csharp</span>
</code></pre>

<h3 id="拉出文件-(pull-file)">拉出文件 (Pull File)</h3>

<p>从设备中拉出文件</p>
<pre class="highlight ruby"><code><span class="c1"># ruby</span>
<span class="n">pull_file</span> <span class="s1">'Library/AddressBook/AddressBook.sqlitedb'</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="n">driver</span><span class="o">.</span><span class="n">pull_file</span><span class="p">(</span><span class="s">'Library/AddressBook/AddressBook.sqlitedb'</span><span class="p">)</span>
</code></pre>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">driver</span><span class="o">.</span><span class="na">pullFile</span><span class="o">(</span><span class="s">"Library/AddressBook/AddressBook.sqlitedb"</span><span class="o">);</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="nx">driver</span><span class="p">.</span><span class="nx">pullFile</span><span class="p">(</span><span class="s2">"Library/AddressBook/AddressBook.sqlitedb"</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">base64File</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*...*/</span> <span class="p">})</span>
</code></pre>
<pre class="highlight php"><code>// php
$this-&gt;pullFile('Library/AddressBook/AddressBook.sqlitedb');
</code></pre>
<pre class="highlight csharp"><code><span class="c1">// c#
</span><span class="n">driver</span><span class="p">.</span><span class="nf">PullFile</span><span class="p">(</span><span class="s">"Library/AddressBook/AddressBook.sqlitedb"</span><span class="p">);</span>
</code></pre>

<h3 id="推送文件(push-file)">推送文件(Push file)</h3>

<p>推送文件到设备中去</p>
<pre class="highlight ruby"><code><span class="c1"># ruby</span>
<span class="n">data</span> <span class="o">=</span> <span class="s2">"some data for the file"</span>
<span class="n">path</span> <span class="o">=</span> <span class="s2">"/data/local/tmp/file.txt"</span>
<span class="n">push_file</span> <span class="n">path</span><span class="p">,</span> <span class="n">data</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="n">data</span> <span class="o">=</span> <span class="s">"some data for the file"</span>
<span class="n">path</span> <span class="o">=</span> <span class="s">"/data/local/tmp/file.txt"</span>
<span class="n">driver</span><span class="o">.</span><span class="n">push_file</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'base64'</span><span class="p">))</span>
</code></pre>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="kt">byte</span><span class="o">[]</span> <span class="n">data</span> <span class="o">=</span> <span class="n">Base64</span><span class="o">.</span><span class="na">encodeBase64</span><span class="o">(</span><span class="s">"some data for the file"</span><span class="o">.</span><span class="na">getBytes</span><span class="o">());</span>
<span class="n">String</span> <span class="n">path</span> <span class="o">=</span> <span class="s">"/data/local/tmp/file.txt"</span><span class="o">;</span>
<span class="n">driver</span><span class="o">.</span><span class="na">pushFile</span><span class="o">(</span><span class="n">path</span><span class="o">,</span> <span class="n">data</span><span class="o">)</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="nx">driver</span><span class="p">.</span><span class="nx">pushFile</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
</code></pre>
<pre class="highlight php"><code>// php
$path = 'data/local/tmp/test_push_file.txt';
$data = 'This is the contents of the file to push to the device.';
$this-&gt;pushFile($path, base64_encode($data));
</code></pre>
<pre class="highlight csharp"><code><span class="c1">// c#
</span><span class="n">driver</span><span class="p">.</span><span class="nf">PushFile</span><span class="p">(</span><span class="s">"/data/local/tmp/file.txt"</span><span class="p">,</span> <span class="s">"some data for the file"</span><span class="p">);</span>
</code></pre>

<h3 id="设置">设置</h3>

<p>从这里你可以获取/设置 appium 的服务器设置。
想知道它如何工作，以及它支持哪些设置，请查看<a href="#settings.cn.md">关于设置的文档</a></p>
<pre class="highlight ruby"><code><span class="n">current_settings</span> <span class="o">=</span> <span class="n">get_settings</span>
<span class="n">update_settings</span> <span class="ss">someSetting: </span><span class="kp">true</span>
</code></pre>
<pre class="highlight python"><code><span class="n">current_settings</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">get_settings</span><span class="p">()</span>
<span class="n">driver</span><span class="o">.</span><span class="n">update_settings</span><span class="p">({</span><span class="s">"someSetting"</span><span class="p">:</span> <span class="n">true</span><span class="p">})</span>
</code></pre>
<pre class="highlight java"><code><span class="n">JsonObject</span> <span class="n">settings</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="na">getSettings</span><span class="o">()</span>
<span class="c1">// java-client doesn't support setting arbitrary settings, just settings which are already provided by appium.</span>
<span class="c1">// So for the 'ignoreUnimportantViews' setting, the following method exists:</span>
<span class="n">driver</span><span class="o">.</span><span class="na">ignoreUnimportantViews</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">settings</span> <span class="o">=</span> <span class="nx">driver</span><span class="p">.</span><span class="nx">settings</span><span class="p">();</span>
<span class="nx">browser</span><span class="p">.</span><span class="nx">updateSettings</span><span class="p">({</span><span class="s1">'someSetting'</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span>
</code></pre>
<pre class="highlight php"><code>$settings = $this-&gt;getSettings();
$this-&gt;updateSettings(array('cyberdelia' =&gt; "open"));
</code></pre>
<pre class="highlight csharp"><code><span class="n">Dictionary</span><span class="p">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">Object</span><span class="p">&gt;</span><span class="n">settings</span> <span class="p">=</span> <span class="n">driver</span><span class="p">.</span><span class="nf">GetSettings</span><span class="p">();</span>
<span class="c1">// dotnet-driver doesn't support setting arbitrary settings, just settings which are already provided by appium.
// So for the 'ignoreUnimportantViews' setting, the following method exists:
</span><span class="n">driver</span><span class="p">.</span><span class="nf">IgnoreUnimportantViews</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
</code></pre>

<h3 id="appium-桌面应用">Appium 桌面应用</h3>

<p>Appium 的桌面应用支持 OS X 和 Windows.</p>

<ul>
<li><a href="https://bitbucket.org/appium/appium.app/downloads/">Appium.app for OS X</a></li>
<li><a href="https://bitbucket.org/appium/appium.app/downloads/">Appium.exe for Windows</a></li>
</ul>

<h2 id="appium-服务关键字">
<span id="caps.cn.md"></span>Appium 服务关键字</h2>

<p class="expand_table"></p>

<table>
<thead>
<tr>
<th>关键字</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="prettyprint">automationName</code></td>
<td>你想使用的自动化测试引擎</td>
<td>
<code class="prettyprint">Appium</code> (默认) 或 <code class="prettyprint">Selendroid</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">platformName</code></td>
<td>你要测试的手机操作系统</td>
<td>
<code class="prettyprint">iOS</code>, <code class="prettyprint">Android</code>, 或 <code class="prettyprint">FirefoxOS</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">platformVersion</code></td>
<td>手机操作系统版本</td>
<td>例如： <code class="prettyprint">7.1</code>, <code class="prettyprint">4.4</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">deviceName</code></td>
<td>使用的手机类型或模拟器类型</td>
<td>
<code class="prettyprint">iPhone Simulator</code>, <code class="prettyprint">iPad Simulator</code>, <code class="prettyprint">iPhone Retina 4-inch</code>, <code class="prettyprint">Android Emulator</code>, <code class="prettyprint">Galaxy S4</code>, 等。在 iOS 上，这个关键字的值必须是使用 <code class="prettyprint">instruments -s devices</code> 得到的可使用的设备名称之一。在 Android 上，这个关键字目前不起作用。</td>
</tr>
<tr>
<td><code class="prettyprint">app</code></td>
<td>
<code class="prettyprint">.ipa</code> or <code class="prettyprint">.apk</code>文件所在的本地绝对路径或者远程路径,也可以是一个包括两者之一的<code class="prettyprint">.zip</code>。 Appium会先尝试安装路径对应的应用在适当的真机或模拟器上。针对Android系统，如果你指定<code class="prettyprint">app-package</code>和<code class="prettyprint">app-activity</code>(具体见下面)的话，那么就可以不指定<code class="prettyprint">app</code>。 <strong>会与 <code class="prettyprint">browserName</code> 冲突</strong>
</td>
<td>比如<code class="prettyprint">/abs/path/to/my.apk</code>或<code class="prettyprint">http://myapp.com/app.ipa</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">browserName</code></td>
<td>需要进行自动化测试的手机 web 浏览器名称。如果是对应用进行自动化测试，这个关键字的值应为空。</td>
<td>iOS 系统上可以用 'Safari’ ，Android 系统上可以用 ‘Chrome’, ‘Chromium’, 或 ‘Browser'。</td>
</tr>
<tr>
<td><code class="prettyprint">newCommandTimeout</code></td>
<td>设置命令超时时间，单位：秒。达到超时时间仍未接收到新的命令时 Appium 会假设客户端退出然后自动结束会话。</td>
<td>比如 <code class="prettyprint">60</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">autoLaunch</code></td>
<td>Appium是否需要自动安装和启动应用。默认值<code class="prettyprint">true</code>
</td>
<td>
<code class="prettyprint">true</code>, <code class="prettyprint">false</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">language</code></td>
<td>(Sim/Emu-only) 设定模拟器 ( simulator / emulator ) 的语言。</td>
<td>如： <code class="prettyprint">fr</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">locale</code></td>
<td>(Sim/Emu-only) 设定模拟器 ( simulator / emulator ) 的区域设置。</td>
<td>如： <code class="prettyprint">fr_CA</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">udid</code></td>
<td>连接的物理设备的唯一设备标识</td>
<td>如： <code class="prettyprint">1ae203187fc012g</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">orientation</code></td>
<td>(Sim/Emu-only) 在一个设定的方向模式中开始测试</td>
<td>
<code class="prettyprint">LANDSCAPE</code> (横向)  或 <code class="prettyprint">PORTRAIT</code> (纵向)</td>
</tr>
<tr>
<td><code class="prettyprint">autoWebview</code></td>
<td>直接转换到 WebView 上下文。 默认值 <code class="prettyprint">false</code>、</td>
<td>
<code class="prettyprint">true</code>, <code class="prettyprint">false</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">noReset</code></td>
<td>不要在会话前重置应用状态。默认值<code class="prettyprint">false</code>。</td>
<td>
<code class="prettyprint">true</code>, <code class="prettyprint">false</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">fullReset</code></td>
<td>(iOS) 删除整个模拟器目录。(Android) 通过卸载——而不是清空数据——来重置应用状态。在 Android 上，这也会在会话结束后自动清除被测应用。默认值 <code class="prettyprint">false</code>
</td>
<td>
<code class="prettyprint">true</code>, <code class="prettyprint">false</code>
</td>
</tr>
</tbody>
</table>

<h3 id="android特有">Android特有</h3>

<p class="expand_table"></p>

<table>
<thead>
<tr>
<th>关键字</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="prettyprint">appActivity</code></td>
<td>你要从你的应用包中启动的 Android Activity 名称。它通常需要在前面添加 <code class="prettyprint">.</code>  (如：使用<code class="prettyprint">.MainActivity</code> 而不是 <code class="prettyprint">MainActivity</code>)</td>
<td>
<code class="prettyprint">MainActivity</code>, <code class="prettyprint">.Settings</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">appPackage</code></td>
<td>你想运行的Android应用的包名</td>
<td>比如<code class="prettyprint">com.example.android.myApp</code>, <code class="prettyprint">com.android.settings</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">appWaitActivity</code></td>
<td>你想要等待启动的 Android Activity 名称</td>
<td><code class="prettyprint">SplashActivity</code></td>
</tr>
<tr>
<td><code class="prettyprint">deviceReadyTimeout</code></td>
<td>设置等待一个模拟器或真机准备就绪的超时时间</td>
<td><code class="prettyprint">5</code></td>
</tr>
<tr>
<td><code class="prettyprint">androidCoverage</code></td>
<td>用于执行测试的 instrumentation 类。作为命令 <code class="prettyprint">adb shell am instrument -e coverage true -w</code> 的 <code class="prettyprint">-w</code> 参数。</td>
<td><code class="prettyprint">com.my.Pkg/com.my.Pkg.instrumentation.MyInstrumentation</code></td>
</tr>
<tr>
<td><code class="prettyprint">enablePerformanceLogging</code></td>
<td>(仅适用于 Chrome 和 webview) 开启 Chromedriver 的性能日志。 (默认 <code class="prettyprint">false</code>)</td>
<td>
<code class="prettyprint">true</code>, <code class="prettyprint">false</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">androidDeviceReadyTimeout</code></td>
<td>等待设备在启动应用后准备就绪的超时时间。以秒为单位。</td>
<td>如 <code class="prettyprint">30</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">androidDeviceSocket</code></td>
<td>开发工具的 socket 名称。只有在被测应用是一个使用 Chromium 内核的浏览器时需要。 socket 会被浏览器打开，然后 Chromedriver 把它作为开发者工具来进行连接。</td>
<td>如 <code class="prettyprint">chrome_devtools_remote</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">avd</code></td>
<td>需要启动的 AVD  (安卓虚拟设备) 名称。</td>
<td>如 <code class="prettyprint">api19</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">avdLaunchTimeout</code></td>
<td>以毫秒为单位，等待 AVD 启动并连接到 ADB 的超时时间。(默认值 <code class="prettyprint">120000</code>)</td>
<td><code class="prettyprint">300000</code></td>
</tr>
<tr>
<td><code class="prettyprint">avdReadyTimeout</code></td>
<td>以毫秒为单位，等待 AVD 完成启动动画的超时时间。(默认值 <code class="prettyprint">120000</code>)</td>
<td><code class="prettyprint">300000</code></td>
</tr>
<tr>
<td><code class="prettyprint">avdArgs</code></td>
<td>启动 AVD 时需要加入的额外的参数。</td>
<td>如 <code class="prettyprint">-netfast</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">useKeystore</code></td>
<td>使用一个自定义的 keystore 来对 apk 进行重签名。默认值 <code class="prettyprint">false</code>
</td>
<td>
<code class="prettyprint">true</code> or <code class="prettyprint">false</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">keystorePath</code></td>
<td>自定义 keystore 的路径。默认： ~/.android/debug.keystore</td>
<td>如 <code class="prettyprint">/path/to.keystore</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">keystorePassword</code></td>
<td>自定义 keystore 的密码。</td>
<td>如 <code class="prettyprint">foo</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">keyAlias</code></td>
<td>key 的别名</td>
<td>如 <code class="prettyprint">androiddebugkey</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">keyPassword</code></td>
<td>key 的密码</td>
<td>如 <code class="prettyprint">foo</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">chromedriverExecutable</code></td>
<td>webdriver 可执行文件的绝对路径 (如果 Chromium 核心提供了对应的 webdriver， 应该用它代替 Appium 自带的 webdriver)</td>
<td><code class="prettyprint">/abs/path/to/webdriver</code></td>
</tr>
<tr>
<td><code class="prettyprint">autoWebviewTimeout</code></td>
<td>以毫秒为单位，等待 Webview 上下文激活的时间。默认值 <code class="prettyprint">2000</code>
</td>
<td>如 <code class="prettyprint">4</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">intentAction</code></td>
<td>用于启动 activity 的 intent action。 (默认值 <code class="prettyprint">android.intent.action.MAIN</code>)</td>
<td>如 <code class="prettyprint">android.intent.action.MAIN</code>, <code class="prettyprint">android.intent.action.VIEW</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">intentCategory</code></td>
<td>用于启动 activity 的 intent category。 (默认值 <code class="prettyprint">android.intent.category.LAUNCHER</code>)</td>
<td>如 <code class="prettyprint">android.intent.category.LAUNCHER</code>, <code class="prettyprint">android.intent.category.APP_CONTACTS</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">intentFlags</code></td>
<td>用于启动 activity 的标识 ( flags )  (默认值 <code class="prettyprint">0x10200000</code>)</td>
<td>如 <code class="prettyprint">0x10200000</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">optionalIntentArguments</code></td>
<td>用于启动 activity 的额外 intent 参数。请查看 <a href="http://developer.android.com/tools/help/adb.html#IntentSpec">Intent 参数</a>
</td>
<td>如 <code class="prettyprint">--esn &lt;EXTRA_KEY&gt;</code>, <code class="prettyprint">--ez &lt;EXTRA_KEY&gt; &lt;EXTRA_BOOLEAN_VALUE&gt;</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">stopAppOnReset</code></td>
<td>在使用 adb 启动应用前停止被测应用的进程 ( process ) 。如果被测应用是被另一个应用创建的，当这个参数被设定为 false 时，允许另一个应用的进程在使用 adb 启动被测应用时继续存活。默认值 <code class="prettyprint">true</code>
</td>
<td>
<code class="prettyprint">true</code> 或 <code class="prettyprint">false</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">unicodeKeyboard</code></td>
<td>使用 Unicode 输入法。默认值 <code class="prettyprint">false</code>
</td>
<td>
<code class="prettyprint">true</code> 或 <code class="prettyprint">false</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">resetKeyboard</code></td>
<td>在设定了 <code class="prettyprint">unicodeKeyboard</code> 关键字的 Unicode 测试结束后，重置输入法到原有状态。如果单独使用，将会被忽略。默认值 <code class="prettyprint">false</code>
</td>
<td>
<code class="prettyprint">true</code> 或 <code class="prettyprint">false</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">noSign</code></td>
<td>跳过检查和对应用进行 debug 签名的步骤。只能在使用 UiAutomator 时使用，使用 selendroid 是不行。默认值 <code class="prettyprint">false</code>
</td>
<td>
<code class="prettyprint">true</code> 或 <code class="prettyprint">false</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">ignoreUnimportantViews</code></td>
<td>调用 uiautomator 的函数 <code class="prettyprint">setCompressedLayoutHierarchy()</code>。由于 Accessibility 命令在忽略部分元素的情况下执行速度会加快，这个关键字能加快测试执行的速度。被忽略的元素将不能够被找到，因此这个关键字同时也被实现成可以随时改变的 *设置 ( settings ) * 。默认值 <code class="prettyprint">false</code>
</td>
<td>
<code class="prettyprint">true</code> 或 <code class="prettyprint">false</code>
</td>
</tr>
</tbody>
</table>

<h3 id="ios特有">iOS特有</h3>

<p class="expand_table"></p>

<table>
<thead>
<tr>
<th>关键字</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="prettyprint">calendarFormat</code></td>
<td>(Sim-only) 为iOS的模拟器设置日历格式</td>
<td>如 <code class="prettyprint">gregorian</code> (公历)</td>
</tr>
<tr>
<td><code class="prettyprint">bundleId</code></td>
<td>被测应用的 bundle ID 。用于在真实设备中启动测试，也用于使用其他需要 bundle ID 的关键字启动测试。在使用 bundle ID 在真实设备上执行测试时，你可以不提供 <code class="prettyprint">app</code> 关键字，但你必须提供 <code class="prettyprint">udid</code> 。</td>
<td>如 <code class="prettyprint">io.appium.TestApp</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">udid</code></td>
<td>连接的真实设备的唯一设备编号 ( Unique device identifier )</td>
<td>如 <code class="prettyprint">1ae203187fc012g</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">launchTimeout</code></td>
<td>以毫秒为单位，在 Appium 运行失败之前设置一个等待 instruments 的时间</td>
<td>比如： <code class="prettyprint">20000</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">locationServicesEnabled</code></td>
<td>(Sim-only) 强制打开或关闭定位服务。默认值是保持当前模拟器的设定</td>
<td>
<code class="prettyprint">true</code> 或 <code class="prettyprint">false</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">locationServicesAuthorized</code></td>
<td>(Sim-only) 通过修改 plist 文件设定是否允许应用使用定位服务，从而避免定位服务的警告出现。默认值是保持当前模拟器的设定。请注意在使用这个关键字时，你同时需要使用 <code class="prettyprint">bundleId</code> 关键字来发送你的应用的 bundle ID。</td>
<td>
<code class="prettyprint">true</code> 或者 <code class="prettyprint">false</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">autoAcceptAlerts</code></td>
<td>当 iOS 的个人信息访问警告 (如 位置、联系人、图片) 出现时，自动选择接受( Accept )。默认值 <code class="prettyprint">false</code>。</td>
<td>
<code class="prettyprint">true</code> 或者 <code class="prettyprint">false</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">autoDismissAlerts</code></td>
<td>当 iOS 的个人信息访问警告 (如 位置、联系人、图片) 出现时，自动选择不接受( Dismiss )。默认值 <code class="prettyprint">false</code>。</td>
<td>
<code class="prettyprint">true</code> 或者 <code class="prettyprint">false</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">nativeInstrumentsLib</code></td>
<td>使用原生 intruments 库 (即关闭 instruments-without-delay )</td>
<td>
<code class="prettyprint">true</code> 或者 <code class="prettyprint">false</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">nativeWebTap</code></td>
<td>(Sim-only) 在Safari中允许“真实的"，非基于 javascript 的 web 点击 (tap) 。 默认值： <code class="prettyprint">false</code>。注意：取决于 viewport 大小/比例， 点击操作不一定能精确地点中对应的元素。</td>
<td>
<code class="prettyprint">true</code> 或者 <code class="prettyprint">false</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">safariInitialUrl</code></td>
<td>(Sim-only) (&gt;= 8.1) 初始化 safari 的时使用的地址。默认是一个本地的欢迎页面</td>
<td>如 <code class="prettyprint">https://www.github.com</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">safariAllowPopups</code></td>
<td>(Sim-only) 允许 javascript 在 Safari 中创建新窗口。默认保持模拟器当前设置。</td>
<td>
<code class="prettyprint">true</code> 或者 <code class="prettyprint">false</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">safariIgnoreFraudWarning</code></td>
<td>(Sim-only) 阻止 Safari 显示此网站可能存在风险的警告。默认保持浏览器当前设置。</td>
<td>
<code class="prettyprint">true</code> 或者 <code class="prettyprint">false</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">safariOpenLinksInBackground</code></td>
<td>(Sim-only) Safari 是否允许链接在新窗口打开。默认保持浏览器当前设置。</td>
<td>
<code class="prettyprint">true</code> 或者 <code class="prettyprint">false</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">keepKeyChains</code></td>
<td>(Sim-only) 当 Appium 会话开始/结束时是否保留存放密码存放记录 (keychains)  (库(Library)/钥匙串(Keychains))</td>
<td>
<code class="prettyprint">true</code> 或者 <code class="prettyprint">false</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">localizableStringsDir</code></td>
<td>从哪里查找本地化字符串。默认值 <code class="prettyprint">en.lproj</code>
</td>
<td><code class="prettyprint">en.lproj</code></td>
</tr>
<tr>
<td><code class="prettyprint">processArguments</code></td>
<td>通过 instruments 传递到 AUT 的参数</td>
<td>如 <code class="prettyprint">-myflag</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">interKeyDelay</code></td>
<td>以毫秒为单位，按下每一个按键之间的延迟时间。</td>
<td>如 <code class="prettyprint">100</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">showIOSLog</code></td>
<td>是否在 Appium 的日志中显示设备的日志。默认值 <code class="prettyprint">false</code>
</td>
<td>
<code class="prettyprint">true</code> 或者 <code class="prettyprint">false</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">sendKeyStrategy</code></td>
<td>输入文字到文字框的策略。模拟器默认值：<code class="prettyprint">oneByOne</code> (一个接着一个) 。真实设备默认值：<code class="prettyprint">grouped</code> (分组输入)</td>
<td>
<code class="prettyprint">oneByOne</code>, <code class="prettyprint">grouped</code> 或 <code class="prettyprint">setValue</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">screenshotWaitTimeout</code></td>
<td>以秒为单位，生成屏幕截图的最长等待时间。默认值： 10。</td>
<td>如 <code class="prettyprint">5</code>
</td>
</tr>
<tr>
<td><code class="prettyprint">waitForAppScript</code></td>
<td>用于判断 "应用是否被启动” 的 iOS 自动化脚本代码。默认情况下系统等待直到页面内容非空。结果必须是布尔类型。</td>
<td>例如 <code class="prettyprint">true;</code>, <code class="prettyprint">target.elements().length &gt; 0;</code>, <code class="prettyprint">$.delay(5000); true;</code>
</td>
</tr>
</tbody>
</table>

<h2 id="元素定位与交互">
<span id="finding-elements.cn.md"></span>元素定位与交互</h2>

<p>Appium支持webdriver定位策略的子集</p>

<ul>
<li>根据"class"定位(例如， UI组件类型)</li>
<li>根据"xpath"定位 (例如，具有一定约束的路径抽象标示, 基于XPath方式)</li>
</ul>

<p>另外， Appium 还支持部分 <a href="https://code.google.com/p/selenium/source/browse/spec-draft.md?repo=mobile">Mobile JSON 连接协议</a> 的定位策略</p>

<ul>
<li>
<code class="prettyprint">ios uiautomation</code>: 一个递归地、对应使用 <a href="#ios_predicate.cn.md">UIAutomation library</a> 搜索元素的字符串(iOS-only)</li>
<li>
<code class="prettyprint">android uiautomator</code>: 一个递归地、对应使用 <a href="#uiautomator_uiselector.cn.md">UiAutomator Api</a>搜索元素的字符串 (Android-only)</li>
<li>
<code class="prettyprint">accessibility id</code>: 一个递归地、使用本地Accessibility选项实现的Id/Name进行元素搜索的字符串。</li>
</ul>

<h3 id="存在的问题">存在的问题</h3>

<p>如果遇到定位元素变得无效请联系并告知我们。我们将会努力修复</p>

<h3 id="使用appium-inspector来定位元素">使用Appium Inspector来定位元素</h3>

<p>(翻译备注: 这个工具目前只有Mac版本, 如果你使用的是windows, 可以使用android sdk自带的 uiautomatorviewer 工具来获得元素的位置)</p>

<p>Appium提供了一个灵活的工具Appium Inspector, 允许你在app运行的时候, 直接定位你正在关注的元素. 通过Appium Inspector(靠近start test按钮的小"i"按钮), 你可以通过点击预览窗口上的控件来获得它的name属性, 或者直接在UI导航窗口中定位</p>

<h4 id="概述">概述</h4>

<p>Appium Inspector有一个简单的布局, 全部由如下窗口组成.
UI导航器, 预览, 录制与刷新按钮, 和交互工具</p>

<p><img alt="Step 1" src="https://raw.github.com/appium/appium/master/assets/InspectorImages/Overview.png"></p>

<h4 id="例子">例子</h4>

<p>启动Appium Inspector后(通过点击app右上的小"i"按钮), 你可以定位任何预览窗口中的元素. 作为测试, 我正在查找id为"show alert"的按钮</p>

<p><img alt="Step 1" src="https://raw.github.com/appium/appium/master/assets/InspectorImages/Step1.png"></p>

<p>要找到这个按钮的id, 在定位预览窗口中我点击了"show alert"按钮, Appium Inspector在UI导航窗口中高亮显示了这个元素, 然后展示了刚被点击按钮的id和元素类型</p>

<p><img alt="Step 1" src="https://raw.github.com/appium/appium/master/assets/InspectorImages/Step2.png"></p>

<h2 id="ios-谓词(predicate)">
<span id="ios_predicate.cn.md"></span>iOS 谓词(Predicate)</h2>

<p>在查看 <em>’-ios uiautomation'</em> 搜索策略时了解 <strong>谓词(Predicate)</strong> 十分必要。 <a href="https://developer.apple.com/library/ios/documentation/DeveloperTools/Reference/UIAutomationRef/_index.html">UIAutomation JavaScript API</a>有下列几种非常有用的方法:</p>

<p class="centercode"><code>(UIAElement) UIAElementArray.firstWithPredicate(PredicateString predicateString)
(UIAElementArray) UIAElementArray.withPredicate(PredicateString predicateString)</code></p>

<p>原生的JS搜索策略（由Apple提供）提供了更大的灵活性，并且和XPath很像。
<strong><a href="https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Predicates/predicates.html">谓词(Predicate)</a></strong> 可以通过使用多个匹配条件来准确定位某一个或某一组元素（相当于只有搜索条件与元素的计算结果为 true 时这些元素才会被认为是匹配的）。</p>

<p>（翻译备注：XPath 是一门用来定位 xml 文档中的元素的语言，能提供基于路径、元素属性等条件的定位策略）</p>

<p>例如:</p>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">appiumDriver</span><span class="o">.</span><span class="na">findElementsByIosUIAutomation</span><span class="o">(</span><span class="s">"collectionViews()[0].cells().withPredicate(\"ANY staticTexts.isVisible == TRUE\")"</span><span class="o">)</span>
</code></pre>

<p>-  将只选择那些在主视图第一个 <code class="prettyprint">UIACollectionView</code> 元素下的、拥有可见子元素 <code class="prettyprint">UIAStaticText</code> 的 <code class="prettyprint">UIACollectionCell</code> 元素。在这里， <code class="prettyprint">staticTexts()</code> 和 <code class="prettyprint">isVisible()</code> 分别是<code class="prettyprint">UIAElementArray</code> 和 <code class="prettyprint">UIAElement</code> 的子方法。 <strong>注意： <code class="prettyprint">UIAElementArray</code> 序列编号从 <code class="prettyprint">0</code> 开始，而不是像 Xpath 那样从 <code class="prettyprint">1</code>开始</strong></p>

<p>以下是所有可用的谓词(Predicate)的列表（主要取自 <a href="https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Predicates/predicates.html">谓词(Predicate) 编程指南</a>)</p>

<h3 id="基本比较">基本比较</h3>

<p>= , ==
- 左边表达式等于右边表达式:
”`javascript
tableViews()<a title="Hax" href="http://software.intel.com/en-us/articles/intel-hardware-accelerated-execution-manager/">1</a>.cells().firstWithPredicate(“label == ‘Olivia’ ”)</p>

<p>same in Xpath: /UIATableView<a title="Hax all" href="http://software.intel.com/en-us/search/site/language/en?query=Intel%20Hardware%20Accelerated%20Execution%20Manager%20%28HAXM%29">2</a>/UIATableCell<a title="Hax" href="http://software.intel.com/en-us/articles/intel-hardware-accelerated-execution-manager/">@label = ‘Olivia’</a>
“`</p>

<p>&gt;= , =&gt;
- 左边表达式大于或等于右边表达式。</p>

<p>&lt;= , =&lt;
- 左边表达式小于或等于右边表达式。</p>

<p>&gt;
- 左边表达式大于右边表达式。</p>

<p>&lt;
- 左边表达式小于右边表达式。</p>

<p>!= , &lt;&gt;
- 左边表达式不等于右边表达式。</p>

<p>BETWEEN
- 左边表达式的值在右边表达式的两个边界值之间或等于其中一个边界值。右边表达式为一个有两个值的数组，数组的第一个值是上限，第二个值是下限(这个顺序是固定的) ，例如 <code class="prettyprint">1 BETWEEN { 0 , 33 }</code>， 或者 <code class="prettyprint">$INPUT BETWEEN { $LOWER, $UPPER }</code>。
在 Objective-C， 你可以创建一个自定义的 BETWEEN 谓词(Predicate)，如下面的示例所示:</p>

<p class="centercode"><code>NSPredicate *betweenPredicate =
    [NSPredicate predicateWithFormat: @"attributeName BETWEEN %@", @[@1, @10]];</code></p>

<p>这创建了一个等价于 <code class="prettyprint">( ( 1 &lt;= attributeValue ) &amp;&amp; ( attributeValue &lt;= 10 ) )</code> 的谓词</p>

<h3 id="布尔值谓词">布尔值谓词</h3>

<p>TRUEPREDICATE
- 计算结果恒等于 <code class="prettyprint">TRUE</code> 。</p>

<p>FALSEPREDICATE
- 计算结果恒等于 <code class="prettyprint">FALSE</code>。</p>

<h3 id="基本的复合谓词">基本的复合谓词</h3>

<p>AND , &amp;&amp;
-  逻辑与。</p>

<p>OR , ||
-  逻辑或。</p>

<p>NOT , !
-  逻辑非。</p>

<h3 id="字符串比较">字符串比较</h3>

<p>在默认情况下，字符串比较是区分大小写和音调( diacritic )的，你可以在方括号中用关键字符  <code class="prettyprint">c</code> 和 <code class="prettyprint">d</code> 来修改操作符以相应的指定不区分大小写和变音符号。例如 名字的开头 <code class="prettyprint">firstName BEGINSWITH[cd] $FIRST_NAME</code></p>

<p>（翻译备注：这里的音调是指英文字母的音调，如 <code class="prettyprint">"náive"</code> 和 <code class="prettyprint">"naive"</code>。如果不加关键字 <code class="prettyprint">d</code>，这两个字符串会认为是不等价的。）</p>

<p>BEGINSWITH
- 左边的表达式以右边的表达式作为开始。</p>

<p class="centercode"><code>scrollViews()[3].buttons().firstWithPredicate("name BEGINSWITH 'results toggle' ")

same in Xpath: /UIAScrollView[4]/UIAButton[starts-with(@name, 'results toggle')][1]</code></p>

<p>CONTAINS
- 左边的表达式包含右边的表达式。</p>

<p class="centercode"><code>tableViews()[1].cells().withPredicate("ANY collectionViews[0].buttons.name CONTAINS 'opera'")

same in Xpath: /UIATableView[2]/UIATableCell[UIACollectionView[1]/UIAButton[contains(@name, 'opera')]]</code></p>

<p>ENDSWITH
- 左边的表达式以右边的表达式作为结束。</p>

<p>LIKE
- 左边表达式等于右边表达式: ? 和 *可作为通配符， 其中 ? 匹配 1 个字符， * 匹配 0 个或者多个字符。 在 Mac OS X v10.4， 通配符不能匹配换行符。</p>

<p class="centercode"><code>tableViews()[0].cells().firstWithPredicate("name LIKE '*Total: $*' ")

same in Xpath: /UIATableView[1]/UIATableCell[matches(@name, '.*Total: \$.*')][1]</code></p>

<p>MATCHES
- 左边表达式根据ICU v3的正则表达式风格比较，等于右边表达式 (详情请看ICU用户指南中的 <a href="http://userguide.icu-project.org/strings/regexp">正则表达式</a>)。</p>

<p class="centercode"><code>tableViews().firstWithPredicate("value MATCHES '.*of 7' ")

same in Xpath: /UIATableView[matches(@value, '.*of 7')][1]</code></p>

<h3 id="聚合操作">聚合操作</h3>

<p>ANY , SOME
- 指定匹配后续表达式的任意元素。例如 <code class="prettyprint">ANY children.age &lt; 18</code> 。</p>

<p class="centercode"><code>tableViews()[0].cells().firstWithPredicate("SOME staticTexts.name = 'red'").staticTexts().withName('red')

same in Xpath: /UIATableView[1]/UIATableCell[UIAStaticText/@name = 'red'][1]/UIAStaticText[@name = 'red']</code></p>

<p>ALL
- 指定匹配后续表达式的所有元素。例如 <code class="prettyprint">ALL children.age &lt; 18</code> 。</p>

<p>NONE
- 指定不匹配后续表达式的元素。例如 <code class="prettyprint">NONE children.age &lt; 18</code> 。 逻辑上等价于 <code class="prettyprint">NOT (ANY ...)</code> 。</p>

<p>IN
- 等价于 SQL 的 IN 操作，左边的表达必须出现在右边指定的集合中。例如 <code class="prettyprint">name IN { 'Ben', 'Melissa', 'Matthew' }</code> 。 这个集合可以是一个数组( array )，一个列表( set )， 或者一个字典( dictionary )。当这个集合是字典时，这里使用的是它的值( value )。</p>

<p>array[index]
- 指定数组中特定索引处的元素。</p>

<p>array[FIRST]
- 指定数组中的第一个元素。</p>

<p>array[LAST]
- 指定数组中的最后一个元素。</p>

<p>array[SIZE]
- 指定数组的大小
</p>
<p class="centercode"><code>elements()[0].tableViews()[0].cells().withPredicate("staticTexts[SIZE] &gt; 2")</code></p>

<p>same in Xpath: /*<a title="Hax" href="http://software.intel.com/en-us/articles/intel-hardware-accelerated-execution-manager/">1</a>/UIATableView<a title="Hax" href="http://software.intel.com/en-us/articles/intel-hardware-accelerated-execution-manager/">1</a>/UIATableCell[count(UIAStaticText) &gt; 2]</p>

<h3 id="标识符">标识符</h3>

<p><strong>C语言标识符</strong>
- 任何C语言的标识符都不是保留字。</p>

<p><strong>#symbol</strong>
- 用来把一个保留字转义为用户标识符。</p>

<p><strong>[\]{octaldigit}{3}</strong>
- 用来表示一个八进制数 ( <code class="prettyprint">\</code>后面加上3位八进制数字)。</p>

<p><strong>[\][xX]{hexdigit}{2}</strong>
- 用于表示十六进制数 ( <code class="prettyprint">\x</code> 或 <code class="prettyprint">\X</code> 后面加上2个十六进制数字)。</p>

<p><strong>[\][uU]{hexdigit}{4}</strong>
- 用于表示 Unicode 编码 ( <code class="prettyprint">\u</code> 或 <code class="prettyprint">\U</code> 后面加上4个十六进制数字)。</p>

<h3 id="文字-(literals)">文字 (Literals)</h3>

<p>（翻译备注：Literals 在编程语言领域的意思是在代码中可以看得到的(或说可视的)那些值。例如字符串 <code class="prettyprint">"a"</code>，数组 <code class="prettyprint">[1, 2]</code>，你可以在代码中一眼看出这是一个字符串，数组还是别的数据类型并知道它的值。这一节说的就是这些值的写法）</p>

<p>单引号和双引号都能产生相同的结果，但他们不会匹配对方（单引号不会匹配双引号）。例如：<code class="prettyprint">"abc"</code> and <code class="prettyprint">'abc'</code> 都是可识别的 ，但是 <code class="prettyprint">"a'b'c"</code> 等价于<code class="prettyprint">a, 'b', c</code>。</p>

<p>FALSE , NO
-  表示逻辑上的 false。</p>

<p>TRUE , YES
-  表示逻辑上的 true。</p>

<p>NULL , NIL
- 空值。</p>

<p>SELF
- 代表被使用的对象本身。</p>

<p>"text”
- 一个字符串。</p>

<p>‘text’
- 同上，也是一个字符串。</p>

<p><strong>以逗号分隔的文本数组</strong>
- 举个例子 <code class="prettyprint">{ 'comma', 'separated', 'literal', 'array' }</code> 。</p>

<p><strong>标准的整数和小数</strong>
- 举个例子 <code class="prettyprint">1 , 27 , 2.71828 , 19.75</code> 。</p>

<p><strong>带有幂指数的小数</strong>
- 举个例子 <code class="prettyprint">9.2e-5</code> 。</p>

<p>0x
- 十六进制数的前缀， 如<code class="prettyprint">0x11</code>表示十六进制数11，等同于十进制的17。</p>

<p>0o
- 八进制数的前缀。</p>

<p>0b
- 二进制数的前缀。</p>

<h3 id="保留字">保留字</h3>

<p>下面的都是保留字：</p>

<p><code class="prettyprint">AND, OR, IN, NOT, ALL, ANY, SOME, NONE, LIKE, CASEINSENSITIVE, CI, MATCHES, CONTAINS, BEGINSWITH, ENDSWITH, BETWEEN, NULL, NIL, SELF, TRUE, YES, FALSE, NO, FIRST, LAST, SIZE, ANYKEY, SUBQUERY, CAST, TRUEPREDICATE, FALSEPREDICATE</code></p>

<h3 id="appium-谓词(predicate)帮助文档">Appium 谓词(predicate)帮助文档</h3>

<p>Appium 在app.js中有 <a href="https://github.com/appium/appium-uiauto/blob/3052dace828db2ab3d722281fb7853cbcbc3252f/uiauto/appium/app.js#L68">专门的谓词(predicate)使用帮助文档</a> :</p>

<ul>
<li><code class="prettyprint">getFirstWithPredicate</code></li>
<li><code class="prettyprint">getFirstWithPredicateWeighted</code></li>
<li><code class="prettyprint">getAllWithPredicate</code></li>
<li><code class="prettyprint">getNameContains</code></li>
</ul>

<p>如下是个Ruby的例子</p>
<pre class="highlight ruby"><code><span class="c1"># Ruby example</span>
<span class="n">text</span> <span class="o">=</span> <span class="s1">'Various uses'</span>
<span class="n">predicate</span> <span class="o">=</span> <span class="s2">"name contains[c] '</span><span class="si">#{</span><span class="n">text</span><span class="si">}</span><span class="s2">' || label contains[c] '</span><span class="si">#{</span><span class="n">text</span><span class="si">}</span><span class="s2">' || value contains[c] '</span><span class="si">#{</span><span class="n">text</span><span class="si">}</span><span class="s2">'"</span>
<span class="n">element</span> <span class="o">=</span> <span class="n">execute_script</span><span class="p">(</span><span class="sx">%Q(au.mainApp().getFirstWithPredicate("</span><span class="si">#{</span><span class="n">predicate</span><span class="si">}</span><span class="sx">");)</span><span class="p">)</span>

<span class="nb">puts</span> <span class="n">element</span><span class="p">.</span><span class="nf">name</span> <span class="c1"># Buttons, Various uses of UIButton</span>
</code></pre>

<h2 id="自动化手机网页应用">
<span id="mobile-web.cn.md"></span>自动化手机网页应用</h2>

<p>如果你正对于如何在iOS的Safari或Android上的Chrome做网页应用的自动化感兴趣，
那么Appium能够帮助你。基本上，你可以正常的写webdriver测试，只需要把Appium当
成一个有特殊设置的selenium Server。</p>

<h3 id="ios模拟器上的safari浏览器">iOS模拟器上的Safari浏览器</h3>

<p>首先，要确保你的Safari浏览器参数中开启了开发者模式，这样Safari的远程调试端口也会被同时打开。</p>

<p>不管你使用模拟器还是真机，你必须使用Appium开始之前先开启Safari。</p>

<p>然后设置如下显示的这些信息以便于在设备中的Safari执行测试：</p>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="p">{</span>
  <span class="na">platformName</span><span class="p">:</span> <span class="s1">'iOS'</span>
  <span class="p">,</span> <span class="na">platformVersion</span><span class="p">:</span> <span class="s1">'7.1'</span>
  <span class="p">,</span> <span class="na">browserName</span><span class="p">:</span> <span class="s1">'Safari'</span>
  <span class="p">,</span> <span class="na">deviceName</span><span class="p">:</span> <span class="s1">'iPhone Simulator'</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="p">{</span>
  <span class="s">'platformName'</span><span class="p">:</span> <span class="s">'iOS'</span><span class="p">,</span>
  <span class="s">'platformVersion'</span><span class="p">:</span> <span class="s">'7.1'</span><span class="p">,</span>
  <span class="s">'browserName'</span><span class="p">:</span> <span class="s">'Safari'</span><span class="p">,</span>
  <span class="s">'deviceName'</span><span class="p">:</span> <span class="s">'iPhone Simulator'</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight php"><code>// php
public static $browsers = array(
    array(
        'desiredCapabilities' =&gt; array(
            'platformName' =&gt; 'iOS',
            'platformVersion' =&gt; '7.1',
            'browserName' =&gt; 'Safari',
            'deviceName' =&gt; 'iPhone Simulator'
        )
    )
);
</code></pre>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">DesiredCapabilities</span> <span class="n">capabilities</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DesiredCapabilities</span><span class="o">();</span>
<span class="n">capabilities</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span><span class="n">MobileCapabilityType</span><span class="o">.</span><span class="na">PLATFORM_NAME</span><span class="o">,</span> <span class="s">"iOS"</span><span class="o">);</span>
<span class="n">capabilities</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span><span class="n">MobileCapabilityType</span><span class="o">.</span><span class="na">PLATFORM_VERSION</span><span class="o">,</span> <span class="s">"7.1"</span><span class="o">);</span>
<span class="n">capabilities</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span><span class="n">MobileCapabilityType</span><span class="o">.</span><span class="na">BROWSER_NAME</span><span class="o">,</span> <span class="s">"Safari"</span><span class="o">);</span>
<span class="n">capabilities</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span><span class="n">MobileCapabilityType</span><span class="o">.</span><span class="na">DEVICE_NAME</span><span class="o">,</span> <span class="s">"iPhone Simulator"</span><span class="o">);</span>
</code></pre>

<h3 id="ios真机上的safari浏览器">iOS真机上的Safari浏览器</h3>

<p>为了能够在真机上的Safari执行测试，我们使用了<a href="https://github.com/snevesbarros/SafariLauncher">SafariLauncher App</a>来启动Safari。
一旦Safari被启动，则使用<a href="https://github.com/google/ios-webkit-debug-proxy">ios-webkit-webkit-proxy</a>来自动启动Safari的远程调试功能。</p>

<p><strong>提示:</strong> 目前在ios-webkit-debug-proxy中有一个<a href="https://github.com/google/ios-webkit-debug-proxy/issues/38">问题</a>。
你必须添加信任才能开始运行ios-webkit-debug-proxy。</p>

<h3 id="前期设置">前期设置</h3>

<p>当你要在真机上的Safari中执行你的测试脚本之前你需要先注意以下几点：</p>

<ul>
<li>安装并运行 <strong>ios-webkit-debug-proxy</strong>，并监听27753端口 (具体可以参考(<a href="#hybrid.cn.md">hybrid docs</a>)</li>
<li>打开iOS真机中的 <strong>web inspector</strong>，可以在iOS6.0或更高版本中的 <strong>设置 &gt; safari &gt; 高级</strong>找到。</li>
<li>创建一个 <strong>provisioning profile</strong> 能够帮助你配置safariLauncher。</li>
</ul>

<p>你可以前往 <strong>Apple Developers Member Center</strong> 创建一个launcher profile:
  *  <strong>第一步:</strong> 创建一个 <strong>新的App Id</strong> 同时设置WildCard App ID这个选项置为"<em>“
  *  *</em>第二步:** 为步骤1的App Id创建一个 <strong>new Development Profile</strong> 。
  *  <strong>第三步:</strong> 选择你的 <strong>certificate(s) and device(s)</strong> 并选择下一步。
  *  <strong>第四步:</strong> 设置profile的名称以及 <strong>generate the profile</strong>。
  *  <strong>第五步:</strong> 下载profile并使用文本编辑器打开。
  *  <strong>第六步:</strong> 寻找并牢记你的 <strong>UUID</strong> </p>

<p>现在你有了自己的profile文件，可以在终端中输入如下的命令:</p>

<p class="centercode"><code>$ git clone https://github.com/appium/appium.git
$ cd appium

# 选项1:你可以不设置任何的参数。appium会把签名 (code signing identity) 设为'iPhone Developer'
$ ./reset.sh --ios --real-safari

# 选项2:你需要定义code signing identity并且允许xcode选择profile identity code
$ ./reset.sh --ios --real-safari --code-sign '&lt;code signing idendity&gt;' 

# 选项3:你需要设置&lt;code signing idendity&gt;和&lt;profile identity code&gt;
$ ./reset.sh --ios --real-safari --code-sign '&lt;code signing idendity&gt;' --profile '&lt;retrieved profile identity code&gt;'

# 设置成功之后，就可以像往常一样启动服务
$ node /lib/server/main.js -U &lt;UDID&gt;</code></p>

<h3 id="执行测试">执行测试</h3>

<p>如果要在safari下的运行你的测试, 只需要简单的配置<strong>"browserName”</strong>为safari即可</p>

<h3 id="java-范例">Java 范例</h3>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="c1">// 配置web driver并启动webview应用</span>
<span class="n">DesiredCapabilities</span> <span class="n">desiredCapabilities</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DesiredCapabilities</span><span class="o">();</span>
<span class="n">desiredCapabilities</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span><span class="n">MobileCapabilityType</span><span class="o">.</span><span class="na">BROWSER_NAME</span><span class="o">,</span> <span class="s">"Safari"</span><span class="o">);</span>
<span class="n">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://127.0.0.1:4723/wd/hub"</span><span class="o">);</span>
<span class="n">AppiumDriver</span> <span class="n">driver</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AppiumDriver</span><span class="o">(</span><span class="n">url</span><span class="o">,</span> <span class="n">desiredCapabilities</span><span class="o">);</span>

<span class="c1">// 跳转到指定页面并在该页面所以用元素id进行交互</span>
<span class="n">driver</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"http://saucelabs.com/test/guinea-pig"</span><span class="o">);</span>
<span class="n">WebElement</span> <span class="n">div</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="na">findElement</span><span class="o">(</span><span class="n">By</span><span class="o">.</span><span class="na">id</span><span class="o">(</span><span class="s">"i_am_an_id"</span><span class="o">));</span>
<span class="n">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="s">"I am a div"</span><span class="o">,</span> <span class="n">div</span><span class="o">.</span><span class="na">getText</span><span class="o">());</span> <span class="c1">//跳转到指定页面并在该页面所以用元素id进行交互</span>
<span class="n">driver</span><span class="o">.</span><span class="na">findElement</span><span class="o">(</span><span class="n">By</span><span class="o">.</span><span class="na">id</span><span class="o">(</span><span class="s">"comments"</span><span class="o">)).</span><span class="na">sendKeys</span><span class="o">(</span><span class="s">"My comment"</span><span class="o">);</span> <span class="c1">//通过id查找评论框并输入</span>

<span class="c1">// 关闭应用</span>
<span class="n">driver</span><span class="o">.</span><span class="na">quit</span><span class="o">();</span>
</code></pre>

<h3 id="python-范例">Python 范例</h3>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="c"># 配置web driver并启动webview应用</span>
<span class="n">capabilities</span> <span class="o">=</span> <span class="p">{</span> <span class="s">'browserName'</span><span class="p">:</span> <span class="s">'Safari'</span> <span class="p">}</span>
<span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Remote</span><span class="p">(</span><span class="s">'http://localhost:4723/wd/hub'</span><span class="p">,</span> <span class="n">capabilities</span><span class="p">)</span>

<span class="c"># 跳转到指定页面并在该页面所以用元素id进行交互</span>
<span class="n">driver</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'http://saucelabs.com/test/guinea-pig'</span><span class="p">);</span>
<span class="n">div</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s">'i_am_an_id'</span><span class="p">)</span>
<span class="c"># 检查文本是否符合预期</span>
<span class="n">assertEqual</span><span class="p">(</span><span class="s">'I am a div'</span><span class="p">,</span> <span class="n">div</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

<span class="c"># 通过id查找评论框并输入</span>
<span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s">'comments'</span><span class="p">)</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="s">'My comment'</span><span class="p">)</span>

<span class="c"># 关闭应用</span>
<span class="n">driver</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
</code></pre>
<pre class="highlight php"><code>// php
class ContextTests extends PHPUnit_Extensions_AppiumTestCase
{
    public static $browsers = array(
        array(
            'desiredCapabilities' =&gt; array(
                'platformName' =&gt; 'iOS',
                'platformVersion' =&gt; '7.1',
                'browserName' =&gt; 'Safari',
                'deviceName' =&gt; 'iPhone Simulator'
            )
        )
    );

    public function testThings()
    {
        $this-&gt;get('http://saucelabs.com/test/guinea-pig');

        $div = $this-&gt;byId('i_am_an_id');
        $this-&gt;assertEquals('I am a div', $div-&gt;text());

        $this-&gt;byId('comments')-&gt;sendKeys('My comment');
    }
}
</code></pre>

<h3 id="在真机或模拟器上的chrome执行测试">在真机或模拟器上的Chrome执行测试</h3>

<p>需要做的准备:</p>

<ul>
<li> 确认Chrome已经安装在了你的真机或模拟器上 (应用的包名是<code class="prettyprint">com.android.chrome</code>) 。在不编译Chromium的情况下, 不可能得到模拟器上的x86版本的chrome，你可以运行一个ARM的模拟器然后从真机上获取一个Chrome的APK安装在模拟器上。</li>
<li> 如果你是使用<a href="https://www.npmjs.org/package/appium">NPM</a>下载的，
或者是在<a href="https://github.com/appium/appium-dot-app">.app</a>运行的话，那你不需要其他额外的工作。如果你是使用源码运行，<code class="prettyprint">reset</code>会下载ChromeDriver并放在<code class="prettyprint">build</code>。 
使用 <code class="prettyprint">--chromedriver-version</code> 选项可以指定chromedriver的版本 (例如 <code class="prettyprint">./reset.sh --android --chromedriver-version 2.8</code>)，
否则使用最新版。</li>
</ul>

<p>接着,像这样设置就可以在Chrome上执行测试了:</p>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="p">{</span>
  <span class="na">platformName</span><span class="p">:</span> <span class="s1">'Android'</span>
  <span class="p">,</span> <span class="na">platformVersion</span><span class="p">:</span> <span class="s1">'4.4'</span>
  <span class="p">,</span> <span class="na">deviceName</span><span class="p">:</span> <span class="s1">'Android Emulator'</span>
  <span class="p">,</span> <span class="na">browserName</span><span class="p">:</span> <span class="s1">'Chrome'</span>
<span class="p">};</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="p">{</span>
  <span class="s">'platformName'</span><span class="p">:</span> <span class="s">'Android'</span><span class="p">,</span>
  <span class="s">'platformVersion'</span><span class="p">:</span> <span class="s">'4.4'</span><span class="p">,</span>
  <span class="s">'deviceName'</span><span class="p">:</span> <span class="s">'Android Emulator'</span><span class="p">,</span>
  <span class="s">'browserName'</span><span class="p">:</span> <span class="s">'Chrome'</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight php"><code>// php
public static $browsers = array(
    array(
        'desiredCapabilities' =&gt; array(
            'platformName' =&gt; 'Android',
            'platformVersion' =&gt; '4.4',
            'browserName' =&gt; 'Chrome',
            'deviceName' =&gt; 'Android Emulator'
        )
    )
);
</code></pre>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">DesiredCapabilities</span> <span class="n">capabilities</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DesiredCapabilities</span><span class="o">();</span>
<span class="n">capabilities</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span><span class="n">MobileCapabilityType</span><span class="o">.</span><span class="na">PLATFORM_NAME</span><span class="o">,</span> <span class="s">"Android"</span><span class="o">);</span>
<span class="n">capabilities</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span><span class="n">MobileCapabilityType</span><span class="o">.</span><span class="na">PLATFORM_VERSION</span><span class="o">,</span> <span class="s">"4.4"</span><span class="o">);</span>
<span class="n">capabilities</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span><span class="n">MobileCapabilityType</span><span class="o">.</span><span class="na">DEVICE_NAME</span><span class="o">,</span> <span class="s">"Android Emulator"</span><span class="o">);</span>
<span class="n">capabilities</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span><span class="n">MobileCapabilityType</span><span class="o">.</span><span class="na">BROWSER_NAME</span><span class="o">,</span> <span class="s">"Chrome"</span><span class="o">);</span>
</code></pre>

<p>在4.4以上的版本，你也可以用‘Browser’ <code class="prettyprint">browserName</code> 来对内置浏览器进行自动化。
在所有版本你都可以用‘Chromium’ <code class="prettyprint">browserName</code>来对Chromium进行自动化。</p>

<h4 id="chromedriver故障排查">chromedriver故障排查</h4>

<p>从Chrome 33开始，不再必须将设备root。在之前的版本，设备必须按要求进行root (ChromeDriver需要写 /data/local 目录来设定Chrome的命令行参数) 。</p>

<p>如果在版本33之前在Chrome上测试app，确保adb shell拥有设备中/data/local目录的读写权限：</p>

<p class="centercode"><code>$ adb shell su -c chmod 777 /data/local</code></p>

<p>更多关于chromedriver的文档详见<a href="https://sites.google.com/a/chromium.org/chromedriver/getting-started/getting-started---android">ChromeDriver documentation</a>。</p>

<h2 id="调整网络设置">
<span id="network_connection.cn.md"></span>调整网络设置</h2>

<p>Selenium 的 <a href="https://code.google.com/p/selenium/source/browse/spec-draft.md?repo=mobile">Mobile JSON Wire Protocol Specification</a> 支持一个获取和设置设备网络连接的 <a href="https://code.google.com/p/selenium/source/browse/spec-draft.md?repo=mobile#104">API</a> 。这个 API 通过位掩码（bitmask）工作，把所有可能的状态用一个整型数据表示：</p>

<table>
<thead>
<tr>
<th>值 (别名)</th>
<th>数据连接</th>
<th>Wifi 连接</th>
<th>飞行模式</th>
</tr>
</thead>
<tbody>
<tr>
<td>0 (什么都没有)</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>1 (飞行模式)</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>2 (只有Wifi)</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>4 (只有数据连接)</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>6 (开启所有网络)</td>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
</tbody>
</table>

<p>翻译备注：数据链接即2g, 3g, 4g的网络连接。</p>

<h3 id="ios">iOS</h3>

<p>很不幸，目前 Appium 在 iOS 下不支持 Selenium 的网络连接 API。</p>

<h3 id="android">Android</h3>

<p>选择你想使用的设置，然后根据上面的表格发送正确的位掩码(bitmask)。</p>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="c1">// 设置网络连接为飞行模式</span>
<span class="nx">driver</span><span class="p">.</span><span class="nx">setNetworkConnection</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c1">// 设置网络连接为仅启用Wifi</span>
<span class="nx">driver</span><span class="p">.</span><span class="nx">setNetworkConnection</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="c1">// 设置网络连接为仅启用数据连接</span>
<span class="nx">driver</span><span class="p">.</span><span class="nx">setNetworkConnection</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>

<span class="c1">// 设置网络连接为启用数据连接和Wifi</span>
<span class="nx">driver</span><span class="p">.</span><span class="nx">setNetworkConnection</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
</code></pre>

<p>获取网络连接设置会返回基于同样规则的位掩码，你可以将其解码来获得网络设置。</p>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="nx">driver</span><span class="p">.</span><span class="nx">getNetworkConnection</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">connectionType</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">switch</span> <span class="p">(</span><span class="nx">connectionType</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="mi">0</span><span class="err">:</span>
      <span class="c1">// 无网络</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="mi">1</span><span class="err">:</span>
      <span class="c1">// 飞行模式</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="mi">2</span><span class="err">:</span>
      <span class="c1">// wifi</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="mi">4</span><span class="err">:</span>
      <span class="c1">// 数据连接</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="mi">6</span><span class="err">:</span>
      <span class="c1">// wifi和数据连接</span>
      <span class="k">break</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>

<h1 id="执行测试">执行测试</h1>

<h2 id="准备被测应用-(ios)">
<span id="running-tests.cn.md"></span>准备被测应用 (iOS)</h2>

<p>在模拟器上测试apps必须要用模拟器专用的编译器，例如使用下列的命令来编译Xcode项目：</p>
<pre class="highlight plaintext"><code>    &gt; xcodebuild -sdk iphonesimulator6.0
</code></pre>

<p>这行指令在Xcode项目底下创建了一个<code class="prettyprint">build/Release-iphonesimulator</code>目录，并且生成一个可以透过Appium服务器来通讯的的<code class="prettyprint">.app</code>封包。</p>

<p>如果需要，你可以把.app 目录压缩成一个zip压缩档！ Appium 会自行解压缩。让你能方便在非本地运行Appium。</p>

<h2 id="准备被测应用-(android)">准备被测应用 (Android)</h2>

<p>用Appium去执行你的.apk档其实没什么特别需要注意的事项。如果需要，你可以把它压缩成zip压缩档。</p>

<h2 id="用appium测试你的app-(ios)">用Appium测试你的app (iOS)</h2>

<p>想知道如何编写测试脚本，请参照测试范例：</p>

<p><a href="https://github.com/appium/sample-code/tree/master/sample-code/examples/node">Node.js</a> | <a href="https://github.com/appium/sample-code%20/tree/master/sample-code/examples/python">Python</a> | <a href="https://github.com/appium/sample-code/tree/master/sample-code/examples/php">PHP</a> | <a href="https://github.com/appium/sample-code/tree/master/sample-code/examples/ruby">Ruby</a> | <a href="https://github.com/appium/sample-code/tree/master/sample-code/examples/java">Java</a></p>

<p>基本上来说，首先先确定你启动了Appium:</p>
<pre class="highlight plaintext"><code>    node .
</code></pre>

<p>然后执行你的WebDriver测试脚本，脚本必须包含下列的环境参数：
<code class="prettyprint">javascript
// javascript
{
    platformName: 'iOS',
    platformVersion: '7.1',
    deviceName: 'iPhone Simulator',
    app: myApp
}
</code></p>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="p">{</span>
    <span class="s">'platformName'</span><span class="p">:</span> <span class="s">'iOS'</span><span class="p">,</span>
    <span class="s">'platformVersion'</span><span class="p">:</span> <span class="s">'7.1'</span><span class="p">,</span>
    <span class="s">'deviceName'</span><span class="p">:</span> <span class="s">'iPhone Simulator'</span><span class="p">,</span>
    <span class="s">'app'</span><span class="p">:</span> <span class="n">myApp</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight php"><code>// php
public static $browsers = array(
    array(
        'desiredCapabilities' =&gt; array(
            'platformName' =&gt; 'iOS',
            'platformVersion' =&gt; '7.1',
            'deviceName' =&gt; 'iPhone Simulator',
            'app' =&gt; $myApp
        )
    )
);
</code></pre>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">DesiredCapabilities</span> <span class="n">capabilities</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DesiredCapabilities</span><span class="o">();</span>
<span class="n">capabilities</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span><span class="n">MobileCapabilityType</span><span class="o">.</span><span class="na">PLATFORM_NAME</span><span class="o">,</span> <span class="s">"iOS"</span><span class="o">);</span>
<span class="n">capabilities</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span><span class="n">MobileCapabilityType</span><span class="o">.</span><span class="na">PLATFORM_VERSION</span><span class="o">,</span> <span class="s">"7.1"</span><span class="o">);</span>
<span class="n">capabilities</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span><span class="n">MobileCapabilityType</span><span class="o">.</span><span class="na">DEVICE_NAME</span><span class="o">,</span> <span class="s">"iPhone Simulator"</span><span class="o">);</span>
<span class="n">capabilities</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span><span class="n">MobileCapabilityType</span><span class="o">.</span><span class="na">APP</span><span class="o">,</span> <span class="n">myApp</span><span class="o">);</span>
</code></pre>

<p>在这个脚本集里，<code class="prettyprint">myApp</code>必须是下列其中之一：</p>

<ul>
<li>一个模拟器编译过的.app 目录或者.zip 文件的本地绝对路径</li>
<li>一个包含着你的.app封包的zip档的url</li>
<li>appium安装根目录下的一个示例app的相对路径</li>
</ul>

<p>在你选择的WebDriver库里，设定remote session使用上述的环境参数然后使用端口4723来连接本地服务器(或者使用你在Appium启动时所设定的端口)。现在你已经完成设置了！</p>

<h2 id="用appium测试你的app-(android)">用Appium测试你的app (Android)</h2>

<p>首先，先确定你有一个而且必须是只能一个Android模拟器或者设备连接着。如果你输入<code class="prettyprint">adb devices</code>，你应该只看到一个设备连接着。这将是Appium所用来测试的设备。当然，要连接一个设备，你需要准备好一个Android AVD (参考(<a href="#running-on-windows.cn.md">Windows</a>，<a href="#running-on-osx.cn.md">Mac</a>，或者<a href="#running-on-linux.cn.md">Linux</a>)以了解更多)。 如果Android SDK工具在你的环境变量path下，你可以简单的执行:</p>
<pre class="highlight plaintext"><code>    emulator -avd &lt;我的Avd名称&gt;
</code></pre>

<p>然后等android模拟器启动。有时候，因为某些原因，<code class="prettyprint">adb</code>会卡住。如果它没有显示任何的设备或其他故障，你可以使用下列指令来重启:</p>
<pre class="highlight plaintext"><code>    adb kill-server &amp;&amp; adb devices
</code></pre>

<p>现在，确认Appium已经启动:</p>
<pre class="highlight plaintext"><code>    node .
</code></pre>

<p>有几种方法来启动一个Appium程序（效果和通过adb启动一模一样）：</p>

<ul>
<li>只有apk或者zip，默认activity将会被启动。 (只设置了'app'环境参数)</li>
<li>apk + activity (‘app’ + ‘appActivity’ 环境参数)</li>
<li>apk + activity + intent (‘app’ + ‘appActivity’ + ‘appIntent’ 环境参数)</li>
<li>…</li>
</ul>

<p>Activities 可以通过以下方式来指定:</p>

<ul>
<li>名称 (如 appActivity: ‘com.helloworld.SayHello’)。</li>
<li>相对于 appPackage的路径 (如 appPackage: ‘com.helloworld’, appActivity=‘.SayHello’)</li>
</ul>

<p>如果“appWaitPackage'和'appWaitActivity”被指定，Appium
将自动等待，直到这些活动的被启动。你可以为实例指定多个等待的activity：</p>

<ul>
<li>appActivity: ‘com.splash.SplashScreen’</li>
<li>appPackage: ‘com.splash’ appActivity: ‘.SplashScreen’</li>
<li>appPackage: ‘com.splash’ appActivity: ‘.SplashScreen,.LandingPage,com.why.GoThere’</li>
</ul>

<p>如果你不是很清楚在apk中有哪些activity，你可以通过以下方式来查看：</p>

<ul>
<li>Mac/Linux: ‘adb shell dumpsys window windows | grep mFocusedApp’</li>
<li>在 Ruby 控制台运行: ‘adb shell dumpsys window windows`.each_line.grep(/mFocusedApp/).first.strip’</li>
<li>在 Windows 终端运行 ‘adb shell dumpsys window windows’ 然后去看mFocusedApp这一行的内容。</li>
</ul>

<p>然后执行你的WebDriver测试脚本，脚本必须包含下列的环境参数：</p>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="p">{</span>
    <span class="na">platformName</span><span class="p">:</span> <span class="s1">'Android'</span><span class="p">,</span>
    <span class="na">platformVersion</span><span class="p">:</span> <span class="s1">'4.4'</span><span class="p">,</span>
    <span class="na">deviceName</span><span class="p">:</span> <span class="s1">'Android Emulator'</span><span class="p">,</span>
    <span class="na">app</span><span class="p">:</span> <span class="nx">myApp</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="p">{</span>
    <span class="s">'platformName'</span><span class="p">:</span> <span class="s">'Android'</span><span class="p">,</span>
    <span class="s">'platformVersion'</span><span class="p">:</span> <span class="s">'4.4'</span><span class="p">,</span>
    <span class="s">'deviceName'</span><span class="p">:</span> <span class="s">'Android Emulator'</span><span class="p">,</span>
    <span class="s">'app'</span><span class="p">:</span> <span class="n">myApp</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight php"><code>// php
public static $browsers = array(
    array(
        'desiredCapabilities' =&gt; array(
            'platformName' =&gt; 'Android',
            'platformVersion' =&gt; '4.4',
            'deviceName' =&gt; 'Android Emulator',
            'app' =&gt; $myApp
        )
    )
);
</code></pre>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">DesiredCapabilities</span> <span class="n">capabilities</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DesiredCapabilities</span><span class="o">();</span>
<span class="n">capabilities</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span><span class="n">MobileCapabilityType</span><span class="o">.</span><span class="na">PLATFORM_NAME</span><span class="o">,</span> <span class="s">"Android"</span><span class="o">);</span>
<span class="n">capabilities</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span><span class="n">MobileCapabilityType</span><span class="o">.</span><span class="na">PLATFORM_VERSION</span><span class="o">,</span> <span class="s">"4.4"</span><span class="o">);</span>
<span class="n">capabilities</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span><span class="n">MobileCapabilityType</span><span class="o">.</span><span class="na">DEVICE_NAME</span><span class="o">,</span> <span class="s">"Android Emulator"</span><span class="o">);</span>
<span class="n">capabilities</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span><span class="n">MobileCapabilityType</span><span class="o">.</span><span class="na">APP</span><span class="o">,</span> <span class="n">myApp</span><span class="o">);</span>
</code></pre>

<p>在这个脚本集里，<code class="prettyprint">myApp</code>必须是下列其中之一：</p>

<ul>
<li>一个.apk 或者.zip 档的本地绝对路径</li>
<li>一个包含着你的.apk档的zip压缩档的url</li>
<li>appium安装根目录下的一个示例app的路径</li>
</ul>

<p><code class="prettyprint">myAppPackage</code> 必须是你的应用的java package，例如, <code class="prettyprint">com.example.android.myApp</code>。</p>

<p><code class="prettyprint">myAppActivity</code> 必须是你的希望测试的Android activity, 例如, <code class="prettyprint">MainActivity</code>。</p>

<p>在你选择的WebDriver库里，设定remote session使用上述的环境参数然后使用端口4723来连接本地服务器(或者是使用你在Appium启动时所设定的任意端口)。现在你已经设置完成了！</p>

<h2 id="用appium测试你的app-(android-设备-&lt;-4.2,-以及混合app测试)">用Appium测试你的app (Android 设备 &lt; 4.2, 以及混合app测试)</h2>

<p>低于4.2版本的Android设备(API Level 17) 没有安装 Google 的<a href="http://developer.android.com/tools/help/uiautomator/index.html">UiAutomator framework</a>.下面的范例是早期Appium在这些设备上的测试方法。对于早期的设备以及使用混合模式(webview-based)制作的apps, Appium 包含了另一种自动化测试工具<a href="http://selendroid.io/">Selendroid</a>。</p>

<p>要使用Selendroid, 只需要在之前提到的环境参数上稍作修改即可，添加 <code class="prettyprint">automationName</code> 参数并指定Seledroid作为测试工具。通常你还需要在你的activity名称前加上<code class="prettyprint">.</code> (如：在<code class="prettyprint">appActivity</code>参数中使用<code class="prettyprint">.MainActivity</code> 而不是 <code class="prettyprint">MainActivity</code>) :</p>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="p">{</span>
    <span class="na">automationName</span><span class="p">:</span> <span class="s1">'Selendroid'</span><span class="p">,</span>
    <span class="na">platformName</span><span class="p">:</span> <span class="s1">'Android'</span><span class="p">,</span>
    <span class="na">platformVersion</span><span class="p">:</span> <span class="s1">'2.3'</span><span class="p">,</span>
    <span class="na">deviceName</span><span class="p">:</span> <span class="s1">'Android Emulator'</span><span class="p">,</span>
    <span class="na">app</span><span class="p">:</span> <span class="nx">myApp</span><span class="p">,</span>
    <span class="na">appPackage</span><span class="p">:</span> <span class="s1">'com.mycompany.package'</span><span class="p">,</span>
    <span class="na">appActivity</span><span class="p">:</span> <span class="s1">'.MainActivity'</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># python</span>
<span class="p">{</span>
    <span class="s">'automationName'</span><span class="p">:</span> <span class="s">'Selendroid'</span><span class="p">,</span>
    <span class="s">'platformName'</span><span class="p">:</span> <span class="s">'Android'</span><span class="p">,</span>
    <span class="s">'platformVersion'</span><span class="p">:</span> <span class="s">'2.3'</span><span class="p">,</span>
    <span class="s">'deviceName'</span><span class="p">:</span> <span class="s">'Android Emulator'</span><span class="p">,</span>
    <span class="s">'app'</span><span class="p">:</span> <span class="n">myApp</span><span class="p">,</span>
    <span class="s">'appPackage'</span><span class="p">:</span> <span class="s">'com.mycompany.package'</span><span class="p">,</span>
    <span class="s">'appActivity'</span><span class="p">:</span> <span class="s">'.MainActivity'</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight php"><code>// php
public static $browsers = array(
    array(
        'desiredCapabilities' =&gt; array(
            'automationName' =&gt; 'Selendroid',
            'platformName' =&gt; 'Android',
            'platformVersion' =&gt; '2.3',
            'deviceName' =&gt; 'Android Emulator',
            'app' =&gt; $myApp,
            'appPackage' =&gt; 'com.mycompany.package',
            'appActivity'=&gt; '.MainActivity'
        )
    )
);
</code></pre>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">DesiredCapabilities</span> <span class="n">capabilities</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DesiredCapabilities</span><span class="o">();</span>
<span class="n">capabilities</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span><span class="n">MobileCapabilityType</span><span class="o">.</span><span class="na">AUTOMATION_NAME</span><span class="o">,</span> <span class="s">"Selendroid"</span><span class="o">);</span>
<span class="n">capabilities</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span><span class="n">MobileCapabilityType</span><span class="o">.</span><span class="na">PLATFORM_NAME</span><span class="o">,</span> <span class="s">"Android"</span><span class="o">);</span>
<span class="n">capabilities</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span><span class="n">MobileCapabilityType</span><span class="o">.</span><span class="na">PLATFORM_VERSION</span><span class="o">,</span> <span class="s">"2.3"</span><span class="o">);</span>
<span class="n">capabilities</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span><span class="n">MobileCapabilityType</span><span class="o">.</span><span class="na">DEVICE_NAME</span><span class="o">,</span> <span class="s">"Android Emulator"</span><span class="o">);</span>
<span class="n">capabilities</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span><span class="n">MobileCapabilityType</span><span class="o">.</span><span class="na">APP</span><span class="o">,</span> <span class="n">myApp</span><span class="o">);</span>
<span class="n">capabilities</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span><span class="n">MobileCapabilityType</span><span class="o">.</span><span class="na">APP_PACKAGE</span><span class="o">:</span> <span class="s">"com.mycompany.package"</span><span class="o">);</span>
<span class="n">capabilities</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span><span class="n">MobileCapabilityType</span><span class="o">.</span><span class="na">APP_ACTIVITY</span><span class="o">:</span> <span class="s">".MainActivity"</span><span class="o">);</span>
</code></pre>

<p>这样Appium就会启动 Selendroid 测试会话取代默认的测试会话。使用Selendroid的缺点是有时候它的API跟Appium非常不同。所以我们建议你在为你的旧设备或者混合app写测试脚本之前先仔细的阅读<a href="http://selendroid.io/native.html">Selendroid的说明文档</a>。</p>

<h1 id="appium-服务器参数">Appium 服务器参数</h1>

<p>使用方法:  <code class="prettyprint">node . [标志]</code></p>

<h2 id="服务器标志">
<span id="server-args.cn.md"></span>服务器标志</h2>

<p>所有的标志都是可选的，但是有一些标志需要组合在一起才能生效。</p>

<p class="expand_table"></p>

<table>
<thead>
<tr>
<th>标志</th>
<th>默认值</th>
<th>描述</th>
<th>例子</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="prettyprint">--shell</code></td>
<td>null</td>
<td>进入 REPL 模式</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">--localizable-strings-dir</code></td>
<td>en.lproj</td>
<td>IOS only: 定位 .strings所在目录的相对路径</td>
<td><code class="prettyprint">--localizable-strings-dir en.lproj</code></td>
</tr>
<tr>
<td><code class="prettyprint">--app</code></td>
<td>null</td>
<td>iOS: 基于模拟器编译的 app 的绝对路径或者设备目标的 bundle_id； Android: apk 文件的绝对路径<code class="prettyprint">--app /abs/path/to/my.app</code>
</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">--ipa</code></td>
<td>null</td>
<td>(IOS-only)  .ipa 文件的绝对路径</td>
<td><code class="prettyprint">--ipa /abs/path/to/my.ipa</code></td>
</tr>
<tr>
<td>
<code class="prettyprint">-U</code>, <code class="prettyprint">--udid</code>
</td>
<td>null</td>
<td>连接物理设备的唯一设备标识符</td>
<td><code class="prettyprint">--udid 1adsf-sdfas-asdf-123sdf</code></td>
</tr>
<tr>
<td>
<code class="prettyprint">-a</code>, <code class="prettyprint">--address</code>
</td>
<td>0.0.0.0</td>
<td>监听的 ip 地址</td>
<td><code class="prettyprint">--address 0.0.0.0</code></td>
</tr>
<tr>
<td>
<code class="prettyprint">-p</code>, <code class="prettyprint">--port</code>
</td>
<td>4723</td>
<td>监听的端口</td>
<td><code class="prettyprint">--port 4723</code></td>
</tr>
<tr>
<td>
<code class="prettyprint">-ca</code>, <code class="prettyprint">--callback-address</code>
</td>
<td>null</td>
<td>回调IP地址 (默认: 相同的IP地址)</td>
<td><code class="prettyprint">--callback-address 127.0.0.1</code></td>
</tr>
<tr>
<td>
<code class="prettyprint">-cp</code>, <code class="prettyprint">--callback-port</code>
</td>
<td>null</td>
<td>回调端口号 (默认: 相同的端口号)</td>
<td><code class="prettyprint">--callback-port 4723</code></td>
</tr>
<tr>
<td>
<code class="prettyprint">-bp</code>, <code class="prettyprint">--bootstrap-port</code>
</td>
<td>4724</td>
<td>(Android-only) 连接设备的端口号</td>
<td><code class="prettyprint">--bootstrap-port 4724</code></td>
</tr>
<tr>
<td>
<code class="prettyprint">-k</code>, <code class="prettyprint">--keep-artifacts</code>
</td>
<td>false</td>
<td>弃用，无效。trace信息现在保留tmp目录下，每次运行前会清除该目录中的信息。 也可以参考 –trace-dir 。</td>
<td></td>
</tr>
<tr>
<td>
<code class="prettyprint">-r</code>, <code class="prettyprint">--backend-retries</code>
</td>
<td>3</td>
<td>(iOS-only) 遇到 crash 或者 超时，Instrument 重新启动的次数。</td>
<td><code class="prettyprint">--backend-retries 3</code></td>
</tr>
<tr>
<td><code class="prettyprint">--session-override</code></td>
<td>false</td>
<td>允许 session 被覆盖 (冲突的话)</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">--full-reset</code></td>
<td>false</td>
<td>(iOS) 删除整个模拟器目录。 (Android) 通过卸载应用（而不是清除数据）重置应用状态。在 Android 上，session 完成后也会删除应用。</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">--no-reset</code></td>
<td>false</td>
<td>session 之间不重置应用状态 (iOS: 不删除应用的 plist 文件； Android: 在创建一个新的 session 前不删除应用。)</td>
<td></td>
</tr>
<tr>
<td>
<code class="prettyprint">-l</code>, <code class="prettyprint">--pre-launch</code>
</td>
<td>false</td>
<td>在第一个 session 前，预启动应用 (iOS 需要 –app 参数，Android 需要 –app-pkg 和 –app-activity)</td>
<td></td>
</tr>
<tr>
<td>
<code class="prettyprint">-lt</code>, <code class="prettyprint">--launch-timeout</code>
</td>
<td>90000</td>
<td>(iOS-only) 等待 Instruments 启动的时间</td>
<td></td>
</tr>
<tr>
<td>
<code class="prettyprint">-g</code>, <code class="prettyprint">--log</code>
</td>
<td>null</td>
<td>将日志输出到指定文件</td>
<td><code class="prettyprint">--log /path/to/appium.log</code></td>
</tr>
<tr>
<td><code class="prettyprint">--log-level</code></td>
<td>debug</td>
<td>日志级别; 默认 (console[:file]): debug[:debug]</td>
<td><code class="prettyprint">--log-level debug</code></td>
</tr>
<tr>
<td><code class="prettyprint">--log-timestamp</code></td>
<td>false</td>
<td>在终端输出里显示时间戳</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">--local-timezone</code></td>
<td>false</td>
<td>使用本地时间戳</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">--log-no-colors</code></td>
<td>false</td>
<td>不在终端输出中显示颜色</td>
<td></td>
</tr>
<tr>
<td>
<code class="prettyprint">-G</code>, <code class="prettyprint">--webhook</code>
</td>
<td>null</td>
<td>同时发送日志到 HTTP 监听器</td>
<td><code class="prettyprint">--webhook localhost:9876</code></td>
</tr>
<tr>
<td><code class="prettyprint">--native-instruments-lib</code></td>
<td>false</td>
<td>(IOS-only) iOS 内建了一个怪异的不可能避免的延迟。我们在 Appium 里修复了它。如果你想用原来的，你可以使用这个参数。</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">--app-pkg</code></td>
<td>null</td>
<td>(Android-only) 你要运行的apk的java包。 (例如， com.example.android.myApp)</td>
<td><code class="prettyprint">--app-pkg com.example.android.myApp</code></td>
</tr>
<tr>
<td><code class="prettyprint">--app-activity</code></td>
<td>null</td>
<td>(Android-only) 打开应用时，启动的 Activity 的名字(比如， MainActivity)</td>
<td><code class="prettyprint">--app-activity MainActivity</code></td>
</tr>
<tr>
<td><code class="prettyprint">--app-wait-package</code></td>
<td>false</td>
<td>(Android-only) 你想等待的 Activity 的包名。(比如， com.example.android.myApp)</td>
<td><code class="prettyprint">--app-wait-package com.example.android.myApp</code></td>
</tr>
<tr>
<td><code class="prettyprint">--app-wait-activity</code></td>
<td>false</td>
<td>(Android-only) 你想等待的 Activity 名字(比如， SplashActivity)</td>
<td><code class="prettyprint">--app-wait-activity SplashActivity</code></td>
</tr>
<tr>
<td><code class="prettyprint">--android-coverage</code></td>
<td>false</td>
<td>(Android-only) 完全符合条件的 instrumentation 类。 作为命令 adb shell am instrument -e coverage true -w 的 -w 的参数</td>
<td><code class="prettyprint">--android-coverage com.my.Pkg/com.my.Pkg.instrumentation.MyInstrumentation</code></td>
</tr>
<tr>
<td><code class="prettyprint">--avd</code></td>
<td>null</td>
<td>(Android-only) 要启动的 avd 的名字</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">--avd-args</code></td>
<td>null</td>
<td>(Android-only) 添加额外的参数给要启动avd</td>
<td><code class="prettyprint">--avd-args -no-snapshot-load</code></td>
</tr>
<tr>
<td><code class="prettyprint">--device-ready-timeout</code></td>
<td>5</td>
<td>(Android-only) 等待设备准备好的时间，以秒为单位</td>
<td><code class="prettyprint">--device-ready-timeout 5</code></td>
</tr>
<tr>
<td><code class="prettyprint">--safari</code></td>
<td>false</td>
<td>(IOS-Only) 使用 Safari 应用</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">--device-name</code></td>
<td>null</td>
<td>待使用的移动设备名字</td>
<td><code class="prettyprint">--device-name iPhone Retina (4-inch), Android Emulator</code></td>
</tr>
<tr>
<td><code class="prettyprint">--platform-name</code></td>
<td>null</td>
<td>移动平台的名称: iOS, Android, or FirefoxOS</td>
<td><code class="prettyprint">--platform-name iOS</code></td>
</tr>
<tr>
<td><code class="prettyprint">--platform-version</code></td>
<td>null</td>
<td>移动平台的版本</td>
<td><code class="prettyprint">--platform-version 7.1</code></td>
</tr>
<tr>
<td><code class="prettyprint">--automation-name</code></td>
<td>null</td>
<td>自动化工具的名称: Appium or Selendroid</td>
<td><code class="prettyprint">--automation-name Appium</code></td>
</tr>
<tr>
<td><code class="prettyprint">--browser-name</code></td>
<td>null</td>
<td>移动浏览器的名称: Safari or Chrome</td>
<td><code class="prettyprint">--browser-name Safari</code></td>
</tr>
<tr>
<td>
<code class="prettyprint">--default-device</code>, <code class="prettyprint">-dd</code>
</td>
<td>false</td>
<td>(IOS-Simulator-only) 使用instruments自己启动的默认模拟器</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">--force-iphone</code></td>
<td>false</td>
<td>(IOS-only) 无论应用要用什么模拟器，强制使用 iPhone 模拟器</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">--force-ipad</code></td>
<td>false</td>
<td>(IOS-only)  无论应用要用什么模拟器，强制使用 iPad 模拟器</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">--language</code></td>
<td>null</td>
<td>iOS / Android 模拟器的语言</td>
<td><code class="prettyprint">--language en</code></td>
</tr>
<tr>
<td><code class="prettyprint">--locale</code></td>
<td>null</td>
<td>Locale for the iOS simulator / Android Emulator</td>
<td><code class="prettyprint">--locale en_US</code></td>
</tr>
<tr>
<td><code class="prettyprint">--calendar-format</code></td>
<td>null</td>
<td>(IOS-only) iOS 模拟器的日历格式</td>
<td><code class="prettyprint">--calendar-format gregorian</code></td>
</tr>
<tr>
<td><code class="prettyprint">--orientation</code></td>
<td>null</td>
<td>(IOS-only) 初始化请求时，使用 LANDSCAPE (横屏) 或者 PORTRAIT (竖屏)</td>
<td><code class="prettyprint">--orientation LANDSCAPE</code></td>
</tr>
<tr>
<td><code class="prettyprint">--tracetemplate</code></td>
<td>null</td>
<td>(IOS-only) 指定 Instruments 使用的 tracetemplate 文件</td>
<td><code class="prettyprint">--tracetemplate /Users/me/Automation.tracetemplate</code></td>
</tr>
<tr>
<td><code class="prettyprint">--show-sim-log</code></td>
<td>false</td>
<td>(IOS-only) 如果设置了， iOS 模拟器的日志会写到终端上来</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">--show-ios-log</code></td>
<td>false</td>
<td>(IOS-only) 如果设置了， iOS 系统的日志会写到终端上来</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">--nodeconfig</code></td>
<td>null</td>
<td>指定 JSON 格式的配置文件 ，用来在 selenium grid 里注册 appiumd</td>
<td><code class="prettyprint">--nodeconfig /abs/path/to/nodeconfig.json</code></td>
</tr>
<tr>
<td>
<code class="prettyprint">-ra</code>, <code class="prettyprint">--robot-address</code>
</td>
<td>0.0.0.0</td>
<td>robot 的 ip 地址</td>
<td><code class="prettyprint">--robot-address 0.0.0.0</code></td>
</tr>
<tr>
<td>
<code class="prettyprint">-rp</code>, <code class="prettyprint">--robot-port</code>
</td>
<td>-1</td>
<td>robot 的端口地址</td>
<td><code class="prettyprint">--robot-port 4242</code></td>
</tr>
<tr>
<td><code class="prettyprint">--selendroid-port</code></td>
<td>8080</td>
<td>用来和 Selendroid 交互的本地端口</td>
<td><code class="prettyprint">--selendroid-port 8080</code></td>
</tr>
<tr>
<td><code class="prettyprint">--chromedriver-port</code></td>
<td>9515</td>
<td>ChromeDriver运行的端口</td>
<td><code class="prettyprint">--chromedriver-port 9515</code></td>
</tr>
<tr>
<td><code class="prettyprint">--chromedriver-executable</code></td>
<td>null</td>
<td>ChromeDriver 可执行文件的完整路径</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">--use-keystore</code></td>
<td>false</td>
<td>(Android-only) 设置签名 apk 的 keystore</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">--keystore-path</code></td>
<td>(Android-only) keystore 的路径</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">--keystore-password</code></td>
<td>android</td>
<td>(Android-only) keystore 的密码</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">--key-alias</code></td>
<td>androiddebugkey</td>
<td>(Android-only) Key 的别名</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">--key-password</code></td>
<td>android</td>
<td>(Android-only) Key 的密码</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">--show-config</code></td>
<td>false</td>
<td>打印 Appium 服务器的配置信息，然后退出</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">--no-perms-check</code></td>
<td>false</td>
<td>跳过Appium对是否可以读/写必要文件的检查</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">--command-timeout</code></td>
<td>60</td>
<td>默认所有会话的接收命令超时时间 (在超时时间内没有接收到新命令，自动关闭会话)。 会被新的超时时间覆盖</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">--keep-keychains</code></td>
<td>false</td>
<td>(iOS) 当 Appium 启动或者关闭的时候，是否保留 keychains (Library/Keychains)</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">--strict-caps</code></td>
<td>false</td>
<td>如果所选设备是appium不承认的有效设备，会导致会话失败</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">--isolate-sim-device</code></td>
<td>false</td>
<td>Xcode 6存在一个bug，那就是一些平台上如果其他模拟器设备先被删除时某个特定的模拟器只能在没有任何错误的情况下被建立。这个选项导致了Appium不得不删除除了正在使用设备以外其他所有的设备。请注意这是永久性删除，你可以使用simctl或xcode管理被Appium使用的设备类别。</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">--tmp</code></td>
<td>null</td>
<td>可以被Appium用来管理临时文件的目录（绝对路径），比如存放需要移动的内置iOS应用程序。 默认的变量为 <code class="prettyprint">APPIUM_TMP_DIR</code> ，在 *nix/Mac 为 <code class="prettyprint">/tmp</code> 在windows上使用环境便令 <code class="prettyprint">TEMP</code> 设定的目录。</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">--trace-dir</code></td>
<td>null</td>
<td>用于保存iOS instruments trace的 appium 目录，是绝对路径， 默认为 <tmp dir>/appium-instruments</tmp>
</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">--intent-action</code></td>
<td>android.intent.action.MAIN</td>
<td>(Android-only) 用于启动 activity 的intent action</td>
<td><code class="prettyprint">--intent-action android.intent.action.MAIN</code></td>
</tr>
<tr>
<td><code class="prettyprint">--intent-category</code></td>
<td>android.intent.category.LAUNCHER</td>
<td>(Android-only) 用于启动 activity 的intent category</td>
<td><code class="prettyprint">--intent-category android.intent.category.APP_CONTACTS</code></td>
</tr>
<tr>
<td><code class="prettyprint">--intent-flags</code></td>
<td>0x10200000</td>
<td>(Android-only) 启动 activity 的标志</td>
<td><code class="prettyprint">--intent-flags 0x10200000</code></td>
</tr>
<tr>
<td><code class="prettyprint">--intent-args</code></td>
<td>null</td>
<td>(Android-only) 启动 activity 时附带额外的 intent 参数</td>
<td><code class="prettyprint">--intent-args 0x10200000</code></td>
</tr>
<tr>
<td><code class="prettyprint">--suppress-adb-kill-server</code></td>
<td>false</td>
<td>(Android-only) 如果被设定，阻止Appium杀掉adb实例。</td>
<td></td>
</tr>
</tbody>
</table>

<h2 id="移动手势的自动化">
<span id="touch-actions.cn.md"></span>移动手势的自动化</h2>

<p>虽然Selenium WebDriver的规范支持数种手机交互的方式，但它的参数并不能简单地映射到底层设备使用的自动化函数 (像在iOS上的UIAutomation) 。为此，Appium在规范的最新版本中定义了新的触摸操作/多点触控 API
(<a href="https://dvcs.w3.org/hg/webdriver/raw-file/tip/webdriver-spec.html#multiactions-1">https://dvcs.w3.org/hg/webdriver/raw-file/tip/webdriver-spec.html#multiactions-1</a>)。
注意，这跟在早期版本中使用原始JSON Wire Protocol 的触摸操作 API不同。</p>

<p>这些API可以让你使用多个驱动来建立任意手势。请参阅对应语言的Appium客户端文档，就可以找到使用这些API的例子。</p>

<h3 id="触摸操作/多点触控-api的概述">触摸操作/多点触控 API的概述</h3>

<h3 id="触摸操作-(touchaction)">触摸操作 (TouchAction)</h3>

<p><em>TouchAction</em> 对象包含一连串的事件。</p>

<p>在所有的appium客户端库中，触摸对象创建并给出一连串的事件。</p>

<p>规范中的可用事件有：
 * 短按 (press) 
 * 释放 (release) 
 * 移动到 (moveTo) 
 * 点击 (tap) 
 * 等待 (wait) 
 * 长按 (longPress) 
 * 取消 (cancel) 
 * 执行 (perform) </p>

<p>这里有一个通过伪代码创建动作的例子：</p>

<p class="centercode"><code>TouchAction().press(el0).moveTo(el1).release()</code></p>

<p>上述模拟用户按下一个元素，滑动他的手指到另一个位置，然后从屏幕上释放其手指。</p>

<p>Appium按顺序执行这些事件。你可以添加一个 <code class="prettyprint">wait</code> 事件来控制相应手势的时间。</p>

<p>appium客户端库有不同的方式来实现上述例子，比如：你可以传递一个坐标值或一个元素给 <code class="prettyprint">moveTo</code> 事件。同时传递坐标和元素，会将坐标和元素对应起来，但这不是绝对的。</p>

<p>调用 <code class="prettyprint">perform</code> 事件发送整个事件序列给appium，从而使触摸手势在设备上运行。</p>

<p>Appium客户端还允许人们直接通过驱动程序对象执行触摸操作, 而不是调用触摸操作对象的<code class="prettyprint">perform</code>事件。</p>

<p>在伪代码中，以下两个是等价的：</p>

<p class="centercode"><code>TouchAction().tap(el).perform()

driver.perform(TouchAction().tap(el))</code></p>

<h3 id="多点触控-(multitouch)">多点触控 (MultiTouch)</h3>

<p><em>MultiTouch</em> 对象是触摸操作的集合。</p>

<p>多点触控手势只有两个方法，添加 (<code class="prettyprint">add</code>) 和执行 (<code class="prettyprint">perform</code>) 。</p>

<p><code class="prettyprint">add</code> 用于将不同的触摸操作添加到一个多点触控中。</p>

<p>当 <code class="prettyprint">perform</code> 被调用的时候，所有被添加到多点触摸中的触摸事件会被发送到appium并且被执行，就像它们同时发生一样。Appium会执行“触摸事件”中的第一个事件，然后第二个，以此类推。</p>

<p>用两只手指点击的代码示例：</p>

<p class="centercode"><code>action0 = TouchAction().tap(el)
action1 = TouchAction().tap(el)
MultiAction().add(action0).add(action1).perform()</code></p>

<h3 id="缺陷和解决方法">缺陷和解决方法</h3>

<p>不幸的是有一个缺陷存在于iOS的7.x的模拟器上，ScrollViews无法识别由UIAutomation创建的手势 (在iOS上Appium使用的是UIAutomation) 。 为了实现此功能，我们已经提供了新的函数， <code class="prettyprint">scroll</code>, 在大部分情况下可以让你实现跟ScrollView一样的功能！</p>

<p><strong>滚动</strong></p>

<p>要使用这特殊的功能，我们重写了driver中的 <code class="prettyprint">execute</code> 和
<code class="prettyprint">executeScript</code> 方法。 可以通过在命令前加 <code class="prettyprint">mobile:</code> 的前缀来使用滚动。
请参见下面的例子：</p>

<ul>
<li><strong>WD.js:</strong></li>
</ul>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="c1">// 把视图往下滑动</span>
<span class="nx">driver</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="s2">"mobile: scroll"</span><span class="p">,</span> <span class="p">[{</span><span class="na">direction</span><span class="p">:</span> <span class="s1">'down'</span><span class="p">}])</span>
<span class="c1">// 继续测试</span>
</code></pre>

<ul>
<li><strong>Java:</strong></li>
</ul>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="n">JavascriptExecutor</span> <span class="n">js</span> <span class="o">=</span> <span class="o">(</span><span class="n">JavascriptExecutor</span><span class="o">)</span> <span class="n">driver</span><span class="o">;</span>
<span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">scrollObject</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;();</span>
<span class="n">scrollObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"direction"</span><span class="o">,</span> <span class="s">"down"</span><span class="o">);</span>
<span class="n">scrollObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"element"</span><span class="o">,</span> <span class="o">((</span><span class="n">RemoteWebElement</span><span class="o">)</span> <span class="n">element</span><span class="o">).</span><span class="na">getId</span><span class="o">());</span>
<span class="n">js</span><span class="o">.</span><span class="na">executeScript</span><span class="o">(</span><span class="s">"mobile: scroll"</span><span class="o">,</span> <span class="n">scrollObject</span><span class="o">);</span>
</code></pre>

<p><strong>滑块的自动化</strong></p>

<p><strong>iOS</strong></p>

<ul>
<li><strong>Java</strong></li>
</ul>
<pre class="highlight java"><code><span class="c1">// java</span>
<span class="c1">// 滑动值使用0到1之间的数字以字符串的形式表示</span>
<span class="c1">// 例如，“0.1”代表10％，“1.0”代表100％</span>
<span class="n">WebElement</span> <span class="n">slider</span> <span class="o">=</span>  <span class="n">driver</span><span class="o">.</span><span class="na">findElement</span><span class="o">(</span><span class="n">By</span><span class="o">.</span><span class="na">xpath</span><span class="o">(</span><span class="s">"//window[1]/slider[1]"</span><span class="o">));</span>
<span class="n">slider</span><span class="o">.</span><span class="na">sendKeys</span><span class="o">(</span><span class="s">"0.1"</span><span class="o">);</span>
</code></pre>

<p><strong>Android</strong></p>

<p>与Android上的滑块进行交互的最佳方式是用触摸操作 (TouchActions) 。</p>

<h2 id="uiautomator-uiselector">
<span id="uiautomator_uiselector.cn.md"></span>uiautomator UiSelector</h2>

<p>Appium可以使用 <a href="http://developer.android.com/tools/help/uiautomator/UiSelector.html">UiSelectors</a>
进行元素查找，同时也支持<a href="http://developer.android.com/tools/help/uiautomator/UiScrollable.html">UiScrollable</a>
.</p>

<p>注意：根据索引 (index) 进行查找并不可靠，请使用实例 (instance) 代替. 下面的示范是用Ruby语言编写的、针对 api demo (这是一个 appium 测试用的应用) 的实例。</p>

<p>翻译者备注：UiSelectors 和 UiScrollable 均是 Android UiAutomator 中的对象，因此以下用法仅适用于 Android 。</p>

<p>找到第一个文本控件 (TextView) 。</p>
<pre class="highlight ruby"><code><span class="c1"># ruby</span>
<span class="n">first_textview</span> <span class="o">=</span> <span class="n">find_element</span><span class="p">(</span><span class="ss">:uiautomator</span><span class="p">,</span> <span class="s1">'new UiSelector().className("android.widget.TextView").instance(0)'</span><span class="p">);</span>
</code></pre>

<p>根据文本 (text) 找到第一个元素。</p>
<pre class="highlight ruby"><code><span class="c1"># ruby</span>
<span class="n">first_text</span> <span class="o">=</span> <span class="n">find_element</span><span class="p">(</span><span class="ss">:uiautomator</span><span class="p">,</span> <span class="s1">'new UiSelector().text("Animation")'</span><span class="p">)</span>
<span class="n">first_text</span><span class="p">.</span><span class="nf">text</span> <span class="c1"># "Animation"</span>
</code></pre>

<p>找到第一个可滚动的元素， 然后找到文本是 “Tabs” 的文本控件。
“Tabs” 元素就是将要滚动到的控件。</p>
<pre class="highlight ruby"><code><span class="c1"># ruby</span>
<span class="n">element</span> <span class="o">=</span> <span class="n">find_element</span><span class="p">(</span><span class="ss">:uiautomator</span><span class="p">,</span> <span class="s1">'new UiScrollable(new UiSelector().scrollable(true).instance(0)).getChildByText(new UiSelector().className("android.widget.TextView"), "Tabs")'</span><span class="p">)</span>
</code></pre>

<p>scrollIntoView 是一个特例，会返回滚动到指定控件的元素。
scrollIntoView 对任何的 UiSelector 都可以执行滚动操作。</p>
<pre class="highlight ruby"><code><span class="c1"># ruby</span>
<span class="n">element</span> <span class="o">=</span> <span class="n">find_element</span><span class="p">(</span><span class="ss">:uiautomator</span><span class="p">,</span> <span class="s1">'new UiScrollable(new UiSelector().scrollable(true).instance(0)).scrollIntoView(new UiSelector().text("WebView").instance(0));'</span><span class="p">)</span>
<span class="n">element</span><span class="p">.</span><span class="nf">text</span> <span class="c1"># "WebView"</span>
</code></pre>

<h2 id="多语言支持">
<span id="unicode.cn.md"></span>多语言支持</h2>

<p>程序处理非拉丁字符时存在一个的问题：对于带音标的字符，存在多种编码形式。例如，对于<code class="prettyprint">é</code>这样的字符，有两种编码方式：一种是单独的字符<code class="prettyprint">é</code>（Unicode中的<code class="prettyprint">LATIN SMALL LETTER E WITH ACUTE</code>(带有音标的小写的拉丁字母'E'))，另一种是音标在字符后边(<code class="prettyprint">COMBINING ACUTE ACCENT</code>(字符和音标的组合))。为了解决这个问题，存在一个<code class="prettyprint">normalization</code> (标准化) 方法，让<a href="http://www.unicode.org/reports/tr15/">“每个字符都有一个唯一的二进制表示”</a>。</p>

<p>幸运的是，对ASCII字符（例如 不需要进行标准化的字符）进行标准化将不会产生任何变化，并且多次进行标准化
操作也不会发生额外的变化。因此，可以对所有字符使用标准化函数而不用担心产生不良影响。</p>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="kd">var</span> <span class="nx">unorm</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'unorm'</span><span class="p">);</span>

<span class="s1">'some ASCII text'</span> <span class="o">===</span> <span class="nx">unorm</span><span class="p">.</span><span class="nx">nfd</span><span class="p">(</span><span class="s1">'some ASCII text'</span><span class="p">);</span>
<span class="nx">unorm</span><span class="p">.</span><span class="nx">nfd</span><span class="p">(</span><span class="s1">'Adélaïde Hervé'</span><span class="p">)</span> <span class="o">===</span> <span class="nx">unorm</span><span class="p">.</span><span class="nx">nfd</span><span class="p">(</span><span class="nx">unorm</span><span class="p">.</span><span class="nx">nfd</span><span class="p">(</span><span class="s1">'Adélaïde Hervé'</span><span class="p">));</span>
</code></pre>

<p>在测试的时候遇到Unicode字符，你需要对字符进行标准化，确保期望的值和接收到的值一致。
有很多方法可以用来进行标准化，所以你要确保执行的是同样的方法！</p>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="kd">var</span> <span class="nx">unorm</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'unorm'</span><span class="p">);</span>
<span class="nx">driver</span>
  <span class="p">.</span><span class="nx">elementByAccessibilityId</span><span class="p">(</span><span class="s1">'find'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">text</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">txt</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">unorm</span><span class="p">.</span><span class="nx">nfd</span><span class="p">(</span><span class="nx">txt</span><span class="p">).</span><span class="nx">should</span><span class="p">.</span><span class="nx">be</span><span class="p">(</span><span class="nx">unorm</span><span class="p">.</span><span class="nx">nfd</span><span class="p">(</span><span class="s2">"é Œ ù ḍ"</span><span class="p">));</span>
    <span class="p">});</span>
</code></pre>

<p>一个由不同unicode文本编码导致的问题的标志是断言失败但报告却显示两个看起来一模一样的字符串：</p>
<pre class="highlight shell"><code>AssertionError: expected <span class="s1">'François Gérard'</span> to deeply equal <span class="s1">'François Gérard'</span>
      + expected - actual

      +<span class="s2">"François Gérard"</span>
      -<span class="s2">"François Gérard"</span>
</code></pre>

<p>当发生只因编码导致的问题时，输出<em>看上去</em>一样。从标准的角度，它们的编码应该也和它们看上去那样相同。</p>

<h3 id="查找器-(finder)">查找器 (Finder)</h3>

<p>需要被查找的字符也应该需要标准化。比如，你在一个iOS的app上有一个叫做<code class="prettyprint">Найти</code>的按钮，你也应该在find命令中标准化它。</p>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="kd">var</span> <span class="nx">unorm</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'unorm'</span><span class="p">);</span>
<span class="nx">driver</span>
  <span class="p">.</span><span class="nx">findElementByXPath</span><span class="p">(</span><span class="nx">unorm</span><span class="p">.</span><span class="nx">nfd</span><span class="p">(</span><span class="s2">"//UIAButton[@name='Найти']"</span><span class="p">))</span>
    <span class="p">.</span><span class="nx">should</span><span class="p">.</span><span class="nx">eventually</span><span class="p">.</span><span class="nx">exist</span><span class="p">;</span>
</code></pre>

<p>否则这个按钮可能无法被找到。</p>

<h3 id="文本框-(text-field)">文本框 (Text Field)</h3>

<p>默认情况下，iOS和Android的自动化工具都不支持向输入框输入非ASCII字符。</p>

<h4 id="ios">iOS</h4>

<p>Appium 完全绕过键盘直接向iOS设备的输入框发送非ASCII字符。虽然这让这些文本在测试中被成功输入，但必须记住由键盘输入触发的业务逻辑将不会被测试到。</p>

<p>像上边说的一样，断言收到的文本前应该先标准化它。</p>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="kd">var</span> <span class="nx">unorm</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'unorm'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">testText</span> <span class="o">=</span> <span class="nx">unorm</span><span class="p">.</span><span class="nx">nfd</span><span class="p">(</span><span class="s2">"é Œ ù ḍ"</span><span class="p">);</span>
<span class="nx">driver</span>
  <span class="p">.</span><span class="nx">elementsByClassName</span><span class="p">(</span><span class="s1">'UIATextField'</span><span class="p">).</span><span class="nx">at</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">sendKeys</span><span class="p">(</span><span class="nx">testText</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">text</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">should</span><span class="p">.</span><span class="nx">become</span><span class="p">(</span><span class="nx">testText</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">nodeify</span><span class="p">(</span><span class="nx">done</span><span class="p">);</span>
</code></pre>

<h4 id="android">Android</h4>

<p>通过下载并安装一个<a href="https://github.com/appium/io.appium.android.ime">特殊键盘</a> ， Android 可以支持输入 Unicode 字符，这个输入法允许文本通过ASCII在Appium和被测应用之间进行通讯。</p>

<p>为了使用这个功能，将<code class="prettyprint">unicodeKeyboard</code>设置为<code class="prettyprint">true</code>。如果想要键盘设置在测试完成后自动回到原始状态，
将<code class="prettyprint">resetKeyboard</code>设置为<code class="prettyprint">true</code>。否则Appium测试结束后，Appium的Unicode键盘仍然会被激活。</p>

<p>翻译备注：这个Unicode键盘并非虚拟键盘，在界面上不会显示出来，所以要进行其他类型的测试必须切换回其他输入法。</p>

<p>测试时可以通过<code class="prettyprint">send_keys</code>向输入框输入Unicode字符。</p>
<pre class="highlight javascript"><code><span class="c1">// javascript</span>
<span class="kd">var</span> <span class="nx">desired</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">app</span><span class="p">:</span> <span class="s1">'/path/to/app'</span><span class="p">,</span>
  <span class="na">deviceName</span><span class="p">:</span> <span class="s1">'Android Emulator'</span><span class="p">,</span>
  <span class="na">deviceVersion</span><span class="p">:</span> <span class="s1">'4.4'</span><span class="p">,</span>
  <span class="na">platformName</span><span class="p">:</span> <span class="s1">'Android'</span><span class="p">,</span>
  <span class="na">unicodeKeyboard</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">resetKeyboard</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">testText</span> <span class="o">=</span> <span class="s1">'é Œ ù ḍ'</span><span class="p">;</span>
<span class="nx">driver</span>
  <span class="p">.</span><span class="nx">elementByClassName</span><span class="p">(</span><span class="s1">'android.widget.EditText'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">sendKeys</span><span class="p">(</span><span class="nx">testText</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">text</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">should</span><span class="p">.</span><span class="nx">eventually</span><span class="p">.</span><span class="nx">become</span><span class="p">(</span><span class="nx">testText</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">nodeify</span><span class="p">(</span><span class="nx">done</span><span class="p">);</span>
</code></pre>

<h1 id="advanced-concepts">Advanced Concepts</h1>

<h1 id="selenium-grid">Selenium Grid</h1>

<p>使用 <b>“–nodeconfig”</b> 服务器参数，你可以在本地 selenium grid 里注册你的 appium 服务器。</p>
<pre class="highlight shell"><code><span class="gp">&gt; </span>node . -V --nodeconfig /path/to/nodeconfig.json
</code></pre>

<p>在 node 的配置文件里，你需要定义 <b>“browserName”</b>，<b>“version”</b> 和 <b>“platform”</b>。
基于这些参数，selenium grid 会将你的测试定向到正确的设备上去。你还需要配置你的 <b>host</b> 详细信息和
<b>selenium grid</b> 的详细信息。你可以在 <a href="http://code.google.com/p/selenium/source/browse/java/server/src/org/openqa/grid/common/defaults/GridParameters.properties">这里</a> 找到详细的参数列表和描述信息。</p>

<p>一旦你启动了 appium 服务器并且在 grid 里注册了信息，你会在 grid 控制台发现你的设备：</p>

<p>“http://<b>&lt;grid-ip-adress&gt;</b>:<b>&lt;grid-port&gt;</b>/grid/console”</p>

<h2 id="grid-配置文件例子">
<span id="grid.cn.md"></span>Grid 配置文件例子</h2>
<pre class="highlight xml"><code>{
  "capabilities":
      [
        {
          "browserName": "<span class="nt">&lt;e.g._iPhone5_or_iPad4&gt;</span>",
          "version":"<span class="nt">&lt;version_of_iOS_e.g._6.1&gt;</span>",
          "maxInstances": 1,
          "platform":"<span class="nt">&lt;platform_e.g._MAC_or_ANDROID&gt;</span>"
        }
      ],
  "configuration":
  {
    "cleanUpCycle":2000,
    "timeout":30000,
    "proxy": "org.openqa.grid.selenium.proxy.DefaultRemoteProxy",
    "url":"http://<span class="nt">&lt;host_name_appium_server_or_ip-address_appium_server&gt;</span>:<span class="nt">&lt;appium_port&gt;</span>/wd/hub",
    "maxSession": 1,
    "register": true,
    "registerCycle": 5000,
    "hubPort": <span class="nt">&lt;grid_port&gt;</span>,
    "hubHost": "<span class="nt">&lt;Grid_host_name_or_grid_ip-address&gt;</span>"
  }
}
</code></pre>

<p>可以在 <a href="http://selenium.googlecode.com/git/docs/api/java/org/openqa/selenium/Platform.html">这里</a>查看有效的 platform 参数。
如果没有给出url、host和 port，配置会自动指向本地：whatever-port-Appium-started-on。
如果你的Appium服务和Selenium Grid服务没有运行在同一台机器上，为确保Selenium Grid连接正常，请在你的host &amp; url docs上使用外部其它名称或IP地址，而非localhost 和 127.0.0.1</p>

<h1 id="自动化混合应用">自动化混合应用</h1>

<p>Appium 其中一个理念就是你不能为了测试应用而修改应用。为了符合这个方法学，我们可以使用 Selenium 测试传统 web 应用的方法来测试混合 web 应用 (比如，iOS 应用里的元素 “UIWebView” )，这是有可能的。这里会有一些技术性的复杂，Appium 需要知道你是想测试原生部分呢还是web部分。幸运的是，我们还能遵守 WebDriver 的协议。</p>

<ul>
<li> <a href="#hybrid.cn.md">混合 iOS 应用</a>
</li>
<li> <a href="#hybrid.cn.md">混合 Android 应用</a>
</li>
</ul>

<h2 id="自动化混合-ios-应用">
<span id="hybrid.cn.md"></span>自动化混合 iOS 应用</h2>

<p>在你的 Appium 测试里，你需要以下几步来和 web 页面交涉：</p>

<ol>
<li> 前往到应用里 web 视图激活的部分。</li>
<li> 调用 <a href="http://code.google.com/p/selenium/wiki/JsonWireProtocol#/session/:sessionId/window_handles">GET session/:sessionId/window_handles</a>
</li>
<li> 这会返回一个我们能访问的 web 视图的 id 的列表。</li>
<li> 使用你想访问的这个 web 视图的 id 作为参数，调用 <a href="http://code.google.com/p/selenium/wiki/JsonWireProtocol#/session/:sessionId/window">POST session/:sessionId/window</a>
</li>
<li> (这会将你的 Appium session 放入一个模式， 在这个模式下，所有的命令都会被解释成自动化web视图而不是原生的部分。比如，当你运行 getElementByTagName，它会在 web 视图的 DOM 上操作，而不是返回 UIAElements。当然，一个 Webdriver 的方法只能在一个上下文中有意义，所以如果在错误的上下文，你会收到错误信息。)</li>
<li> 如果你想停止 web 视图的自动化，回到原生部分，你可以简单地使用 <code class="prettyprint">execute_script</code> 调用 <code class="prettyprint">"mobile: leaveWebView"</code> 方法来离开 web 层。</li>
</ol>

<h2 id="在-ios-真机上运行">在 iOS 真机上运行</h2>

<p>appium 使用一个远程调试器建立连接来实现和 web 视图的交互。当在模拟器上执行下面例子的时候，我们可以直接建立连接，因为模拟器和 appium 服务器在同一台机器上。</p>

<p>当在真机上运行用例时，appium 无法直接访问 web 视图，所以我们需要通过 USB 线缆来建立连接。我们使用 <a href="https://github.com/google/ios-webkit-debug-proxy">ios-webkit-debugger-proxy</a>建立连接。</p>

<p>使用 brew 安装最新的 ios-webkit-debug-proxy。在终端运行一下命令:</p>
<pre class="highlight shell"><code><span class="c"># 如果你没有安装 brew 的话，先安装 brew。</span>
<span class="gp">&gt; </span>ruby -e <span class="s2">"</span><span class="k">$(</span>curl -fsSL https://raw.github.com/mxcl/homebrew/go/install<span class="k">)</span><span class="s2">"</span>
<span class="gp">&gt; </span>brew update
<span class="gp">&gt; </span>brew install ios-webkit-debug-proxy
</code></pre>

<p>你也可以通过 git 克隆项目来自己安装最新版本：</p>
<pre class="highlight shell"><code><span class="c"># Please be aware that this will install the proxy with the latest code (and not a tagged version).</span>
<span class="gp">&gt; </span>git clone https://github.com/google/ios-webkit-debug-proxy.git
<span class="gp">&gt; </span><span class="nb">cd </span>ios-webkit-debug-proxy
<span class="gp">&gt; </span>./autogen.sh
<span class="gp">&gt; </span>./configure
<span class="gp">&gt; </span>make
<span class="gp">&gt; </span>sudo make install
</code></pre>

<p>一旦安装好了， 你就可以启动代理：</p>
<pre class="highlight shell"><code><span class="c"># 将udid替换成你的设备的udid。确保端口 27753 没有被占用</span>
<span class="c"># remote-debugger 将会使用这个端口。</span>
<span class="gp">&gt; </span>ios_webkit_debug_proxy -c 0e4b2f612b65e98c1d07d22ee08678130d345429:27753 -d
</code></pre>

<p><b>注意：</b> 这个 ios-webkit-debug-proxy 需要 <b>“web inspector”</b> 打开着以便建立连接。在 <b> settings &gt; safari &gt; advanced </b> 里打开它。请注意 web inspector <b>在 iOS6 时候加入的</b> 以前的版本没有。</p>

<h2 id="wd.js-code-example">Wd.js Code example</h2>
<pre class="highlight javascript"><code>  <span class="c1">// 假设我们已经有一个初始化好了的 `driver` 对象。</span>
  <span class="nx">driver</span><span class="p">.</span><span class="nx">elementByName</span><span class="p">(</span><span class="s1">'Web, Use of UIWebView'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">el</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 找到按钮，打开 web 视图</span>
    <span class="nx">el</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 引导到 UIWebView</span>
      <span class="nx">driver</span><span class="p">.</span><span class="nx">windowHandles</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">handles</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 得到能访问的视图列表。</span>
        <span class="nx">driver</span><span class="p">.</span><span class="nb">window</span><span class="p">(</span><span class="nx">handles</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 因为只有一个，所以选择第一个。</span>
          <span class="nx">driver</span><span class="p">.</span><span class="nx">elementsByCss</span><span class="p">(</span><span class="s1">'.some-class'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">els</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 通过 css 拿到元素。</span>
            <span class="nx">els</span><span class="p">.</span><span class="nx">length</span><span class="p">.</span><span class="nx">should</span><span class="p">.</span><span class="nx">be</span><span class="p">.</span><span class="nx">above</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="c1">// 肯定有元素。</span>
            <span class="nx">els</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">text</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">elText</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 得到第一个元素的文本。</span>
              <span class="nx">elText</span><span class="p">.</span><span class="nx">should</span><span class="p">.</span><span class="nx">eql</span><span class="p">(</span><span class="s2">"My very own text"</span><span class="p">);</span> <span class="c1">// 比较匹配文本。</span>
              <span class="nx">driver</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="s2">"mobile: leaveWebView"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 离开web视图上下文。</span>
                <span class="c1">// 如果你想的话，做一些原生应用的操作。</span>
                <span class="nx">driver</span><span class="p">.</span><span class="nx">quit</span><span class="p">();</span> <span class="c1">// 退出。</span>
              <span class="p">});</span>
            <span class="p">});</span>
          <span class="p">});</span>
        <span class="p">});</span>
      <span class="p">});</span>
    <span class="p">});</span>
  <span class="p">});</span>
</code></pre>

<ul>
<li>想看到具体的上下文，请看<a href="https://github.com/appium/appium/tree/master/sample-code/examples/node/hybrid.js">该node 的例子</a>
</li>
<li>*我们正在完善 web 视图下面的方法。<a href="http://appium.io/get-involved.html">加入我们！</a>
</li>
</ul>

<h2 id="wd.java-代码例子">Wd.java 代码例子</h2>
<pre class="highlight java"><code>  <span class="c1">//配置 webdriver 并启动 webview 应用。</span>
  <span class="n">DesiredCapabilities</span> <span class="n">desiredCapabilities</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DesiredCapabilities</span><span class="o">();</span>
  <span class="n">desiredCapabilities</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span><span class="s">"device"</span><span class="o">,</span> <span class="s">"iPhone Simulator"</span><span class="o">);</span>
  <span class="n">desiredCapabilities</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span><span class="s">"app"</span><span class="o">,</span> <span class="s">"http://appium.s3.amazonaws.com/WebViewApp6.0.app.zip"</span><span class="o">);</span>  
  <span class="n">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://127.0.0.1:4723/wd/hub"</span><span class="o">);</span>
  <span class="n">RemoteWebDriver</span> <span class="n">remoteWebDriver</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RemoteWebDriver</span><span class="o">(</span><span class="n">url</span><span class="o">,</span> <span class="n">desiredCapabilities</span><span class="o">);</span>

  <span class="c1">// 切换到最新的web视图</span>
  <span class="k">for</span><span class="o">(</span><span class="n">String</span> <span class="n">winHandle</span> <span class="o">:</span> <span class="n">remoteWebDriver</span><span class="o">.</span><span class="na">getWindowHandles</span><span class="o">()){</span>
    <span class="n">remoteWebDriver</span><span class="o">.</span><span class="na">switchTo</span><span class="o">().</span><span class="na">window</span><span class="o">(</span><span class="n">winHandle</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="c1">//在 guinea-pig 页面用 id 和 元素交互。</span>
  <span class="n">WebElement</span> <span class="n">div</span> <span class="o">=</span> <span class="n">remoteWebDriver</span><span class="o">.</span><span class="na">findElement</span><span class="o">(</span><span class="n">By</span><span class="o">.</span><span class="na">id</span><span class="o">(</span><span class="s">"i_am_an_id"</span><span class="o">));</span>
  <span class="n">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="s">"I am a div"</span><span class="o">,</span> <span class="n">div</span><span class="o">.</span><span class="na">getText</span><span class="o">());</span> <span class="c1">//验证得到的文本是否正确。</span>
  <span class="n">remoteWebDriver</span><span class="o">.</span><span class="na">findElement</span><span class="o">(</span><span class="n">By</span><span class="o">.</span><span class="na">id</span><span class="o">(</span><span class="s">"comments"</span><span class="o">)).</span><span class="na">sendKeys</span><span class="o">(</span><span class="s">"My comment"</span><span class="o">);</span> <span class="c1">//填写评论。</span>

  <span class="c1">//离开 webview，回到原生应用。</span>
  <span class="n">remoteWebDriver</span><span class="o">.</span><span class="na">executeScript</span><span class="o">(</span><span class="s">"mobile: leaveWebView"</span><span class="o">);</span>

  <span class="c1">//关闭应用。</span>
  <span class="n">remoteWebDriver</span><span class="o">.</span><span class="na">quit</span><span class="o">();</span>
</code></pre>

<h2 id="wd.rb-cucumber-的例子">Wd.rb cucumber 的例子</h2>
<pre class="highlight ruby"><code><span class="no">TEST_NAME</span> <span class="o">=</span> <span class="s2">"Example Ruby Test"</span>
<span class="no">SERVER_URL</span> <span class="o">=</span> <span class="s2">"http://127.0.0.1:4723/wd/hub"</span>
<span class="no">APP_PATH</span> <span class="o">=</span> <span class="s2">"https://dl.dropboxusercontent.com/s/123456789101112/ts_ios.zip"</span>
<span class="n">capabilities</span> <span class="o">=</span>
    <span class="p">{</span>
      <span class="s1">'browserName'</span> <span class="o">=&gt;</span> <span class="s1">'iOS 6.0'</span><span class="p">,</span>
      <span class="s1">'platform'</span> <span class="o">=&gt;</span> <span class="s1">'Mac 10.8'</span><span class="p">,</span>
      <span class="s1">'device'</span> <span class="o">=&gt;</span> <span class="s1">'iPhone Simulator'</span><span class="p">,</span>
      <span class="s1">'app'</span> <span class="o">=&gt;</span> <span class="no">APP_PATH</span><span class="p">,</span>
      <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="no">TEST_NAME</span>
    <span class="p">}</span>
<span class="vi">@driver</span> <span class="o">=</span> <span class="no">Selenium</span><span class="o">::</span><span class="no">WebDriver</span><span class="p">.</span><span class="nf">for</span><span class="p">(</span><span class="ss">:remote</span><span class="p">,</span> <span class="ss">:desired_capabilities</span> <span class="o">=&gt;</span> <span class="n">capabilities</span><span class="p">,</span> <span class="ss">:url</span> <span class="o">=&gt;</span> <span class="no">SERVER_URL</span><span class="p">)</span>

<span class="c1">## 这里切换到最近一个窗口是因为在我们的例子里这个窗口一直是 webview。其他的用例里，你需要自己指定。</span>
<span class="c1">## 运行 @driver.window_handles，查看 appium 的日志，找出到底哪个窗口是你要的，然后找出相关的数字。</span>
<span class="c1">## 然后用 @driver.switch_to_window(number)，切换过去。</span>

<span class="no">Given</span><span class="p">(</span><span class="sr">/^I switch to webview$/</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">webview</span> <span class="o">=</span> <span class="vi">@driver</span><span class="p">.</span><span class="nf">window_handles</span><span class="p">.</span><span class="nf">last</span>
  <span class="vi">@driver</span><span class="p">.</span><span class="nf">switch_to</span><span class="p">.</span><span class="nf">window</span><span class="p">(</span><span class="n">webview</span><span class="p">)</span>
<span class="k">end</span>

<span class="no">Given</span><span class="p">(</span><span class="sr">/^I switch out of webview$/</span><span class="p">)</span> <span class="k">do</span>
  <span class="vi">@driver</span><span class="p">.</span><span class="nf">execute_script</span><span class="p">(</span><span class="s2">"mobile: leaveWebView"</span><span class="p">)</span>
<span class="k">end</span>

<span class="c1"># 你可以使用 CSS 选择器在你的 webview 里来选择元素</span>

<span class="no">And</span><span class="p">(</span><span class="sr">/^I click a webview button $/</span><span class="p">)</span> <span class="k">do</span>
  <span class="vi">@driver</span><span class="p">.</span><span class="nf">find_element</span><span class="p">(</span><span class="ss">:css</span><span class="p">,</span> <span class="s2">".green_button"</span><span class="p">).</span><span class="nf">click</span>
<span class="k">end</span>
</code></pre>

<h3 id="用-ruby-调试-web-视图：">用 ruby 调试 web 视图：</h3>

<p>我在我的帮助类里创建了一个快速方法来定位web元素，无论它在哪一个窗口视图。
（这非常有帮助，特别是你的 webview 的 id 变化或者你用同一份代码来测试 Android 和 iOS。）
https://gist.github.com/feelobot/7309729</p>

<h2 id="自动化混合-android-应用">自动化混合 Android 应用</h2>

<p>Appium 通过 Chromedriver 内建混合应用支持。Appium 也可以使用 Selendroid 做为 4.4 之前的设备对 webview 支持的背部引擎。（你需要在 desired capability 里指定 <code class="prettyprint">"device": "selendroid"</code>）。然后：</p>

<ol>
<li> 前往你应用里 web 视图激活的部分。</li>
<li> 用 “WEBVIEW” 做窗口句柄调用 <a href="http://code.google.com/p/selenium/wiki/JsonWireProtocol#/session/:sessionId/window">POST session/:sessionId/window</a> ， 比如 <code class="prettyprint">driver.window("WEBVIEW")</code>。</li>
<li> (这会将你的 Appium session 放入一个模式， 在这个模式下，所有的命令都会被解释成自动化web视图而不是原生的部分。比如，当你运行 getElementByTagName，它会在 web 视图的 DOM 上操作，而不是返回 UIAElements。当然，一个 Webdriver 的方法只能在一个上下文中有意义，所以如果在错误的上下文，你会收到错误信息。)</li>
<li> 如果要停止web上下文里的自动化，回到原生部分的自动化，简单地使用 “NATIVE_APP” 调用 <code class="prettyprint">window</code> 方法。比如 <code class="prettyprint">driver.window("NATIVE_APP")</code>。</li>
</ol>

<p>注意：我们可以像上面说的，使用同样的策略。然而，Selendroid 使用 <code class="prettyprint">WEBVIEW</code>/<code class="prettyprint">NATIVE_APP</code> 窗口设置策略。 Appium 常规的混合支持也使用这种策略。</p>

<h2 id="wd.js-代码例子">Wd.js 代码例子</h2>
<pre class="highlight javascript"><code><span class="c1">// 假设我们已经初始化了一个 `driver` 实例。</span>
<span class="nx">driver</span><span class="p">.</span><span class="nb">window</span><span class="p">(</span><span class="s2">"WEBVIEW"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 选择唯一的 WebView</span>
  <span class="nx">driver</span><span class="p">.</span><span class="nx">elementsByCss</span><span class="p">(</span><span class="s1">'.some-class'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">els</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 通过 CSS 取得元素</span>
    <span class="nx">els</span><span class="p">.</span><span class="nx">length</span><span class="p">.</span><span class="nx">should</span><span class="p">.</span><span class="nx">be</span><span class="p">.</span><span class="nx">above</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="c1">// 验证元素存在</span>
    <span class="nx">els</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">text</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">elText</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 得到第一个元素的文本</span>
      <span class="nx">elText</span><span class="p">.</span><span class="nx">should</span><span class="p">.</span><span class="nx">eql</span><span class="p">(</span><span class="s2">"My very own text"</span><span class="p">);</span> <span class="c1">// 验证文本内容</span>
      <span class="nx">driver</span><span class="p">.</span><span class="nb">window</span><span class="p">(</span><span class="s2">"NATIVE_APP"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 离开 webview 上下文</span>
        <span class="c1">// 可以做些原生应用的测试</span>
        <span class="nx">driver</span><span class="p">.</span><span class="nx">quit</span><span class="p">();</span> <span class="c1">// 关闭 webdriver</span>
      <span class="p">});</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>

<h2 id="wd.java-代码例子">Wd.java 代码例子</h2>
<pre class="highlight java"><code>  <span class="c1">//配置 webdriver 并启动 webview 应用。</span>
  <span class="n">DesiredCapabilities</span> <span class="n">desiredCapabilities</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DesiredCapabilities</span><span class="o">();</span>
  <span class="n">desiredCapabilities</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span><span class="s">"device"</span><span class="o">,</span> <span class="s">"Selendroid"</span><span class="o">);</span>
  <span class="n">desiredCapabilities</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span><span class="s">"app"</span><span class="o">,</span> <span class="s">"/path/to/some.apk"</span><span class="o">);</span>  
  <span class="n">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://127.0.0.1:4723/wd/hub"</span><span class="o">);</span>
  <span class="n">RemoteWebDriver</span> <span class="n">remoteWebDriver</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RemoteWebDriver</span><span class="o">(</span><span class="n">url</span><span class="o">,</span> <span class="n">desiredCapabilities</span><span class="o">);</span>

  <span class="c1">// 切换到最新的web视图</span>
  <span class="n">remoteWebDriver</span><span class="o">.</span><span class="na">switchTo</span><span class="o">().</span><span class="na">window</span><span class="o">(</span><span class="s">"WEBVIEW"</span><span class="o">);</span>

  <span class="c1">//在 guinea-pig 页面用 id 和 元素交互。</span>
  <span class="n">WebElement</span> <span class="n">div</span> <span class="o">=</span> <span class="n">remoteWebDriver</span><span class="o">.</span><span class="na">findElement</span><span class="o">(</span><span class="n">By</span><span class="o">.</span><span class="na">id</span><span class="o">(</span><span class="s">"i_am_an_id"</span><span class="o">));</span>
  <span class="n">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="s">"I am a div"</span><span class="o">,</span> <span class="n">div</span><span class="o">.</span><span class="na">getText</span><span class="o">());</span> <span class="c1">//验证得到的文本是否正确。</span>
  <span class="n">remoteWebDriver</span><span class="o">.</span><span class="na">findElement</span><span class="o">(</span><span class="n">By</span><span class="o">.</span><span class="na">id</span><span class="o">(</span><span class="s">"comments"</span><span class="o">)).</span><span class="na">sendKeys</span><span class="o">(</span><span class="s">"My comment"</span><span class="o">);</span> <span class="c1">//填写评论。</span>

  <span class="c1">//离开 webview，回到原生应用。</span>
  <span class="n">remoteWebDriver</span><span class="o">.</span><span class="na">switchTo</span><span class="o">().</span><span class="na">window</span><span class="o">(</span><span class="s">"NATIVE_APP"</span><span class="o">);</span>

  <span class="c1">//关闭应用。</span>
  <span class="n">remoteWebDriver</span><span class="o">.</span><span class="na">quit</span><span class="o">();</span>
</code></pre>

<h1 id="把appium-0.18.x上的测试用例集迁移到appium1.x上">把appium 0.18.x上的测试用例集迁移到appium1.x上</h1>

<p>Appium 1.0 已经从先前的版本中移除了一部分过时的特性, 这个指导文档会帮助你了解使用Appium 1.0需要做的具体改变.</p>

<h2 id="新的客户端库">
<span id="migrating-to-1-0.cn.md"></span>新的客户端库</h2>

<p>你需要关注的最大的改变是利用新的appium的client libraries来替换原生的WebDriver ciients. 访问<a href="#appium-clients.md">Appium client list</a> 去寻找符合你自己编程语言的客户端库吧. 在每个客户端的网站上都可以找到用于集成到你代码中的依赖库相关介绍和下载</p>

<p>基本上, 你需要做如下的改变(以Python作为例子)</p>

<p>用
<code class="prettyprint">
from appium import webdriver
</code></p>

<p>替换原来的:</p>
<pre class="highlight plaintext"><code>from selenium import webdriver
</code></pre>

<h2 id="新的适配参数">新的适配参数</h2>

<p>下面的适配参数将不再使用
* <code class="prettyprint">device</code>
* <code class="prettyprint">version</code></p>

<p>取而代之的是利用下面的配置参数</p>

<ul>
<li>
<code class="prettyprint">platformName</code> (“iOS” 或者 “Android”)</li>
<li>
<code class="prettyprint">platformVersion</code> (你希望测试的os版本)</li>
<li>
<code class="prettyprint">deviceName</code> (你想用的设备, 比如 “iPhone Simulator”)</li>
<li>
<code class="prettyprint">automationName</code> (“Selendroid” 如果你想使用Selendroid的话, 否则可以省略)</li>
</ul>

<p><code class="prettyprint">app</code> 配置参数保持不变, 但是特指非浏览器的app, 如果你想使用类似Safari或者Chrome这样的浏览器, 你需要设置<code class="prettyprint">browserName</code>. 这代表<code class="prettyprint">app</code>和<code class="prettyprint">browserName</code>是互斥的.</p>

<p>我们把appium的配置参数都规范为驼峰拼写法(camelCase), 这代表着原来的<code class="prettyprint">app-package</code>或者<code class="prettyprint">app-wait-activity</code>现在会变成<code class="prettyprint">appPackage</code>和<code class="prettyprint">appWaitActivity</code>. 当然目前android的app package和activity都已经是自动探测了, 大部分情况下你可以省略这两个配置项.</p>

<h2 id="新的定位方式">新的定位方式</h2>

<p>我们已经移除了下面的定位方式 </p>

<ul>
<li><code class="prettyprint">name</code></li>
<li><code class="prettyprint">tag name</code></li>
</ul>

<p>我们增加了<code class="prettyprint">accessibility_id</code>定位方法去做过去<code class="prettyprint">name</code>做的事情. 具体的细节还得跟你使用的Appium客户端库有关.</p>

<p><code class="prettyprint">tag name</code>已经被替换为<code class="prettyprint">class name</code>. 所以想通过UI的类型来定位某个元素, 你需要使用class name定位方式</p>

<p>关于<code class="prettyprint">class name</code>和<code class="prettyprint">xpath</code>的定位方式: 现在需要使用完整的全类名, 这意味着如果你有一个如下的定位用的xpath</p>
<pre class="highlight plaintext"><code>//table/cell/button
</code></pre>

<p>现在需要改成</p>
<pre class="highlight plaintext"><code>//UIATableView/UIATableCell/UIAButton
</code></pre>

<p>如果是android的话, <code class="prettyprint">button</code>需要改变成<code class="prettyprint">android.widget.Button</code></p>

<p>我们也增加了如下的定位方式</p>

<ul>
<li><code class="prettyprint">-ios uiautomation</code></li>
<li><code class="prettyprint">-android uiautomator</code></li>
</ul>

<p>根据你使用的客户端去相应的使用新的定位方式</p>

<h2 id="使用xml,-不再是json了">使用xml, 不再是json了</h2>

<p>App source方法先前返回JSON, 现在修改成返回XML. 所以如果你有代码是依赖解析app source的, 那么就需要更新</p>

<h2 id="通过context支持混合应用,-不再是window了">通过context支持混合应用, 不再是window了</h2>

<p>以前混合app的切换支持是通过"windows"</p>

<ul>
<li><code class="prettyprint">window_handles</code></li>
<li><code class="prettyprint">window</code></li>
<li><code class="prettyprint">switch_to.window</code></li>
</ul>

<p>现在Appium支持"context" 概念了, 要获得当前环境下所有的上下文(contexts), 或者特定的context, 你可以用</p>
<pre class="highlight python"><code><span class="n">driver</span><span class="o">.</span><span class="n">contexts</span>
<span class="n">current</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">context</span>
</code></pre>

<p>在这些context之间切换, 可以使用</p>
<pre class="highlight python"><code><span class="n">driver</span><span class="o">.</span><span class="n">switch_to</span><span class="o">.</span><span class="n">context</span><span class="p">(</span><span class="s">"WEBVIEW"</span><span class="p">)</span>
</code></pre>

<h2 id='没有了execute_script("mobile:-xxx")'>没有了<code class="prettyprint">execute_script("mobile: xxx")</code>
</h2>

<p>所有的<code class="prettyprint">mobile:</code>方法都已经被移除, 并且被替换为appium client libraries的原生方法. 这意味着如果一个方法调用原来的方式是
<code class="prettyprint">driver.execute("mobile: lock", [5])</code>
现在需要更新为
<code class="prettyprint">driver.lock(5)</code> 
在这个地方<code class="prettyprint">lock</code>已经变成了原生的客户端方法. 当然具体的调用细节在不同的客户端库中的实现可能会有所差别.</p>

<p>特别需要注意的是, 手势(gesture)方法已经被替换为TouchAction / MultiAction API, 它允许更强大通用的组合手势的自动化. 可以参考你的客户端库的具体用法.</p>

<p>这就是全部啦, 祝迁移愉快</p>

<p>(文档由testerhome.com翻译, 欢迎更多热爱技术的同学加入到翻译中来, We Love Appium)</p>

<h2 id="settings">
<span id="settings.cn.md"></span>Settings</h2>

<p>Settings 是 Appium 引入的一个新的概念。 它目前还没有被纳入 Mobile JSON Wire Protocol 及 Webdriver 标准之中。</p>

<p>Settings 是一种用来配置 Appium 服务器的方式。</p>

<p>Settings 有以下特点：
 - 可变的，它在同一会话中是可以被修改的。
 - 唯一的，它在被测应用会话中是唯一的。 它在每创建一个新会话时会被重置。
 - 可控的，它在自动化测试过程中控制着 Appium 服务器的运行。 它们不会被用来控制被测应用或被测终端。</p>

<p>在 Android 环境中 以 <code class="prettyprint">ignoreUnimportantViews</code> 设置举例，该参数在 Android 环境中可以被设置成忽略所有与当前视图无关的元素，它将使测试过程更加有效率。 然而当我们希望能够访问被忽略的元素时，我们必须在将 <code class="prettyprint">ignoreUnimportantViews</code> 设置成 <em>true</em> 后，重新修改成 <em>false</em> 。</p>

<p>另外也可以通过 Settings 配置让 Appium 忽略所有当前不可见的元素。</p>

<p>Settings 可以通过以下 API 方法进行配置：</p>

<p><strong>POST</strong> /session/:sessionId/appium/settings</p>

<blockquote>
<p>以 JSON 格式提交 key:value 键值对形式的Settings配置。
<code class="prettyprint">
{
  settings: {
   ignoreUnimportantViews : true  
  }  
}
</code></p>
</blockquote>

<p><strong>GET</strong> /session/:sessionId/appium/settings</p>

<blockquote>
<p>以 JSON 格式返回当前所有 Settings 配置。
<code class="prettyprint">
{
  ignoreUnimportantViews : true  
}
</code></p>
</blockquote>

<h3 id="其它-settings-配置参考">其它 Settings 配置参考</h3>

<p><strong>“ignoreUnimportantViews”</strong> -该参数值为 <em>true</em> 或 <em>false</em>。 如果你希望能够尽量减少测试过程的交互确认过程，或希望测试脚本能更快的执行，可以在 Android 终端环境下使用 <code class="prettyprint">setCompressedLayoutHeirarchy()</code> 参数。它将忽略所有被标记为 IMPORTANT_FOR_ACCESSIBILITY_NO 或 IMPORTANT_FOR_ACCESSIBILITY_AUTO（以及那些被认为不是很重要的系统元素）的元素。</p>

      </div>
      <div class="dark-box">
          <div id="lang-selector">
                <a href="#" data-language-name="ruby">Ruby</a>
                <a href="#" data-language-name="python">Python</a>
                <a href="#" data-language-name="java">Java</a>
                <a href="#" data-language-name="javascript">JavaScript</a>
                <a href="#" data-language-name="php">PHP</a>
                <a href="#" data-language-name="csharp">C#</a>
          </div>
      </div>
    </div>
  </body>
</html>
